"","",""
"1","Patch Set 2: Code-Review-2 review master 1st","A"
"2","Patch Set 4: I don't really like this (opinion; let's get others). iotivity has just one license. for the external projects, it should be enough just to list them (maybe with a http link), and it should not be a variable list. so I'm thinking just make the LEGAL.md and commit it.","A"
"3","Patch Set 4: This change is not critical, but since it was accepted in tizen spec file, I thought it could be done at scons level, to make it usable for all. Note iotivity binaries are shiping builds extlibs, so I wanted to make sure everything was compatible and not omited. I am also considering to commit LEGAL.md and keep this scanner to track changes if any.","A"
"4","Patch Set 5: (1 comment) plugins/samples/linux/IotivityandZigbeeClient.c Line 39: at the current state I would say that all example are experimental unless specified. This change is making this example buildable using installed (experimentals) headers. So either logger and client of logger are experimental and this change should goes in :) either logger (plus payload logger) is not experimental and belongs to API, then it should be installed along other headers.","A"
"5","Patch Set 5: Code-Review-1 (1 comment) -1 pending answer to my question plugins/samples/linux/IotivityandZigbeeClient.c Line 37: samples should only include experimental headers if the sample itself is declared as experimental. (see https://wiki.iotivity.org/api_guidelines) Is this sample documented as experimental somewhere or somehow? Where? Remember ""All public APIs must be used in some sample code or snippet"" and ""Experimental APIs should ideally be used in some sample code (separate from samples that use only public APIs) or snippet. Ideally, the sample should be one that is compiled as part of the build. For rarely used APIs, the sample might simply be a snippet in the doxygen comments.""","A"
"6","Patch Set 3: Since 1.3.1 is all-but-final (I think a few WES issues remain only) can we cherry pick to master and abandon the 1.3-rel version? This looks like a very large change to push into 1.3-rel at this point.","A"
"7","Patch Set 3: Code-Review-1 (8 comments) In general experimental APIs should not be used in the same samples meant to be the samples for public APIs. As such, either the logging APIs need to be public, or we need new samples that do not use experimental APIs. resource/csdk/security/provisioning/sample/cloud/cloudAuth.c Line 22: Since this sample uses experimental APIs, please include a notice in README-cloud.txt that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/resource-directory/samples/rd_queryClient.cpp Line 24: Since this sample uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/security/provisioning/sample/autoprovisioningclient.c Line 38: Since this sample uses experimental APIs, please include a notice in README-Provisioning-Tool.txt that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcred.c Line 38: Since this tool uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/stack/samples/linux/OCSample/ocserver.c Line 36: Since this sample code uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/resource-directory/samples/rd_publishingClient.cpp Line 29: Since this sample uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/stack/samples/linux/OCSample/occlient.c Line 34: Since this sample code uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases. resource/csdk/stack/samples/arduino/SimpleClientServer/ocserver/ocserver.cpp Line 24: Since this sample code uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.","A"
"8","Patch Set 1: Code-Review-1 (9 comments) resource/csdk/connectivity/src/cainterfacecontroller.c Line 26: why did platform_features.h need to be added?","A"
"9","Patch Set 5: Verified+1 @Dave, I prefer to not change this patch but I prepared this one for you: https://gerrit.iotivity.org/gerrit/#/c/23483/","A"
"10","Patch Set 3: Change makes since to me. I will give this a +1 this seems like an issue caused by not having clear list of public header files. I am not completely convinced the logging should be made public. Since we already have samples and code that assume it is public this change makes since.","A"
"11","Patch Set 5: Note this was merged in master branch","A"
"12","Patch Set 2: (1 comment) Dockerfile Line 70: I would suggest to provide a ARG to allow customization of the scons build, e.g. ARG buildargs and then call scons with scons VERBOSE=1 ${buildargs}","A"
"13","Patch Set 6: Like I did for tizen: https://gerrit.iotivity.org/gerrit/#/c/23451/ or fedora OK to relocate, I still think it could be good to have a default docker file, maybe I will propose one that clone from sources. Anyway there is no emergency to merge this.","A"
"14","Patch Set 2: Partly answering myself, it seems the prep.sh call is relative to the top of the iotivity tree.","A"
"15","Patch Set 6: As Martin says, we should wrap this in a script which allows for some customization. That would also allow more easily running from a non-top-level directory, there's enough stuff in the top already. There is already a tools/docker directory so as mentioned I'd prefer it there.","A"
"16","Patch Set 2: One benefit or putting them in root folder, use could run docker build $URL","A"
"17","Patch Set 2: can we put this in the same place as the vagrantfile (that is, a subdir under tools)? I'm not sure that is the perfect place either but it would be nice to keep things consistent.","A"
"18","Patch Set 3: I got kind of interested in the idea too. The vagrant setup does clone the repo inside the new machine, which is straightforward, but also if you look from a distance, you already checked out the tree to get the vagrant script, it's tempting to be able to reuse that checkout the way the docker set up does instead of cloning again. So I don't know which is ""right"" :(","A"
"19","Patch Set 4: > of course it is possible, this was mainly to show it works to use > local copy. although... if everything else happens under scons control, it's a little problematic to pull it first.","A"
"20","Patch Set 3: of course it is possible, this was mainly to show it works to use local copy","A"
"21","Patch Set 3: would it be possible to fetch upstream using prep.sh and eventually apply patch over it ? then we can add import patch on it like I did for downstream shipped libs ?","A"
"22","Patch Set 3: Please try: ./scons-local/scons.py --prefix=/tmp/ ./scons-local/scons.py --prefix=/tmp/ --install-sandbox=/tmp/sandbox install scons: *** [out/linux/x86_64/release/liblogger.a] AttributeError : 'FileBuildInfo' object has no attribute 'result' Is what I am also facing since scons-2.3.0-2","A"
"23","Patch Set 1: (1 comment) Why not pull it using scriptlet like extlibs/scons/prep.sh ? or it wont work for windows, but we can put it there too /COMMIT_MSG Line 17: Bug: https://jira.iotivity.org/browse/IOT-2668","A"
"24","Patch Set 1: Code-Review-1 Just shared does not worth to be committed there is enough confusion with our build scripts","A"
"25","Patch Set 1: Note there are two separate issues here: at the moment the Jar sort-of-builder wants a flat list, passing a list of objects from the Java builder and adding the manifest to that in a list would give a two-element list the first element of which is itself a list. It looks like this is going to change in scons. A more explicit way to do this would have been to rewrite this: source=simpleclient_classes + [File('MANIFEST.MF')]) as source=Flatten([simpleclient_classes, File('MANIFEST.MF'])_ The second item is that if the manifest is passed as a file and variant dir is in effect, the new scons code checking for non-objects (that is strings) will not find the manifest and will omit it, which means you get the default instead.","A"
"26","Patch Set 29: Code-Review+1 (1 comment) Looks reasonable tools/tizen/iotivity.spec Line 206: trailing comment mark intended?","A"
"27","Patch Set 29: Verified+1 (1 comment) tools/tizen/iotivity.spec Line 206: markdown title, trailing # is allowed and is more visible IMHO","A"
"28","Patch Set 5: Code-Review+1 I am not familiar with the script in question but I am familiar enough with the tools needed to build IoTivity that I am giving this a +1.","A"
"29","Patch Set 4: Code-Review-2 merge in master 1st","A"
"30","Patch Set 5: Code-Review+1 (2 comments) service/easy-setup/enrollee/unittests/ESMediatorSimulator.h Line 175: @todo The local device should probably be a property of the resource service/scene-manager/src/SceneUtils.cpp Line 79: Yes","A"
"31","Patch Set 1: Code-Review-1 This commit should be squashed with its parent commit. Then abandoned.","A"
"32","Patch Set 1: The need for multiple device support or virtual devices keeps on coming up when working on bridging code. The need to specify that the bridge and the discovered devices. For that reason I have once again revisited the code. I decided to try and fix the build errors. Most of the build errors were minor and easy to find. When running the unit tests the code hits the assert in the CAGetDefaultDevice. this happens when calling CAInitialize(CA_DEFAULT_ADAPTER) some where along the line the caglobals.headLocalDevice is not being set.","A"
"33","Patch Set 11: (1 comment) build_common/SConscript Line 899: 1. the current python convention is a stanza like def ScanJson(env, directory=None): if not directory: directory = '.' that doesn't mean it's wrong as written. 2. Python won't let you assign inside an if statement (it's a syntax errror) so there's no need for the backwards comparison this project insists on using for C code.","A"
"34","Patch Set 11: Code-Review+1 I want to rework several of the functions that are added in build_common/SConscript by AddMethod, but not going to impose a requirement to fold those in here. This looks ok... if there's no objection elsewhere I will merge in next 24hrs.","A"
"35","Patch Set 3: IMHO Tizen and linux (+windows) should be aligned if there is no justification for doing different, or we could make tizen static instead ?","A"
"36","Patch Set 3: (1 comment) service/coap-http-proxy/SConscript Line 99: I somehow missed that discussion, but I have catched up on it now from the archive. I also prefer shared libs, mostly because I'm used to it and it's the preferred way in Linux and Yocto.","A"
"37","Patch Set 3: (1 comment) service/coap-http-proxy/SConscript Line 99: it would be nice to have linux and tizen aligned too I have no preference.. shlibs are better IHMO, except for tests","A"
"38","Patch Set 3: (1 comment) service/coap-http-proxy/SConscript Line 99: Seems like discussion some months ago was suggesting to move away from shared libs. So some justification might be useful here.","A"
"39","Patch Set 5: Verified+1 Depends on: https://gerrit.iotivity.org/gerrit/#/c/23403/","A"
"40","Patch Set 3: Windows is typically the target that has more difficulty. You must add a *.def file to export functions to a dll or you have to add dll export to the code. For C code like coap-http-proxy this is not generally a hard thing to do, make a *.def file. For C++ it is harder because of the function decorations added by the compiler means you can not add a *.def file and must add dllexport to the code. For that reason none of the C++ code is compiled to a dll yet. This has actually caused some major problems getting the java language bindings to work for windows. We have to have a shared library for all the platforms or statically link for all the platforms. At least when doing Java via JNI.","A"
"41","Patch Set 1: Code-Review-1 (4 comments) Please return appropriate value. test/src/testapp/ca/c_cpp/src/sample_server.c Line 91: Return type converted from void to CAResult_t Should there be a retrun at the end of the fuction? test/src/tc/ca/gtest/src/helper/CAHelper.cpp Line 1439: Return type converted from void to CAResult_t Should there be a retrun at the end of the fuction? test/src/testapp/ca/c_cpp/src/sample_client.c Line 78: Return type converted from void to CAResult_t Should there be a retrun at the end of the fuction? test/src/testapp/ca/c_cpp/src/ca_simulator.c Line 228: Return type converted from void to CAResult_t Should there be a retrun at the end of the fuction?","A"
"42","Patch Set 1: gnu make wraps to scons here And try to guess some variables (arch etc) see: debian/rules in : https://gerrit.iotivity.org/gerrit/#/c/20629/ much simpler to factorize packaging scripts in this file for whoever wants to use it","A"
"43","Patch Set 1: ""scons is not as popular as GNU make"", but since the makefile calls scons, I don't see anything being gained here.","A"
"44","Patch Set 4: (1 comment) /COMMIT_MSG Line 17: Bug: $url Is debian DEP3 standard","A"
"45","Patch Set 4: (6 comments) This is not a full review. I still need to look at the samples themselves. examples/OCFSecure/SConscript Line 38: I know you were probably referencing other code when creating this. There is currently work in progress to change these to use a more SCons like path. replace os.path.join(src_dir, 'resource', 'csdk', 'connectivity','api') with '#/resource/csdk/connectivity/api' same for lines 34-38 Line 62: nit: remove tailing whitespace Line 64: not 100% sure but I don't think you need to full path to the .dat file. you should be able to just do samples_env.Install(build_dir + examples_dir, 'ocf_svr_db_client.dat') examples/OCFSecure/README.txt Line 4: the Line 4: in the","A"
"46","Patch Set 4: (3 comments) still reviewing... examples/OCFSecure/utilities.c Line 8: typically it is a good idea to surround these with a define that can be used to turn it off on platforms that don't support ANSI color. Also macros of such a common name should have a prefix to prevent them from conflicting with other macros. I am using ANSI_COLOR_ as a prefix but you could find a shorter prefix. example #define ANSI_COLOR_SUPPORTED 1 #ifdef ANSI_COLOR_SUPPORTED #define ANSI_COLOR_RESET ""\x1B[0m"" ... #define ANSI_COLOR_WHITE ""\x1b[37m"" #else #define ANSI_COLOR_RESET """" ... #define ANSI_COLOR_WHITE """" #endif examples/OCFSecure/ocf_svr_db_client.json Line 41: I don't know what 'sct' means but other examples recently changed this to 9 can other reviewers help me out what should this value be?","A"
"47","Patch Set 6: (1 comment) examples/OCFSecure/client.c Line 40: this should be MAX_URI_LENGTH from ocstackconfig.h","A"
"48","Patch Set 7: Code-Review+1 (8 comments) I have left several suggestions for minor cleanup but none of them are significant enough for me to stop this being committed. examples/OCFSecure/server.cpp Line 62: nit: clean trailing white space. Line 206: although I didn't find anything on this in the coding guidelines I would recommend putting the else on its own line it makes it stand out and simpler to read. } else { or } else if() } Line 301: if (signalNumber == SIGINT) { STOP = true; } examples/OCFSecure/client.c Line 120: nit: clean up white space. Line 253: nit: clean trailing whitespace Line 260: I recommend using OC_UNUSED(handle) in place of the (void) cast. Makes it clear this is an unused input. Line 462: use {} if (signalNumber == SIGINT) { STOP = true; } Line 484: since argc and argv are not used why not use 'int main() {...}' without the params.","A"
"49","Patch Set 9: Code-Review+1 (2 comments) examples/OCFSecure/server.cpp Line 306: nit: fix tab depth. I assume this is a copy paste error. examples/OCFSecure/client.c Line 462: nit: fix tab depth to match if statement as done else where.","A"
"50","Patch Set 11: (18 comments) > (1 comment) > > thanks for those new examples, but IMHO It would be nice to fix > existing ones because this could add more confusion to developers What does IMHO mean? These examples will be the ones used for ""getting started with IoTivity"" Other examples are not maintained and / or used for unit testing and / or do not implement security while these examples will be continuously maintained and used to help new users to get up and running with IoTivity. examples/OCFSecure/SConscript Line 38: Done Line 62: Done Line 64: looks like I need the full path. Otherwise I get the files do not get copied over and I get what seems like an error (although scons does not flag it as error) called ""dependency cycle(s)"" examples/OCFSecure/utilities.c Line 8: It is not needed and now the logging is colored and it is messing it up. so I will just delete it examples/OCFSecure/ocf_svr_db_client.json Line 41: it means Supported Credential Types (SCT). The goal of it is to identify the types of credentials the device supports. It is set by the SRM at framework initialization after determining security capabilities. So, it does not matter in this particular sample application. I will change it to 9 to match other samples so anyone who is debugging code does not waste time playing with the sct as it would waste their time like it did with mine. examples/OCFSecure/server.cpp Line 62: Done Line 206: Done Line 301: Done Line 306: Done examples/OCFSecure/client.c Line 40: Done Line 120: Done Line 253: Done Line 260: Done Line 462: Done Line 484: Done Line 462: Done examples/OCFSecure/README.txt Line 5: what do you mean by trimming the EOL? deleteing trailing white space or reduce the number of characters in each line? Markdown might be better than text file in the mirrored repo on github. I will consider changing the text file to markdown at the soonest chance. Thank you","A"
"51","Patch Set 12: (2 comments) Do we want to add dep to mraa ? examples/OCFSecure/server.cpp Line 32: cant we use C lib ? Line 133: May I suggest to use: #if mraa ... #else print() #endif","A"
"52","Patch Set 12: Code-Review-1 (6 comments) Looks good but please fix the server .json and .dat right away so we can merge for 1.3.1. examples/OCFSecure/ocf_svr_db_server.json Line 31: this should be read-only (""permission"": 2) once in RFNOP (""pstat.dos.s"" = 3 below)... leaving it as 14 allows anonymous clients to take ownership of the Server! So since this device is already onboarded, it should be 2 already here. For brevity, just remove this ACE, and add ""/oic/sec/doxm"" to aceid 1 above Line 39: /doxm should be removed from this ACE. A separate ACE granting ""auth-crypt"" permission 2 (read-only) should be added, or (again for brevity), just add ""/oic/sec/doxm"" to aceid 2 above. examples/OCFSecure/README.txt Line 1: . Line 9: ""These"", right? Line 47: ) Line 59: If","A"
"53","atch Set 13: (2 comments) if virtual device then print change examples/OCFSecure/server.cpp Line 31: maybe use #ifdef HAVE_MRAA_HPP Line 134: #else print new status for those with are not supporting mrra #endif","A"
"54","Patch Set 13: (2 comments) These seem ready to merge; any last objections before I merge to 1.3-rel? examples/OCFSecure/ocf_svr_db_server.json Line 10: add a space! Line 21: space","A"
"55","Patch Set 12: > (2 comments) > > Do we want to add dep to mraa ? The MRAA dep is only needed when building on the raspberry pi or theintel Joule board. there will not be a MRAA dep when building for a normal Linux machine. The is #ifdef MRAA check","A"
"56","Patch Set 12: > > (2 comments) > > > > Do we want to add dep to mraa ? > > The MRAA dep is only needed when building on the raspberry pi or > theintel Joule board. there will not be a MRAA dep when building > for a normal Linux machine. The is #ifdef MRAA check these applications will still build and run on the Raspberry pi and the Intel Joule board without MRAA. Without MRAA, you would get a simulated LED rather than controlling the real hardware","A"
"57","Topic set to secure sample applications","A"
"58","Patch Set 1: Code-Review-1 (2 comments) A lot of this code appears to be the PEM/DER work from 22983. At the time I recall we decided this work should go into master, not 1.3-rel. What is the justification for bringing this work in now? If this work will come in with this change, then as I note in the commit message, it needs to reflect this as well. The now-reverted change that introduced this code did not mention at all the PEM/DER conversion changes that were also in that work. /COMMIT_MSG Line 9: Please expand the commit comment to fully describe the work being done in this change. Although here and now as we're reviewing the code we know what these changes mean, for the benefit of other people looking at the code history in the future, give a description here that stands on its own. resource/csdk/security/src/credresource.c Line 3175: What warning is being suppressed by this cast, by the way? Signed/unsigned comparison?","A"
"59","Patch Set 2: -Code-Review
(2 comments)
try to rebase to make sure
service/notification/SConscript
Line 81:
rm line if not used ?
tools/tizen/iotivity.spec
Line 301:
rm here ^","A"
"60","Patch Set 1: Code-Review+2
(1 comment)
Commit Message
Line 13:
rm ^","A"
"61","Patch Set 1: Code-Review-1
(2 comments)
test/build/linux/SConscriptSM
Line 83:
why we need multiple copy of SM Resource lib
Line 84:
is this path location valid ?","A"
"62","Patch Set 2: Code-Review-1
(3 comments)
test/build/linux/SConscriptSM
Line 82:
SM_RESOURCE_DIR = ORG_SRC_HOME + '/resource'
SM_RESOURCE_LOGGER = SM_RESOURCE_DIR + '/csdk/logger/include
why same thing is included ?
Line 159:
why this thing included ?
Line 192:
?","A"
"63","Patch Set 1:
(7 comments)
OK can be improved
resource/csdk/connectivity/src/ip_adapter/caipserver.c
Line 221:
could be easier to read if no return used
Line 228:
the 2 tests are enough , no need for == ret
Line 230:
useless as it's the end of the function
Line 252:
typo detEcted
Line 1125:
%d is generally used ?
resource/csdk/connectivity/src/tcp_adapter/catcpserver.c
Line 263:
not needed if > test enabled
Line 272:
not needed","A"
"64","Patch Set 1:
(5 comments)
resource/csdk/security/provisioning/sample/cloud/cloudResource.c
Line 58:
Please keep code consistensy, use ""OUT %s""
Line 63:
Out log missed, please add OIC_LOG_V(DEBUG, TAG, ""OUT %s"",  __func__);
Line 66:
__func__ not needed.
Line 86:
Out log missed
Line 105:
Please keep code consistensy, use ""OUT %s""","A"
"65","Patch Set 1:
(1 comment)
resource/csdk/security/provisioning/sample/cloud/cloudResource.c
Line 105:
Dear Oleksand, this has sense because it is common rule in this project.
Please run the following commands in the IoTivity directory:
1) grep -nHIrF -- ""In %s"", __func__  -  Search completed with 96 matches.
2) grep -nHIrF -- ""%s: OUT"",  __func__  -  No matches found.","A"
"66","Patch Set 3:
(2 comments)
extlibs/gtest/SConscript
Line 127:
else: ( g++ )
resource/c_common/windows/test/snprintf_test.cpp
Line 36:
^","A"
"67","Patch Set 8: Code-Review-1
(2 comments)
extlibs/gtest/SConscript
Line 101:
I don't fully understand how this variable is used.  Why is it needed, and why is it safe to not clear it if gtest is cleaned?
resource/c_common/windows/src/snprintf.c
Line 46:
This code still returns -1.  Shouldn't this convert truncation into a success rather than a -1?","A"
"68","Patch Set 8:
(2 comments)
extlibs/gtest/SConscript
Line 101:
line 101 says it's an ""environment variable"", but your response says it's an scons in-memory flag.  Would be good to expand the # comment to contain more of your response which has good info.
resource/c_common/windows/src/snprintf.c
Line 46:
Update comment to make it clear that you're choosing to be non-compliant anyway, and maybe add a @todo to support returning the count needed.","A"
"69","Patch Set 2:
(1 comment)
service/resource-encapsulation/src/common/primitiveResource/src/RCSResourceAttributes.cpp
Base, Line 209:
BOOST_CONSTEXPR might also work.","A"
"70","Patch Set 4:
(1 comment)
resource/csdk/connectivity/src/ip_adapter/android/caifaddrs.c
Line 163:
ssize_t should be used. please refer below.
ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags, struct sockaddr *src_addr, socklen_t *addrlen);","A"
"71","Patch Set 6: Code-Review+1
(2 comments)
minor doxygen comment ..
resource/csdk/connectivity/src/ip_adapter/android/caifaddrs.c
Line 1:
add space after first *. As you are modifying the licence, I am requesting this change
resource/csdk/connectivity/src/ip_adapter/android/caifaddrs.h
Line 1:
add space after first *. As you are modifying the licence, I am requesting this change","A"
"72","Patch Set 11: Code-Review-1
(16 comments)
resource/csdk/stack/include/internal/ocfendpoint.h
Line 47:
should line up
Line 56:
""flag"" and ""suites"" should have same arity.  Either both singular or both plural, and it should match the function name.  So either ""Flag"" and ""Suite"" or ""Flags"" and ""Suites"".  Same in line 57 and 70
resource/csdk/stack/include/internal/ocresource.h
Line 255:
period before the space
resource/csdk/stack/include/octypes.h
Line 1064:
what does this mean
Line 1065:
I don't think there should be separate values for IPv4 vs IPv6.  IPv4 vs IPv6 is a property of the address not the scheme.
resource/csdk/stack/src/ocfendpoint.c
Line 30:
inconsistent spacing.  Here has space both before and after *.  Line 40 has it only before.  Line 42 has it only after.  Be consistent.
Line 52:
What's OCFEndpointll?
Line 52:
typo
Line 58:
space
Line 75:
space
Line 85:
space
Line 95:
space.  Same comment throughout this file.
Line 98:
space before and after =.
Same in 100
Line 143:
I don't follow.  This says ""all"" meaning multiple, but the function name is ""Payload"" singular.
Line 220:
shorter to just do
(*out) |= tmp->tps;
Line 231:
I can't parse this sentence, but the function seems to do nothing.","A"
"73","Patch Set 23:
(3 comments)
resource/csdk/stack/src/ocendpoint.c
Line 166:
Please add initialization.
Line 193:
How about you use sizeof(tempNode->addr).","A"
"74","Patch Set 41:
(1 comment)
resource/csdk/stack/include/internal/ocendpoint.h
Line 59:
I disagree, it's good practice.  The advantage is that you avoid issues where code uses the define without that code being wrapped in the same ifdef.","A"
"75","Patch Set 44:
(2 comments)
resource/csdk/stack/include/octypes.h
Line 72:
why was ifdef WITH_MQ removed?
Line 80:
why was #ifdef WITH_CLOUD removed?
Any define intended for use only by ifdef'ed code should have the same ifdef, to prevent accidental use outside the ifdef.","A"
"76","Patch Set 44:
(2 comments)
resource/csdk/stack/src/ocendpoint.c
Line 144:
info also needs null check.
Line 158:
How about returning riResult?","A"
"77","Patch Set 1: Code-Review+1
(1 comment)
service/resource-encapsulation/examples/tizen/RESampleServerApp/inc/reserver.h
Line 61:
what wrong with this line CR/LF ?","A"
"78","Patch Set 3: Code-Review+1
(1 comment)
test/src/tc/ns/gtest/cpp/src/btc/NSProviderCppTest.cpp
Line 714:
multiple time 100 is been used, make constant variable","A"
"79","Patch Set 2: Code-Review-1
(1 comment)
Code looks good.  Moving the API from ocstackinternal.h to ocstack.h  seems reasonable.  I have just a few small concerns.
Should there be a change to the .def file?
Can the documentation be moved?
resource/csdk/stack/src/ocstack.c
Line 883:
Now that this is becoming a public function, move the documentation block into the header file?","A"
"80","Patch Set 4:
(3 comments)
resource/csdk/stack/src/ocstack.c
Line 961:
please don't use magic number. someone might not know about meanning of the number
Line 966:
size_t
Line 969:
it needs to check effectiveness","A"
"81","Patch Set 1: Code-Review+1
(1 comment)
resource/csdk/stack/src/ocresource.c
Line 868:
would suggest setting discoveryResult = OC_STACK_OK by default on line 767.  Any error condition through out the function should set it to some errors.
VERIFY_PARAM_NON_NULL macro can be made to initialize the discoveryResult with error eliminating the need for lines 862 and 881.","A"
"82","Patch Set 1: Code-Review+1
(2 comments)
Looks reasonable to me - except for the issue already mentioned by Dave.
resource/c_common/oic_malloc/src/oic_malloc.c
Line 149:
Suggest adding curly brackets here. Also, two statements instead of a single ""*p++ = 0;"" would be easier to read.
resource/csdk/security/src/credresource.c
Line 1675:
0U looks unusual. Just 0 should be good enough.","A"
"83","Patch Set 6:
(3 comments)
service/notification/include/NSCommon.h
Line 85:
You means that Message will be different from MQ path and existing NS path.
service/notification/src/consumer/NSConsumerCommon.c
Line 831:
I'm wondering 
if (address[tmp] == '\0' || address[tmp] > '9' || address[tmp] < '0') will drop % character.
service/notification/src/consumer/NSConsumerInterface.c
Line 89:
Do you mean discoverMQTopics C++ API works for MQsub operation?","A"
"84","Patch Set 6:
(1 comment)
service/notification/src/consumer/NSConsumerCommon.c
Line 831:
I thought we should handle it also by ""not breaking"".","A"
"85","Patch Set 1:
(3 comments)
I am not sure I understand discoveryPayloadCreateAndAddDeviceId parms
Commit Message
Line 15:
Bug: ... ^  will make it appear in metadata and could be parsed by a bot
resource/csdk/stack/src/ocresource.c
Line 618:
why is it passed then ?
Line 709:
replace with NULL maybe","A"
"86","Patch Set 2: Code-Review-1
(1 comment)
resource/csdk/security/src/iotvticalendar.c
Line 223:
Why isn't this initialized? Are we now using uninitialized memory at line 233?","A"
"87","Patch Set 2:
(1 comment)
resource/csdk/connectivity/src/ip_adapter/linux/caipnwmonitor.c
Line 340:
It seems a unnecessary code.","A"
"88","Patch Set 3: (2 comments) resource/csdk/connectivity/common/inc/parsechain.h Line 37: of Line 45: add @param for certs","B"
"89","Patch Set 3: Abitha, we are trying to get this merged before RC6 so please let us know if you are about to tag. I need to regression test before merging.","B"
"90","Patch Set 2: (sorry, mis-clicked +2!) I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done. I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.","B"
"91","Patch Set 2: Code wise the change looks fine. I can not comment on if this commit should go into the code or not.","B"
"92","Patch Set 3: -Code-Review RC5 is tagged, so I'm removing -2. PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","B"
"93","Patch Set 3: Code-Review-2 This looks fine and I'll remove my -2 review as soon as we've tagged RC5. Right now, only ""mandatory to fix cert blocking issues"" should be merged into 1.3-rel.","B"
"94","Patch Set 3: I think I have fixed scons install, please review: https://gerrit.iotivity.org/gerrit/#/q/status:open+project:iotivity+branch:master+topic:next","B"
"95","Patch Set 4: > Please cherry pick to master Easy to do, but I thought it would be picked up by a merge, and indeed don't want to mess up the pending merge. If it's not part of that, then I can post the cherry pick.","B"
"96","Patch Set 4: Please cherry pick to master","B"
"97","Patch Set 5: Code-Review-1 just testing master, with ""silent"" patch, not intended to be merged: I have observed failure https://build.iotivity.org/ci/view/iotivity/job/iotivity-verify-unit_tests/","B"
"98","Patch Set 2: this build fail doesn't look real, just one of those transients","B"
"99","Patch Set 27: Code-Review-1 (1 comment) tools/tizen/iotivity.spec Line 195: this should not be added","B"
"100","Patch Set 10: Code-Review+1 Any complaints to merging this?","B"
"101","Patch Set 4: Code-Review-1 Please dont merge https://gerrit.iotivity.org/gerrit/#/c/23403/ Before merging this : https://gerrit.iotivity.org/gerrit/23409 bridging: Add explicit dependency to libmpm","B"
"102","Patch Set 3: (1 comment) service/coap-http-proxy/SConscript Line 99: I think the main thing is it's not a scenario where we're going to expect a lot of sharing... I'd expect most devices won't have multiple instances of the stack. I have no skin in the product game here so happy to along with whatever the team thinks is best.","B"
"103","Patch Set 5: Code-Review+1 trivial and I will merge, but it's currently in cannot merge state.","B"
"104","Patch Set 1: Code-Review-1 (1 comment) test/src/tc/es/gtest/src/btc/mediator/ESRichCommonTest.cpp Line 210: unnecessary blank space","B"
"105","Patch Set 1: please, remove IoTivity_TC.spec and ES_UTC_ITC.spec from this commit. I've removed those file in another commit (https://gerrit.iotivity.org/gerrit/23177)","B"
"106","Patch Set 4: Verified+1 merged in mater: https://gerrit.iotivity.org/gerrit/#/c/23293/","B"
"107","Patch Set 1: Any review will be highly appreciated, as we need this patch to be merged as early as possible","B"
"108","Patch Set 5: Code-Review-2 review master 1st","B"
"109","Patch Set 2: Code-Review-2 Hold off on this one, it is due to become the second of a pair of sequenced patches. Review https://gerrit.iotivity.org/gerrit/23093 instead.","B"
"110","Patch Set 2: I am not completely sure about placing 'LIBCOAP_INC' in the environment variables but I am not sure I fully see another way to work around the problem.","B"
"111","Patch Set 2: > I am not completely sure about placing 'LIBCOAP_INC' in the > environment variables but I am not sure I fully see another way to > work around the problem. It's a cheap way to save some information... since the previous approach (having every script that needs it check a different construction variable) works, there no _need_ to change.","B"
"112","Patch Set 2: Code-Review+1 Sorry I thought I already gave a +1 for the change and I was just adding a comment on top of the +1. I agree its a cheep way to share the information with other scripts.","B"
"113","Patch Set 3: -Code-Review This now based on the other patch, which would need committing first.","B"
"114","Patch Set 3: and all for the want of a comma. sigh","B"
"115","Patch Set 4: Hello George, I have taken this patch and built IoTivity code: ./auto_build.sh android_universal It has built different arch APKs for base, notification service and easy setup. But for resource-encapsulation it has build only RE client sample APKs for different arch but not for RE server samples. I checked the build.gradle of RE sample server, it seems you forgot to modify that. Please check it.","B"
"116","Patch Set 1: Code-Review-1 There are at least 14 other samples that need to be updated with the same changes that were done in the simpleserver and simpleclient build.gradle. I wanted to get this up to let others test and give feedback if needed. My biggest concern with this change. If I build from a clean build and I am only building one of the architectures say x86_64 this will produce an apk for all of the listed abi types plus the universalAPK. None of those types will work if they are installed except the x86_64 apk or the universal on x86_64.","B"
"117","Patch Set 4: Thanks Jay I think you are right I missed that I will fix it and take another look through the code to check if I missed any others","B"
"118","Patch Set 2: Verified+1 This packaging change is desirable in next version, and will not affect the code base and CTT, please merge it. Also please review similar changes in: https://gerrit.iotivity.org/gerrit/#/q/status:open+project:iotivity+branch:1.3-rel+topic:next Thanks","B"
"119","Patch Set 2: how can it be for f24 when the change is in the tizen specfile?","B"
"120","Patch Set 2: I had to build RPM so I made that spec file generic and will simplify it to rely on scons install","B"
"121","Patch Set 4: (1 comment) resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcommon.c Line 151: interesting I resolved this commit using the opposite option: https://gerrit.iotivity.org/gerrit/#/c/23001/1/resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcommon.c I am not sure which it the correct resolution.","B"
"122","Patch Set 4: I will do a quick investigation on the resolved conflict that we have different. Sorry I caused any confusion by doing the merge. I sent you an email after I did that merge. I did it to make sure we didn't get build issues after the introduction of the -Werror build flag.","B"
"123","Patch Set 4: I updated my merge to use the same merge conflict resolution you used for scrdbeditorcommon.c after looking into the change. I would have missed this if you hadn't done this merge so thank you. :)","B"
"124","Patch Set 5: Is this the same intermittent error reported here? https://jira.iotivity.org/browse/IOT-2848","B"
"125","Patch Set 5: > Is this the same intermittent error reported here? > https://jira.iotivity.org/browse/IOT-2848 UpdateSpecVersionOfDevice - yes that looks like the same one.","B"
"126","Patch Set 2: Phil I think this commit does almost all the same commits in this merge. https://gerrit.iotivity.org/gerrit/#/c/22723/3","B"
"127","Patch Set 4: Code-Review-1 May we merge this one 1st https://gerrit.iotivity.org/gerrit/#/c/23001/","B"
"128","Patch Set 5: reverify :: this is that invalid read again (valgrind)... seems like sometimes it passes on retry, but also looks like a real error, we should find. https://build.iotivity.org/ci/job/iotivity-verify-unit_tests/19688/valgrindResult/pid=29046","B"
"129","Patch Set 5: unit-tests/19706 was the same failure. Looks like we are going to have to fix this one somehow.","B"
"130","Patch Set 11: Code-Review+1 Everything looks good to me. You may need to send emails to some of the other maintainers. I only have +1 permissions so this is the best I can do for you. The 1.3.1 release is still pending with quite a few P1 issues that are taking most of the maintainers attention at this time so I don't know when they will have time to check your commit.","B"
"131","Patch Set 11: (1 comment) thanks for those new examples, but IMHO It would be nice to fix existing ones because this could add more confusion to developers examples/OCFSecure/README.txt Line 5: please trim EOL By the way you can use markdown format for writing doc","B"
"132","Patch Set 11: may I suggest to commit to master 1st and make sure .dat files are generated correctly using json scanner","B"
"133","Patch Set 11: is there a jira ticket for this code? We are so close to the release of 1.3.1 we should have all commited code documented with a jira ticket.","B"
"134","Patch Set 11: Becasue this is secure app, Security maintainer or submaintainer need to review the code at least. Randeep/Nathan could you check this code from security function view?","B"
"135","Patch Set 13: Code-Review-1 (1 comment) SConstruct Line 68: Should only build with security enabled is this the case ? seems not, jenkins should have fail ? So I am removing it from the next list: https://gerrit.iotivity.org/gerrit/#/q/status:open+project:iotivity+branch:1.3-rel+topic:next","B"
"136","Patch Set 13: Code-Review-1 (8 comments) examples/OCFSecure/SConscript Line 109: typo examples/OCFSecure/client.c Line 38: why do you need a new type instead of using OCMethod in the public octypes.h header? Line 48: don't use ALL CAPS for things that aren't const Line 136: space around = for consistency with above lines Line 223: please add [in] (or whatever is the intent) to all @param uses throughout Line 346: Stopping Line 369: @param[in] examples/OCFSecure/README.txt Line 111: don't mix tabs and spaces","B"
"137","Patch Set 11: > may I suggest to commit to master 1st and make sure .dat files are > generated correctly using json scanner Those .dat files are generated by the json2cbor tool in IoTivity/resources/csdk/security/tools is that what you meant by json scanner or is there a different tool named json scanner? Also, I used cbor.me to verify they were generated correctly and also made a python script that uses the python cbor API to convert cbor to json and json to cbor which I used to verify those files further.","B"
"138","Patch Set 11: > is there a jira ticket for this code? We are so close to the > release of 1.3.1 we should have all commited code documented with a > jira ticket. no but I just created a JIRA ticket (https://jira.iotivity.org/browse/IOT-2855)","B"
"139","Patch Set 11: Adding Steve Saunders... Steve can you please review? Main concern is no glaring security vulnerability or misleading configuration. Since it doesn't touch core security code, we just need to make sure we're not creating any confusion, and if not we can merge.","B"
"140","Patch Set 12: > Uploaded patch set 12. I rebased this on 1.3-rel and there was ""defined but not used"" warning so I decided to fix that compilation warning in this patch. This patch should be rebased on 1.3-rel without any issue. thanks, -Rami","B"
"141","Patch Set 13: > (6 comments) > > Looks good but please fix the server .json and .dat right away so > we can merge for 1.3.1. Done. fixed the server json and submitted patch 13 which passed Jenkins already.","B"
"142","Patch Set 13: -Code-Review RC5 is tagged, so I'm removing -2. PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","B"
"143","Patch Set 13: > RC5 is tagged, so I'm removing -2. PLEASE NOTE: We still need to > be very conservative with what we merge into 1.3-rel, so please > make sure you (or someone else) has run your patch against the CTT > to check for regressions before merging. Nathan, Currently, these applications are not certifiable and they fail CTT. However, they do not affect the regression testing as they are isolated in their own folder and do not change the source code at all in any way. They simply use the source code. I will eventually tackle those CTT failures in the near future as I intend to provide these applications as a baseline for those seeking to certify their applications. Is it a requirement for these sample application to pass all the tests in CTT in order for them to be merged into 1.3-rel branch?","B"
"144","Patch Set 13: To Rami's question: no these apps don't have to pass CTT; this is an example application and not part of certification testing.","B"
"145","Patch Set 11: Rami - I can submit this once you get Jenkins to pass...","B"
"146","Patch Set 11: Rick since the samples are security related I think we really should get feed back from at least one member of the security team before submitting this.","B"
"147","Patch Set 11: So if we want Nathan and/or Randeep to give this a +1 then I changed the tag to next so it will be highlighted","B"
"148","Patch Set 12: Rami, it looked to me like the CI build exited the build early to I told it to run again. This time everything passed as expected.","B"
"149","Patch Set 12: Code-Review-2 I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done. I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.","B"
"150","Patch Set 4: Code-Review-1 Giving -1 to avoid merging this patch temporarily till further instructions from release function lead.","B"
"151","Patch Set 4: Code-Review-1 (1 comment) resource/csdk/stack/include/ocpayload.h Line 111: bad grammar. Should be ""HasProp""","B"
"152","Patch Set 4: Code-Review-1 final Release candidate testing is in Progress on 1.3-rel branch. I am giving -1 time being to ensure we have no side effects from other patches","B"
"153","Patch Set 2: > not fan of changing style back and forth but It's reasonable for me I feel like I let the reformat tool dictate a little too much. I'm willing to roll back this part to how master looks currently, it's not a big deal to me (and I know helps with version diffs which is not insignificant)","B"
"154","Patch Set 2: Code-Review+1 not fan of changing style back and forth but It's reasonable for me","B"
"155","atch Set 2: (1 comment) The reason for these changes in 1.3-rel is IOT-2761. The patch is already submitted to master branch (patchset #22983). resource/csdk/security/src/credresource.c Line 3175: Just being redundant","B"
"156","Patch Set 1: Is this needed for 1.3.1? I think it is a risk patch in any case (even if all reviews change to +1) and would like to move to master unless there is an urgent need to include in 1.3.1 that I'm not aware of?","B"
"157","Patch Set 10: @Jong-Min I agree it would be good to have this patch in 1.3.1 because of the multiple CA issue. However I am not comfortable that I understand the parsing implications well enough... Kevin's -1 hasn't been removed yet (but I think Oleksii addressed his PEM/DER conversion comments). I'm on vacation right now so I don't have time to look into the changes deeply. @Kevin if you are okay with the change now that Oleksii has updated, and are ok removing your -1, let us know and I'll merge. Otherwise, maybe Randeep (maintainer) can take the time to look over this change carefully and merge if suitable.","B"
"158","Patch Set 1: Code-Review+1 ?TT and security system tests all pass.","B"
"159","Patch Set 10: This patch is needed to make it easier to run mfg OTM test. Without this patch you cannot have two different root CA certificates in SVR DB and expect both will be used in certificate verification. This means that when you run mfg OTM test, you need to be careful in how you create your SVR DB. For this reason, given that system TCs and CTT TCs pass with this patch, I think it's much better to merge this patch.","B"
"160","Patch Set 10: Code-Review-1 final Release candidate testing is in Progress on 1.3-rel branch. I am giving -1 time being to ensure we have no side effects from other patches","B"
"161","Patch Set 10: I'm dubious that this need to change the PEM/DER encoding code is necessary to make this work, but I'm not going to stand in the way of a fix that's needed.","B"
"162","Patch Set 2: Code-Review+1 Verified now working on x86_64 android emulator.","B"
"163","Patch Set 1: Code-Review+1
Bugfix which is acceptable for 1.2.1 release","B"
"164","Patch Set 1:
any reason things-manager is removed here?","B"
"165","Patch Set 1: Code-Review+1
fix script for Tizen on 1.2.1 release","B"
"166","Patch Set 1: Code-Review+1
I just rebased it on:
https://gerrit.iotivity.org/gerrit/#/c/13967/
(Which is based on:
https://gerrit.iotivity.org/gerrit/#/c/14285/
)
And will put verified if tested on my Tizen","B"
"167","Patch Set 4:
(1 comment)
resource/csdk/stack/src/oickeepalive.c
Line 112:
indent by one space

will this be portable ?","B"
"168","Patch Set 1:
Linux submaintainer (Phil) should approve","B"
"169","Patch Set 1: Code-Review+1
will double check on devices
","B"
"170","Patch Set 1:
Bugfix to resolve the gap from spec which is acceptable for 1.2.1 release.","B"
"171","Patch Set 2:
Oleksandr are you planning to cater review points dmitriy pointed ?","B"
"172","Patch Set 2:
both conventions are used so i am merging it.","B"
"173","Patch Set 1:
Hello Jeff,
cloud-interface branch has merged to master
and add IDE files to gitignore under cloud folder.
But I'm not sure about modifying root ignore file","B"
"174","Patch Set 5:
thx but it failed on tests Idont think it's related to change
https://build.iotivity.org/ci/job/iotivity-verify-unit_tests/6038/console
Try to retriger or rebase","B"
"175","Patch Set 4:
Gregg, please check the flows for Jenkins build error complains -
https://build.iotivity.org/ci/job/iotivity-merge-master-unit_tests/462/changes>
This was an error with Jenkins, not the build.","B"
"176","Patch Set 2:
(2 comments)
Please change commit message.
(svace -> static analysis)
resource/csdk/connectivity/src/ip_adapter/android/caifaddrs.c
Line 3:
How about 2016?
resource/csdk/connectivity/src/ip_adapter/android/caifaddrs.h
Line 3:
How about 2016?","B"
"177","Patch Set 1: Code-Review-1
(2 comments)
service/resource-container/SConscript
Line 116:
it is not needed only the sample and unit tests need the resource directory shared library.
tools/tizen/iotivity.spec
Line 301:
Better to name hosting, directory separately.","B"
"178","Patch Set 2: Code-Review-1
(1 comment)
service/resource-container/SConscript
Line 240:
this is not needed.","B"
"179","Patch Set 4:
(1 comment)
service/resource-container/SConscript
Line 240:
This will be not required after https://gerrit.iotivity.org/gerrit/#/c/14059/. Better to remove it","B"
"180","Patch Set 1:
(1 comment)
resource/csdk/stack/src/ocstack.c
Line 809:
Also I agree with Thiago's comment that ""Note: this commit will make clients not find old servers that did not listen on site-local.""   That also seems like another big problem with this change.","B"
"181","Patch Set 1:
Please make sure that this commit guarantee IoTivity 1.2.0 device discovery.","B"
"182","Patch Set 2:
Could you share jira about this patch?","B"
"183","Patch Set 2: Code-Review+1
Spec sync feature which does not cause backward compatilibty issue which is acceptable 1.2-rel.","B"
"184","Patch Set 4:
Don't merge this patch.
Need to verify this patch with jenkins.","B"
"185","Patch Set 4:
(1 comment)
src/structures/oc-dev-addr.cc
Line 33:
This rename cannot happen without also switching to 1.2.0.","B"
"186","Patch Set 1:
Please can you hit rebase button , as this change is still mergable
BTW, I am curious, you can also give detail on your scons version and  configuration in commit message.
Thanks","B"
"187","Patch Set 3: Code-Review-1
@Dave Thaler,
With https://gerrit.iotivity.org/gerrit/#/c/14263/, onborading is working fine.
But, other samples are still broken, because ""OCEncodeAddressForRFC6874"" is required before client start discovery.
Is it correct to require encoding by OCEncodeAddressForRFC6874 in all sample ?","B"
"188","Patch Set 4:
(1 comment)
resource/csdk/stack/src/ocstack.c
Line 969:
ok. I mean it seems look this paramter is needed to check negative number.","B"
"189","Patch Set 4: Code-Review+2 Verified+1
Do you need it merged on 1.2-rel?","B"
"190","Patch Set 5:
@ Uze
This commit need to cherry-pick to 1.2-rel.
But, can't cherry-pick to master because between of master and 1.2-rel has differences at tools/tizen/iotivity.spec.","B"
"191","Patch Set 5:
I'll merge it after it's deps are merged
To be tracked
https://gerrit.iotivity.org/gerrit/#/c/13983/","B"
"192","Patch Set 1: Code-Review+1
Fix the Gap from spec/project, need to be merged on 1.2-rel.","B"
"193","Patch Set 5: Code-Review+1
(1 comment)
cloud/samples/client/group_invite/group_light_share.cpp
Line 430:
commented code can be removed ?","B"
"194","Patch Set 5:
(1 comment)
cloud/samples/client/group_invite/group_light_share.cpp
Line 430:
This sample will be removed, because group_invite sample include this code.","B"
"195","Patch Set 5:
(1 comment)
cloud/samples/client/group_invite/group_light_share.cpp
Line 430:
if so, please remove this codes next patch","B"
"196","Patch Set 1: Code-Review+1
maybe a ref to spec version and chapter can be added in commit message","B"
"197","Patch Set 2:
waiting for Release Lead to give +1.","B"
"198","Patch Set 1:
To get the simpleserver/simpleclient to work, https://gerrit.iotivity.org/gerrit/#/c/14411/ is required","B"
"199","Patch Set 2: Code-Review+1
any improvement to reduce ifdef is welcome in upcoming patches","B"
"200","Patch Set 3: Code-Review+1
(1 comment)
resource/csdk/security/src/credresource.c
Line 1202:
@todo?","B"
"201","Patch Set 5: Code-Review+1
(1 comment)
resource/csdk/security/src/credresource.c
Line 1322:
Is it worth adding #pragma warning(push)/#pragma warning(pop) around the problematic code?","B"
"202","Patch Set 5: Code-Review+2
(1 comment)
resource/csdk/security/src/credresource.c
Line 1322:
suppress already is scoped to a single line.  See https://msdn.microsoft.com/en-us/library/2c8f766e.aspx","B"
"203","Patch Set 2: Code-Review-1
(5 comments)
resource/csdk/security/provisioning/include/oxm/oxmmanufacturercert.h
Line 22:
Spelling: MANUFACTURER
Line 55:
Spelling: cborPayload
resource/csdk/security/provisioning/src/oxmmanufacturercert.cLine 114:Use of this ciphersuite and RSA subject public keys in certificates is not compliant with the security spec. Permitted ciphersuites and credential types are listed in section 7.3.6 which defines the manufacturer certificate based OTM.
Line 115:
There's an BEDTLS_TLS_RSA_WITH_AES_256_CBC_SHA defined constant for this instead of a magic number.
resource/csdk/security/src/doxmresource.c
Line 1243:
Nit: Extra pair of parentheses around this expression","B"
"204","Patch Set 6:
(4 comments)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 365:
remove tab.
resource/csdk/security/provisioning/src/oxmmanufacturercert.c
Line 46:
for consistency please add space after if
Line 58:
for consistency please add space after if
resource/csdk/security/src/doxmresource.c
Line 1329:
space missing","B"
"205","Patch Set 7: Code-Review+1
missed part on 1.2.0 release which is acceptable for 1.2.1 release.","B"
"206","Patch Set 3:
Android submaintainer (Rick) should review.","B"
"207","Patch Set 4:
SimpleServer/SimpleClient work on arm device (Nexus 9).","B"
"208","Patch Set 1: Code-Review+1
Onborading is working fine when cherry-pick this patch and https://gerrit.iotivity.org/gerrit/#/c/14411.","B"
"209","Patch Set 2: Code-Review+1
Waiting for Dave to confirm the changes as no modifications at windows port ..","B"
"210","Patch Set 2: Code-Review+1
no changes needed for windows","B"
"211","Patch Set 1: Code-Review-1
(1 comment)
resource/c_common/oic_malloc/src/oic_malloc.c
Line 27:
I believe you need
#include ""iotivity_config.h""
at the top or this won't be defined and you'll compile the non-windows code on windows.
That's why you see that include at the top of 
resource\c_common\ocrandom\src\ocrandom.c for example","B"
"212","Patch Set 3: Code-Review+1
Kevin, consider adding a reference to
https://www.securecoding.cert.org/confluence/display/c/MSC06-C.+Beware+of+compiler+optimizations
in a comment in the implementation or documentation of OICClearMemory.","B"
"213","Patch Set 3:
(1 comment)
resource/c_common/oic_malloc/include/oic_malloc.h
Line 124:
please remove trailing whitespace","B"
"214","Patch Set 6:
@Kevin Kane,
With this patch, security (onborading) is not work, because DTLS handshark is failed due to ""Bad Recode MAC"" during Ownership Transfer.
Could you check this issue as following steps.
1. git checkout 916ced6413b93c3c4448fb4124be429c0f13bb82 (this patch)on 1.2-rel branch.
2. cherry-pick https://gerrit.iotivity.org/gerrit/#/c/14411 to resolve other issue.
3. Build with scons SECURED=1 WITH_TCP=1 WITH_CLOUD=1 RELEASE=0
4. run sampleserver_justworks on ../out/linux/x86_64/debug/resource/csdk/security/provisioning/sample$
5. run provisioningclient on ../out/linux/x86_64/release/resource/csdk/security/provisioning/sample$
   Input 11 on provisioningclient for Discover Only Unowned Devices on Network
   Input 20 on provisioningclient for Register/Own All Discovered Unowned Devices","B"
"215","Patch Set 1:
Phil, Tizen already have the sqlite then do you still need to download it for Tizen platform case?","B"
"216","Patch Set 1: Code-Review+2 Verified+1
Sorry. Tizen is excluded from upper condition checking logic.","B"
"217","Patch Set 1: -Code-Review -Verified
Dave do you mean rebase after 14073 patch merge?","B"
"218","Patch Set 1:
@Uze, I'm just referring to gerrit reporting ""Cannot Merge"" which I always interpret to mean that it needs a manual merge via a rebase","B"
"219","Patch Set 2:
Do we need Broker mode on Notification service?","B"
"220","Patch Set 2:
Then why do we have it on the script?","B"
"221","Patch Set 2:
For which case it could be used?","B"
"222","Patch Set 2:
Could you describe what you did in overall?","B"
"223","Patch Set 4:
Abitha,
Patch set 4 is included changing of https://gerrit.iotivity.org/gerrit/#/c/13841/, is it?
If it is, I will abandon my commit.
Change commit title it is for also consumer, right?","B"
"224","Patch Set 5:
(1 comment)
This is initial code for MQ support in provide an I right?
service/notification/src/provider/NSProviderNotification.c
Line 80:
This function is for each message send, callback is set for each message?
I expected that single callback is set when we initialize to use some topic.","B"
"225","Patch Set 5:
(1 comment)
Better name looks required for following Callback scheme.
MQPublishTopic (... MQPublishTopicCB)
MQsubscription (...NSProviderIntrospectMQTopic)
MQPublishTopicCB -> MQPublishTopicResponseCB
NSProviderIntrospectMQTopic name looks somewhat strange as I mentioned inline.
service/notification/src/provider/NSProviderListener.c
Line 397:
This function is called whenever topic is updated, but why name is introspection?
introspection usually means my intentional lookup.","B"
"226","Patch Set 5: Code-Review+2 Verified+1
please consider sub result via online later.
clean up the address related struct and data with consistnecy if possible also later.","B"
"227","Patch Set 2:
(1 comment)
resource/csdk/security/src/credresource.c
Line 1556:
Invalid memory accessibility.
Please take a consistent approach to memory access.
if (memcmp(&newCred->rownerID, &emptyOwner, sizeof(OicUuid_t)) != 0)
or
if (memcmp(newCred->rownerID.id, emptyOwner.id, sizeof(emptyOwner.id)) != 0)","B"
"228","Patch Set 2:
(1 comment)
resource/provisioning/examples/provisioningclient.cpp
Line 824:
it could be ""error while allocating memory""","B"
"229","Patch Set 2:
(2 comments)
resource/csdk/connectivity/src/ip_adapter/caipserver.c
Line 236:
i can see same functionality after the change as well . what is added here ?
resource/csdk/connectivity/src/tcp_adapter/catcpserver.c
Line 275:
I did not find anything new from previous code. It does the same log messages","B"
"230","Patch Set 2:
Please describe this feature and how it work overall.
From user perspective should we call mq-sub API additionally.
Hiw it will change message handling sequence?","B"
"231","Patch Set 1: Code-Review+1
(1 comment)
resource/csdk/connectivity/src/ip_adapter/caipserver.c
Line 1117:
Yeah, it's set here anyway.","B"
"232","Patch Set 1: Code-Review+1
Bug fix. it's acceptable on 1.2-rel.","B"
"233","Patch Set 2: Code-Review+1
simpleserver/simpleclient now working as expected.","B"
"234","Patch Set 1: Code-Review+1
(1 comment)
resource/csdk/connectivity/src/ip_adapter/caipserver.c
Line 1117:
Yeah, it's set here anyway.","B"
"235","Patch Set 1: Code-Review+1
Bug fix. it's acceptable on 1.2-rel.","B"
"236","Patch Set 2: Code-Review+1
simpleserver/simpleclient now working as expected.","B"
"237","Patch Set 13: Code-Review-1
(9 comments)
resource/csdk/connectivity/src/ip_adapter/android/caipnwmonitor.c
Line 208:
a different name would be better since this is not calling getaddrinfo()
resource/csdk/connectivity/src/ip_adapter/android/ifaddrs.c
Line 47:
move to start of new line
Line 55:
space before (
Line 84:
space after ;
Line 97:
space
Line 126:
space after ==
Line 195:
move space to before (
resource/csdk/connectivity/src/ip_adapter/android/ifaddrs.h
Line 26:
use spaces not tabs
Line 36:
why not use CAResult_t instead of int as the return type?","B"
"238","Patch Set 14: Code-Review-1
needs a rebase.  Also one recommended rename still pending.","B"
"239","Patch Set 17: Code-Review+1
I have no comments, but Rick Bell should review and approve as android sub-maintainer","B"
"240","Patch Set 17: Code-Review-1
We like to build this and test before we approved it. How did you test this so we can confirm it?","B"
"241","Patch Set 17: Code-Review-1
Did you try this on an android device?  The android/examples simpleserver/simpleclient apps did not work on a nexus 9.","B"
"242","Patch Set 20:
Android examples SimpleServer/SimpleClient work on arm, but cause a crash on x86_64","B"
"243","Patch Set 2: -Code-Review
let's wait for the other one to be merged","B"
"244","Patch Set 5: Code-Review+1
(1 comment)
gbsbuild.sh
Line 94:
maybe test script before running it","B"
"245","Patch Set 6:
I'm sorry I didn't get to this one in time.
Is there a reason why we can't just remove the ""*"" ACE for the other SVRs instead of hard-coding the requirement to connect over CoAPS?  Is there a use model that requires ""*"" ACE for /cred or /acl, but only via authenticated access?","B"
"246","Patch Set 3:
This commit seems to break the linux examples simpleserver/simpleclient.
The client only displays this:

Finding Resource... 
Finding Resource for second time...
0: listenCallback(): failed to create resource. clientResponse: 33
0: listenCallback(): failed to create resource. clientResponse: 33
0: listenCallback(): failed to create resource. clientResponse: 33
0: listenCallback(): failed to create resource. clientResponse: 33","B"
"247","Patch Set 3:
The subsequent patches noted in https://jira.iotivity.org/browse/IOT-1134 fix the problem noted above.","B"
"248","Patch Set 3:
Thanks larry for the notification. please comment
https://jira.iotivity.org/browse/IOT-1134
Maybe this change can be reverted, until author fix it ?","B"
"249","Patch Set 1:
(1 comment)
Commit Message
Line 7:
IoTivity seems to use the [IOT-XXXX] style for tagging JIRA tickets. Not sure if it matters for any automation.","B"
"250","Abandoned
The patch will be implemented in https://gerrit.iotivity.org/gerrit/#/c/14409/","B"
"251","Patch Set 1:
@ Habib
When stack received request of discovery with if is null and rt is not null, stack has occurred crashing at ocresource.c:808(strcmp).
because try to string compare with null pointer(interfaceQuery is null).","B"
"252","Patch Set 3:
(1 comment)
resource/csdk/stack/src/ocresource.c
Line 839:
Same test twice?","B"
"253","Patch Set 1:
Dear Dmitriy,
Could you please cherry-pick this to 1.2-rel branch?
Dear Randeep,
I think this patch should be applied for 1.2.1 release.","B"
"254","Patch Set 1: -Code-Review
Dear Dmytro,
please insert the related jira information [IOT-1549] to the patchset title.","B"
"255","Patch Set 1:
Dear Mr.Uze Choi,
This patch is a patch for improving the reliability of the DTLS handshake w/ mbedTLS.
I'm eager to include this patch for 1.2.1 release.
This patch is very important in security perspective.","B"
"256","Patch Set 2:
Looks fine from a platform support perspective.  Connectivity maintainer should also approve.","B"
"257","Patch Set 4: Code-Review+1
Looks ok to me, but as there is linux/tizen/android specific code, Phil and Rick should also review the respective platform-specific code.","B"
"258","Patch Set 1: reverify","C"
"259","Patch Set 27: Code-Review+1 looks good","C"
"260","Patch Set 4: Yea I noticed you did the merge afterwards, yours can go in I gave +1 about the difference I just assumed it was better but I actually don't know","C"
"261","Patch Set 10: (1 comment) resource/csdk/connectivity/common/src/parsechain.c Line 3: 2017?","C"
"262","Patch Set 1: Code-Review+1
@uze do you confirm ?","C"
"263","Patch Set 3: Code-Review+1
(1 comment)
resource/csdk/connectivity/src/ip_adapter/caipserver.c
Line 221:
nicer","C"
"264","Patch Set 4:
(2 comments)
resource/c_common/windows/test/snprintf_test.cpp
Line 68:
it's not
Line 104:
a big deal but..","C"
"265","Patch Set 5: Code-Review+1","C"
"266","Removed the following approvals:
Code-Review+1 by Ravi Nanjundappa <nravi.n@samsung.com>","C"
"267","Patch Set 5:
Hopefully my patch will be merged today and this issue will be fixed.","C"
"268","Patch Set 1:
Seems OK but I am not a Network guru like thiago,
please confirm with extra CR","C"
"269","Patch Set 1:
Per OCF meeting this should be updated to keep the caipserver.c change and remove the ocstack.c change","C"
"270","Patch Set 4:
(1 comment)
resource/csdk/stack/src/ocstack.c
Line 969:
ok","C"
"271","Patch Set 5:
(1 comment)
cloud/samples/client/group_invite/group_light_share.cpp
Line 430:
As seungho is in charge of this sample app, he will make another patch that handles it.","C"
"272","Patch Set 2: Code-Review+1
Bug fix like patch.","C"
"273","Patch Set 1: Code-Review+1
Ashok/Ziran, Are you person who can merge?","C"
"274","Patch Set 1:
simpleserver/simpleclient on linux still do not work for me.  Can someone else just run these examples?","C"
"275","Patch Set 1: Code-Review+1
have not verified the fix, but the code change looks ok","C"
"276","Patch Set 2:
Require Release Management Lead to give +1 as per new policy","C"
"301","Patch Set 1: Code-Review+1

(11 comments)

Overall change looks good. . I only have minor comments about formatting. 
This has been verified with CTT run so we should be okay to merge this. 

@Uze, Abitha: please review this to be included in RC6 tagging.
service/easy-setup/enrollee/src/resourcehandler.c
Line 837: formatting .. space after if clause
Line 839: change log tag to error or info ?
Line 873: there should be space after if
Line 908: same comment about formatting.
Line 974: same comment about formatting.
Line 1010: there should be space after ""if""
Line 1045: same comment about formatting.
Line 1070: same comment about formatting.
Line 1106: same comment about formatting.
Line 1141: same comment about formatting.
Line 1328: same comment about formatting.
","A"
"302","Patch Set 2:

Comment from this patch and code change cannot be understood to me. Please include how do you resolve which issue from tevhnival view.","C"
"303","Patch Set 2: Code-Review+1

looks good.. verified through CTT run for WES.","B"
"304","Patch Set 10:

@Jong-Min I agree it would be good to have this patch in 1.3.1 because of the multiple CA issue.  However I am not comfortable that I understand the parsing implications well enough... Kevin's -1 hasn't been removed yet (but I think Oleksii addressed his PEM/DER conversion comments).  I'm on vacation right now so I don't have time to look into the changes deeply.

@Kevin if you are okay with the change now that Oleksii has updated, and are ok removing your -1, let us know and I'll merge.

Otherwise, maybe Randeep (maintainer) can take the time to look over this change carefully and merge if suitable.","B"
"305","Patch Set 10:

This patch is needed to make it easier to run mfg OTM test. Without this patch you cannot have two different root CA certificates in SVR DB and expect both will be used in certificate verification. This means that when you run mfg OTM test, you need to be careful in how you create your SVR DB.
For this reason, given that system TCs and CTT TCs pass with this patch, I think it's much better to merge this patch.","B"
"306","Patch Set 1:

Is this needed for 1.3.1? I think it is a risk patch in any case (even if all reviews change to +1) and would like to move to master unless there is an urgent need to include in 1.3.1 that I'm not aware of?","B"
"307","Patch Set 1: Code-Review+1

?TT and security system tests all pass.","C"
"308","Patch Set 1: Code-Review-1

(2 comments)

A lot of this code appears to be the PEM/DER work from 22983. At the time I recall we decided this work should go into master, not 1.3-rel. What is the justification for bringing this work in now?

If this work will come in with this change, then as I note in the commit message, it needs to reflect this as well. The now-reverted change that introduced this code did not mention at all the PEM/DER conversion changes that were also in that work.
/COMMIT_MSG
Line 9: Please expand the commit comment to fully describe the work being done in this change. Although here and now as we're reviewing the code we know what these changes mean, for the benefit of other people looking at the code history in the future, give a description here that stands on its own.

resource/csdk/security/src/credresource.c
Line 3175: What warning is being suppressed by this cast, by the way? Signed/unsigned comparison?
","A"
"309","Patch Set 1: Code-Review+1","C"
"310","Patch Set 2:

Phil I think this commit does almost all the same commits in this merge.  https://gerrit.iotivity.org/gerrit/#/c/22723/3","B"
"311","Patch Set 4:

(1 comment)
resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcommon.c
Line 151: interesting I resolved this commit using the opposite option: https://gerrit.iotivity.org/gerrit/#/c/23001/1/resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcommon.c

I am not sure which it the correct resolution.
","B"
"312","Patch Set 4:

I updated my merge to use the same merge conflict resolution you used for scrdbeditorcommon.c after looking into the change. I would have missed this if you hadn't done this merge so thank you. :)","B"
"313","Patch Set 4:

I will do a quick investigation on the resolved conflict that we have different. Sorry I caused any confusion by doing the merge. I sent you an email after I did that merge. I did it to make sure we didn't get build issues after the introduction of the -Werror build flag.","B"
"314","Patch Set 5:

> Is this the same intermittent error reported here?
 > https://jira.iotivity.org/browse/IOT-2848

UpdateSpecVersionOfDevice - yes that looks like the same one.","B"
"315","Patch Set 5:

Is this the same intermittent error reported here? https://jira.iotivity.org/browse/IOT-2848","B"
"316","Patch Set 5:

reverify

:: this is that invalid read again (valgrind)... seems like sometimes it passes on retry, but also looks like a real error, we should find. https://build.iotivity.org/ci/job/iotivity-verify-unit_tests/19688/valgrindResult/pid=29046","B"
"317","Patch Set 5:

unit-tests/19706 was the same failure.  Looks like we are going to have to fix this one somehow.","B"
"318","Patch Set 5: Code-Review+1","C"
"319","Patch Set 6: Code-Review+1","C"
"320","Patch Set 7: Code-Review+1","C"
"321","Patch Set 8: Code-Review+1","C"
"322","Patch Set 9: Code-Review+1","C"
"323","Patch Set 4: Code-Review+1","C"
"324","Change has been successfully merged by Ashok Babu Channa","B"
"325","Patch Set 1:

(4 comments)
resource/csdk/connectivity/src/ws_adapter/cawsadapter_lwsimpl.c
Line 105: Protocol list to be set to lws service.

resource/csdk/connectivity/src/ws_adapter/cawsutil.h
Line 88: Add single line comment for member fields.
Refer doxygen guideline for syntax for adding comments for member fields.
Line 94: use single line separation between API description and parameters list.
Line 96: use single line separation between parameters list and return description.
","A"
"326","Patch Set 2:

(17 comments)
resource/csdk/connectivity/src/ws_adapter/cawsutil.h
Line 45: We need not to mention ""Pointer"".
""Buffer that holds the data"" is fine. what you say?

NOTE: This is my same opinion on other places where you have used word ""Pointer""
Line 54: ""Data to be send"" is sufficient
Line 64: Make it upper case
Line 65: Make it upper case
Line 77: ""this"" is not required
Line 88: this is not required
Line 95: Buffer holding the data
Line 98: is not required. Same opinion in other place of its same usage.
Line 110: ""Add"". Address in a way what user can do with this API, not from the way what API does for user. I this API description becomes -> ""Add the WS data to the list""
Line 120: Remove
Line 129: Destroy
Line 136: Destroy
Line 143: Add
Line 153: Remove
Line 165: Find connection in connection information list based on endpoint.
Line 175: Destroy
Line 188: Return is missing
","A"
"327","Patch Set 4: Code-Review+2","C"
"328","Uploaded patch set 3.","C"
"329","Uploaded patch set 4.","C"
"330","Change has been successfully rebased as 61275e23af4065eb622530c5946355649639d21d by Randeep Singh","C"
"331","Patch Set 2: Code-Review+1","C"
"332","Patch Set 2: Code-Review+2","C"
"333","Patch Set 3: Patch Set 2 was rebased","C"
"334","Change has been successfully rebased as 8d9a0c446d7f9eed42527e90eecf5e58f6a5f1ec by Randeep Singh","C"
"335","Patch Set 5:

(5 comments)

Please read the Jongmin's comment in https://jira.iotivity.org/browse/IOT-2883.

There was a cred patch in master branch which is not merged in 1.3rel
resource/csdk/security/tool/svrdbeditor_src/svrdbeditorpstat.c
Line 36: It seems unnecessary
Line 70: It seems unnecessary

resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcred.c
Line 540: InputCredentialData doesn't work after modifying codes as below.

resource/csdk/security/tool/svrdbeditor_src/svrdbeditor.c
Line 38: It seems unnecessary
Line 102: I think InitPstatResourceToDefault() is needed here to initialize gPstat in pstatresource.c

Though RefreshPstat internally calls CBORPayloadToPstatBin initializing gPstat with Default pstat, explicit initialization seems to be better.

Also, DeInitPstatResource would be necessary before program exits.
","A"
"336","Patch Set 5:

reverify","C"
"337","Patch Set 6: Code-Review+1

Please cherry pick or merge below two commits from master to 1.3-rel.

Otherwise, trustCA cred will be included in the optionalData instread of publicData then it works wrong

https://gerrit.iotivity.org/gerrit/#/c/22357/
https://gerrit.iotivity.org/gerrit/#/c/22541/","B"
"338","Patch Set 7: Code-Review+2","C"
"339","Patch Set 8: Patch Set 7 was rebased","C"
"340","Patch Set 2:

how can it be for f24 when the change is in the tizen specfile?","B"
"341","Patch Set 2:

(6 comments)

can be improved
/COMMIT_MSG
Line 7: typo
Line 7: s
Line 15: you can replace this by Bug: in next lines

this way bugs can be tracked between projects

service/scene-manager/sampleapp/linux/fanserver.cpp
Line 107: ^

service/scene-manager/sampleapp/linux/lightserver.cpp
Line 111: not needed as namspace is used
Line 170: first before test ?
","A"
"342","Patch Set 3:

(5 comments)
/COMMIT_MSG
Line 7: only one l
Line 17: just remove previous newline you need this :

#  ...
#  ... have done.
#
#  Bug: ...
#  Change-Id: ...
# ...

service/scene-manager/sampleapp/linux/fanserver.cpp
Line 107: extra space
Line 111: std:: is not needed
Line 124: cerr might be better ?
","A"
"343","Patch Set 5: -Code-Review","C"
"344","Patch Set 5: Code-Review+2","C"
"345","Patch Set 5: Code-Review-1

As discussed in the currence code it swaps PUT and POST functionality. The change needed is to swap this functionality.","B"
"346","Patch Set 5: Code-Review-1

No, i still think example are showing vice-versa. You should be creating a resource in PUT from a request coming in and in POST you should be updating as PUT is doing.

Please note creating a resource in POST is not the issue, but example are showing POST creating a resource which is not right.","B"
"347","Patch Set 6: Patch Set 5 was rebased","C"
"348","Patch Set 7:

(1 comment)
service/scene-manager/sampleapp/linux/lightserver.cpp
Line 111: shouldn't it be /a/light/1 here ?
","B"
"349","Patch Set 7: Patch Set 6 was rebased","C"
"350","Topic set to scene-manager","C"
"351","Uploaded patch set 8.","C"
"352","Patch Set 1: Code-Review-1","C"
"353","Patch Set 4:

(1 comment)
auto_build.py
Line 420: you actually want to build twice?
","A"
"354","Abandoned","C"
"355","Patch Set 10: Patch Set 9 was rebased","C"
"356","Patch Set 11: Patch Set 10 was rebased","C"
"357","Patch Set 12: Patch Set 11 was rebased","C"
"358","Patch Set 13: Patch Set 12 was rebased","C"
"359","Patch Set 14: Code-Review-1

Please confirm it is still valid, because it's an old change","A"
"360","Patch Set 14: Patch Set 13 was rebased","C"
"361","Patch Set 1:

Actually it's not needed because it was applied by different change(s)

This one at least:

https://gerrit.iotivity.org/gerrit/#/c/11969/8/resource/csdk/stack/src/ocstack.c","B"
"362","Patch Set 1:

Are you sure?

It may relates to:

https://jira.iotivity.org/browse/IOT-1684","B"
"363","Patch Set 1:

you're right, it's not needed and been changed by:

OCStackResult result = CAResultToOCResult(
            CAUnregisterNetworkMonitorHandler","B"
"364","Patch Set 1: -Code-Review

Please check nothing is lost in master branch","B"
"365","Patch Set 1: Code-Review-2","C"
"366","Patch Set 2:

Maybe that change was introduced by other patch:

resource/csdk/connectivity/util/src/cautilinterface.c:46:12: error: redefinition of 'CAUnregisterNetworkMonitorHandler'
resource/csdk/connectivity/util/src/cautilinterface.c:38:12: note: previous definition of 'CAUnregisterNetworkMonitorHandler' was here","B"
"367","Patch Set 2:

So may it be abandoned ?","C"
"368","Patch Set 2: Patch Set 1 was rebased","C"
"369","Patch Set 4: Patch Set 3 was rebased","C"
"370","Patch Set 5: Patch Set 4 was rebased","C"
"371","Patch Set 9: Patch Set 8 was rebased","C"
"372","Restored","C"
"373","Topic set to mergeback","C"
"374","Patch Set 1:

Is this ""change"" still valid ?

Please rebase or abandon","B"
"375","Patch Set 2: Code-Review-1

(1 comment)
resource/provisioning/examples/cloudWrapper.cpp
Line 268: please fix indentation, and use oic_malloc function OICFree
","A"
"376","Patch Set 4:

(1 comment)
resource/csdk/security/provisioning/sample/cloud/cloudWrapper.c
Line 309: fix style
","C"
"377","Patch Set 4:

(1 comment)
resource/provisioning/examples/cloudWrapper.cpp
Line 265: please fix style
","A"
"378","Patch Set 6: Published edit on patch set 5.","C"
"379","Patch Set 7: Code-Review-1

Please update with OICFree like I just edited","B"
"380","Patch Set 7: Published edit on patch set 6.","C"
"381","Patch Set 8: Code-Review+1

maybe we dont want to use OIC funct in examples","B"
"382","Topic set to provisioning","C"
"383","Uploaded patch set 5.","C"
"384","Patch Set 1:

(1 comment)

Why not pull it using scriptlet like extlibs/scons/prep.sh ?

or it wont work for windows, but we can put it there too
/COMMIT_MSG
Line 17: Bug: https://jira.iotivity.org/browse/IOT-2668
","A"
"385","Patch Set 3:

Please try:

 ./scons-local/scons.py --prefix=/tmp/

 ./scons-local/scons.py --prefix=/tmp/ --install-sandbox=/tmp/sandbox install

scons: *** [out/linux/x86_64/release/liblogger.a] AttributeError : 'FileBuildInfo' object has no attribute 'result'


Is what I am also facing since scons-2.3.0-2","A"
"386","Change has been successfully rebased as 924f632d0af575193899b872ecddfd0459a8f49a by Mats Wichmann","C"
"387","Change has been successfully rebased as 8d2ba2779f274dff1c0a591c752b7e1dd6088bd7 by Towhidul Islam","C"
"388","Patch Set 1: Code-Review+2","C"
"389","Change has been successfully rebased as 9c17a2853b24e363532c072ad4ec6f15bbb1d378 by Ziran Sun","C"
"390","Patch Set 3: Code-Review+1","C"
"391","Change has been successfully rebased as 56ce7b649cdbf2618915d3ff3e3ced376464e343 by Ziran Sun","C"
"392","Patch Set 3: Code-Review+2","C"
"393","Topic set to connectivity","C"
"394","Patch Set 10:

reverify","C"
"395","Patch Set 10: Code-Review+1","C"
"396","Patch Set 10: Code-Review-1

(3 comments)

could be improved
service/resource-container/examples/HueSampleBundle/src/HueLight.cpp
Line 24: <cstdlib> in C++
Line 77: please align style
Line 80: could use tri state too
","A"
"397","Patch Set 9:

pick to 1.3-rel once merged","B"
"398","Patch Set 9: Code-Review+1

(4 comments)
service/resource-container/examples/HueSampleBundle/src/HueLight.cpp
Line 24: cst
Line 24: <cstdlib> for c++
Line 77: if (1 == val)
Line 80: could use ? operator
","A"
"399","Topic set to resource-container","C"
"400","Change has been successfully rebased as c2fd6061fa443d10929a007ff3b79c3de07ec187 by Phil Coval","C"
"401","Patch Set 1:

I don't see a problem adding this. Assuming we have a version of the linker that the --as-needed flag works as expected. In early versions there were some problems when using the --as-needed flag. It looks like it works with 4.9 and on word.  I think 4.9 is the oldest version of gcc we are using.","B"
"402","Patch Set 1:

reverify","C"
"403","Patch Set 2:

The CI server failed to unpack the Android NDK for some reason.","B"
"404","Patch Set 5: Code-Review+2

Bug: https://jira.iotivity.org/browse/IOT-2354","A"
"405","Change has been successfully rebased as 3b21b046acde14143db2b08dcefbcad1c43fe135 by Nathan Heldt-Sheller","C"
"406","Patch Set 3:

(1 comment)
resource/csdk/security/provisioning/src/oxmpreconfpin.c
Line 110: Ok. In that case I would prefer a != NOT_ENOUGH_BUFFER check to make sure nothing other than the expected is returned.

I shall await your next patch set.
","B"
"407","Patch Set 3:

(2 comments)

> (6 comments)
 > 
 > Keven most of the places that you want me to check for errors no
 > errors will be returned so there is nothing to check for.
 > 
 > There are definitally a few errors that you found that I will
 > address. thanks.

I'm suspicious of this reasoning, especially since this is improvement work targeted at master. If the sheer volume of work to handle errors in some sensible way is so large it's not worth doing, that may be an acceptable argument, but correcting IoTivity's repeated failure to properly check and handle error conditions properly should be a long-term improvement goal in this codebase.
resource/csdk/security/provisioning/src/oxmpreconfpin.c
Line 110: I again seek a compelling reason not to check != 0 to protect against future changes in mbedTLS that might result in other error codes being returned.

resource/csdk/security/provisioning/src/multipleownershiptransfermanager.c
Line 884: Telling me the function you're replacing/improvement did something unwise does not justify doing something unwise. You're seeking to improve this code, so let's improve it. This code is going to master so we should take the time to do things properly. IoTivity's habitual ignoring of error return values is not a model to be emulated.

The API documentation does say it will return zero or this error, but is there a compelling reason not to have your implementation simply compare != 0 in case this ever changes in the future? What benefit is there to checking only this one error code when checking against zero would seem to accomplish the same plus make the code more robust against future API contract changes?
","A"
"408","Patch Set 3: Code-Review-1

(8 comments)
resource/csdk/security/src/credresource.c
Line 2040: Where is b64res even set?
Line 2122: Do not call a function inside a success verification macro like this. This is a terrible practice because it's just asking for multiple evaluation problems, even if the macro doesn't currently do it now. Call the function, assign its return value to a variable, and check it with a boolean expression in the macro.

resource/csdk/security/provisioning/src/oxmpreconfpin.c
Line 110: Nit: extraneous space
Line 110: You should also have a clause to catch any other error that might arise since presumably they're all fatal.

These issues exist in multiple files. Please survey this and correct them all.

java/jni/JniSecureUtils.cpp
Line 115: Should check for possible failure to allocate memory and try to do something sensible.
Line 118: Is changing b64Encode and b64Decode internally to call mbedTLS not feasible for some reason?

/COMMIT_MSG
Line 17: Nit: IoTivity's

resource/csdk/security/provisioning/src/multipleownershiptransfermanager.c
Line 884: If you're going to go to this trouble, check the return values here and everywhere else for success and bail on error.

You've got this issue across several files, so please survey and correct them all.
","A"
"409","Patch Set 4:

(1 comment)
java/jni/JniSecureUtils.cpp
Line 109: I prefer removing it, in that case.
","B"
"410","Patch Set 4: Code-Review-1

(2 comments)
java/jni/JniSecureUtils.cpp
Line 109: Does this code actually get called from anywhere? I was looking for callers to see what the contract might be, to see if we could change it to surface an error condition somehow rather than just returning an empty string, and I can't find any. Is this dead code we can just clip out?
Line 133: Need to free base64Buff on this error path.
","A"
"411","Patch Set 8:

@George: the ""regression test"" (offically run by GRL) hasn't been defined yet but that's something I really want to get going before EOY.  In the meantime, it'd be a good idea for high-touch patches to run the CTT 1.5.30 (or later) against the HEAD + branch before merging.  If you haven't done that yet it's pretty easy once you've got it set up but that can be a hassle.  Contact me via email if you haven't run CTT before, and want to try it out... I can probably save you time, at least with the security tests (which is actually all I run, myself, counting on GRL/Antu to run the rest).","A"
"412","Patch Set 8:

Any chance this was regression tested using CTT?","C"
"413","Patch Set 8:

Happy to do that!  There's no wiki as far as I know, though there maybe should be.  The short version is that I run the sampleserver_justworks app as the Server (a.k.a. Implementation Under Test ""IUT"") and then run the CTT against it.  However there are some config steps that need documenting.

Since this is against master, it's not as critical to run the regression prior to merging (other patches aren't).  I'll spend a few mins writing up a wiki and running a test against this patch (merged) when I'm back in the office next week.","B"
"414","Patch Set 8: Code-Review+2","C"
"415","Patch Set 3:

(1 comment)
service/coap-http-proxy/SConscript
Line 99: I somehow missed that discussion, but I have catched up on it now from the archive.

I also prefer shared libs, mostly because I'm used to it and it's the preferred way in Linux and Yocto.
","A"
"416","Patch Set 3:

(1 comment)
service/coap-http-proxy/SConscript
Line 99: I think the main thing is it's not a scenario where we're going to expect a lot of sharing... I'd expect most  devices won't have multiple instances of the stack. I have no skin in the product game here so happy to along with whatever the team thinks is best.
","B"
"417","Patch Set 3:

(1 comment)
service/coap-http-proxy/SConscript
Line 99: Seems like discussion some months ago was suggesting to move away from shared libs. So some justification might be useful here.
","A"
"418","Patch Set 3:

Windows is typically the target that has more difficulty.  You must add a *.def file to export functions to a dll or you have to add dll export to the code.

For C code like coap-http-proxy this is not generally a hard thing to do, make a *.def file. For C++ it is harder because of the function decorations added by the compiler means you can not add a *.def file and must add dllexport to the code. For that reason none of the C++ code is compiled to a dll yet.  This has actually caused some major problems getting the java language bindings to work for windows.

We have to have a shared library for all the platforms or statically link for all the platforms. At least when doing Java via JNI.","A"
"419","Change has been successfully merged by Mats Wichmann","B"
"420","Patch Set 3: Code-Review-2

I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done.  I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.

IF THIS IS CAUSING A CERT FAILURE or CRITICAL SECURITY ISSUE please comment as such so I can remove -2.","A"
"421","Patch Set 4: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","A"
"422","Change has been successfully rebased as 465882626bd565a5ed1660735795d6d6568ed3d5 by Uze Choi","C"
"423","Patch Set 1:

(1 comment)
service/easy-setup/enrollee/src/resourcehandler.c
Line 338: Yes.. this code enables non-secure resource in secure build. I am not sure exact use case as this code has been here from long time and I don't know all the history, but it may be for development and debugging purpose. Easy Setup API provides an option for application to decide whether or not it wants to create a secure or non-secure resource irrespective of build option. If the resource is created non secure, it will be possible to do a GET / POST on it without doing ownership transfer i guess (assuming correct ACLs are in place) (?)
","B"
"424","Patch Set 1:

@Uze, can we merge this issue ? its needed to fix a CTT failure.","C"
"425","Patch Set 1: Code-Review+1

Looks good.. as Dev Conf is read-only resource, it should be okay to make it non observable.","B"
"426","Patch Set 1: Code-Review+2 Verified+1

(1 comment)

Please check my comment. if needed ou can change the code after this code merge.
service/easy-setup/enrollee/src/resourcehandler.c
Line 338: why do we separate the code with secureflag?
OCSECURE is 0 in case of non-secured build.
Do you expect non-secure resource in the secure build as secured channel. If yes, what is the use case?
","B"
"427","Patch Set 1: Code-Review-1

(10 comments)

this is really hard to review since it looks like the line ending type changed, please resubmit after fixing line endings
test/src/iBtestapp/modules/pm/c_cpp/csdk/src/PMCsdkAppHelper.cpp
Line 41: should not have commented out code
Line 158: remove tabs
Line 624: remove all tabs from this file

test/build/windows/SConscriptPM
Line 113: should not mix tabs and spaces in same file

test/src/iBtestapp/modules/pm/c_cpp/csdk/src/PMTestApp.cpp
Line 40: remove tabs
Line 78: remove commented out code

test/src/iBtestapp/modules/pm/c_cpp/cpp/src/PMTestApp.cpp
Line 75: remove commented out code
Line 185: remove commented out code

test/src/iBtestapp/modules/pm/c_cpp/csdk/src/PMCsdkAppMotHelper.cpp
Line 42: remove commented out code
Line 467: remove tabs
","B"
"428","Patch Set 1: Code-Review+1

obviously, I'm in favor of this one :)","C"
"429","Patch Set 1: Code-Review-1

(1 comment)
test/src/tc/es/gtest/src/btc/mediator/ESRichCommonTest.cpp
Line 210: unnecessary blank space
","C"
"430","Change has been successfully merged by Uze Choi","B"
"431","Patch Set 1:

(1 comment)
resource/csdk/stack/src/ocpayload.c
Line 1842: Question> 
We still have this check here 


   if ((resource->endpointType) & matchedTps)) && ..) 


so it means when TpsFlags can not be generated due to OCGetMatchedTpsFlags() API failure, resulting payload won't contain 'eps' property right ?
","A"
"432","Change has been successfully rebased as fdff9364b67ffac7be614e232e5dce6a1549da65 by Mushfiqul Islam","C"
"433","Patch Set 4:

Would like to see a bit more verbiage in commit msg, or a bug link.  ""Enable TCP"" isn't much info for someone who might need to search in changes later.","B"
"434","Patch Set 2:

I am not completely sure about placing 'LIBCOAP_INC' in the environment variables but I am not sure I fully see another way to work around the problem.","B"
"435","Patch Set 2: Code-Review+1

Sorry I thought I already gave a +1 for the change and I was just adding a comment on top of the +1.  I agree its a cheep way to share the information with other scripts.","B"
"436","Change has been successfully rebased as df6ca6d52b87dcdae701151a8531479c30c79f5f by Mats Wichmann","C"
"437","Change has been successfully rebased as 96d00530712469dde7dca527662dcd79f9216249 by Mats Wichmann","C"
"438","Change has been successfully rebased as c56974d40fd72b830588c5a5e3412c120c666a57 by Mats Wichmann","C"
"439","Change has been successfully rebased as 15314a006ad5130222a075e9509b9ef7a64f3405 by Mats Wichmann","C"
"440","Patch Set 3:

Looks reasonable. I'll wait to +1 until it shows mergeable.","C"
"441","Patch Set 3:

Please resolve the merge conflict.","B"
"442","Patch Set 4:

same issue as before: a ""submit"" is suggesting actually ""submit including parents"", and it's not instantly clear what that implies. So still holding off on pushing the button.","B"
"443","Patch Set 4: Code-Review+1

OKay, says it depends on onther changes, so back to -1.  Which changes?","C"
"444","Topic set to build","C"
"445","Change has been successfully rebased as e048d62ccfe0c281cfa1e114ad3605d3b8de6c73 by Mats Wichmann","C"
"446","Uploaded patch set 2.","C"
"447","Change has been successfully cherry-picked as f8912f06ee0702bc4b263c773c4aab6678a2be54 by Ashok Babu Channa","C"
"448","Patch Set 1: Code-Review+1

@Ashok, could you review it?","C"
"449","Patch Set 2:

Please push this to 1.3-rel too","B"
"450","Topic set to tizen","C"
"451","Change has been successfully rebased as 8148b55f9b81b71d1a6d6d3c431b4afacda08fac by Rick Bell","C"
"452","Patch Set 1:

""scons is not as popular as GNU make"", but since the makefile calls scons, I don't see anything being gained here.","C"
"453","Patch Set 4:

I agree 99% likely this doesn't cause any issues... but if nobody is going to merge (who's the proper maintainer to merge this anyway?) before RC6 then it's pointless to have it against 1.3-rel.","B"
"454","Patch Set 4:

Since 1.3.1 is all-but-final (I think a few WES issues remain only) can we cherry pick to master and abandon the 1.3-rel version?  Or is this an issue that needs to be fixed in 1.3.1?","B"
"455","Patch Set 4: Code-Review-2

This looks fine and I'll remove my -2 review as soon as we've tagged RC5.  Right now, only ""mandatory to fix cert blocking issues"" should be merged into 1.3-rel.","B"
"456","Patch Set 1:

> Upstream doesn't look like this at all any more, so there's really nothing to upstream on this one.

is there something related to it ? like a closed or pending PR ?","C"
"457","Patch Set 1:

I agree with your assesment Mats.  At this point in time everything going into the 1.3-rel branch should be documented with a Jira ticket to help with bug tracking and management.","B"
"458","Topic changed from next to build","C"
"459","Patch Set 11:

(1 comment)

thanks for those new examples, but IMHO It would be nice to fix existing ones because this could add more confusion to developers
examples/OCFSecure/README.txt
Line 5: please trim EOL

By the way you can use markdown format for writing doc
","A"
"460","Patch Set 11:

Adding Steve Saunders... Steve can you please review?  Main concern is no glaring security vulnerability or misleading configuration.  Since it doesn't touch core security code, we just need to make sure we're not creating any confusion, and if not we can merge.","B"
"461","Patch Set 11:

Becasue this is secure app, Security maintainer or submaintainer need to review the code at least. Randeep/Nathan could you check this code from security function view?","B"
"462","Patch Set 11:

Rami - I can submit this once you get Jenkins to pass...","C"
"463","Patch Set 11:

Rick since the samples are security related I think we really should get feed back from at least one member of the security team before submitting this.","B"
"464","Patch Set 11:

So if we want Nathan and/or Randeep to give this a +1 then I changed the tag to next so it will be highlighted.","B"
"465","Patch Set 11:

is there a jira ticket for this code? We are so close to the release of 1.3.1 we should have all commited code documented with a jira ticket.","B"
"466","Patch Set 11:

may I suggest to commit to master 1st and make sure .dat files are generated correctly using json scanner","B"
"467","Patch Set 11: Code-Review+1","C"
"468","Patch Set 11: Code-Review+1

Everything looks good to me.  You may need to send emails to some of the other maintainers.  I only have +1 permissions so this is the best I can do for you.

The 1.3.1 release is still pending with quite a few P1 issues that are taking most of the maintainers attention at this time so I don't know when they will have time to check your commit.","B"
"469","Patch Set 12:

(2 comments)

Do we want to add dep to mraa ?
examples/OCFSecure/server.cpp
Line 32: cant we use C lib ?
Line 133: May I suggest to use:

#if mraa 
...
#else
print()
#endif
","A"
"470","Patch Set 12:

Rami, it looked to me like the CI build exited the build early to I told it to run again. This time everything passed as expected.","B"
"471","Patch Set 12:

reverify","C"
"472","Patch Set 12: Code-Review+1","C"
"473","Patch Set 12: Code-Review-1

(6 comments)

Looks good but please fix the server .json and .dat right away so we can merge for 1.3.1.
examples/OCFSecure/ocf_svr_db_server.json
Line 31: this should be read-only (""permission"": 2) once in RFNOP (""pstat.dos.s"" = 3 below)... leaving it as 14 allows anonymous clients to take ownership of the Server!

So since this device is already onboarded, it should be 2 already here.

For brevity, just remove this ACE, and add ""/oic/sec/doxm"" to aceid 1 above
Line 39: /doxm should be removed from this ACE.

A separate ACE granting ""auth-crypt"" permission 2 (read-only) should be added, or (again for brevity), just add ""/oic/sec/doxm"" to aceid 2 above.

examples/OCFSecure/README.txt
Line 1: .
Line 9: ""These"", right?
Line 47: )
Line 59: If
","A"
"474","Patch Set 12: Code-Review-2

I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done.  I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.","B"
"475","Patch Set 13:

(2 comments)

These seem ready to merge; any last objections before I merge to 1.3-rel?
examples/OCFSecure/ocf_svr_db_server.json
Line 10: add a space!
Line 21: space
","A"
"476","Patch Set 13:

(2 comments)

if virtual device then print change
examples/OCFSecure/server.cpp
Line 31: maybe use 
#ifdef HAVE_MRAA_HPP
Line 134: #else
print new status for those with are not supporting mrra
#endif
","A"
"477","Patch Set 13:

To Rami's question: no these apps don't have to pass CTT; this is an example application and not part of certification testing.","B"
"478","Patch Set 13: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","A"
"479","Patch Set 13: Code-Review-1

(1 comment)
SConstruct
Line 68: Should only build with security enabled

is this the case ? seems not, jenkins should have fail ?

So I am removing it from the next list:

https://gerrit.iotivity.org/gerrit/#/q/status:open+project:iotivity+branch:1.3-rel+topic:next
","B"
"480","Patch Set 4:

(3 comments)

still reviewing...
examples/OCFSecure/utilities.c
Line 8: typically it is a good idea to surround these with a define that can be used to turn it off on platforms that don't support ANSI color.

Also macros of such a common name should have a prefix to prevent them from conflicting with other macros. I am using ANSI_COLOR_ as a prefix but you could find a shorter prefix.

example
  #define ANSI_COLOR_SUPPORTED 1
  #ifdef ANSI_COLOR_SUPPORTED
    #define ANSI_COLOR_RESET ""\x1B[0m""
    ...
    #define ANSI_COLOR_WHITE ""\x1b[37m""
  #else

    #define ANSI_COLOR_RESET """"
    ...
    #define ANSI_COLOR_WHITE """"
  #endif

examples/OCFSecure/ocf_svr_db_client.json
Line 41: I don't know what 'sct' means but other examples recently changed this to 9 can other reviewers help me out what should this value be?
","A"
"481","Patch Set 4:

(6 comments)

This is not a full review. I still need to look at the samples themselves.
examples/OCFSecure/SConscript
Line 38: I know you were probably referencing other code when creating this.  There is currently work in progress to change these to use a more SCons like path.

replace

  os.path.join(src_dir, 'resource', 'csdk', 'connectivity','api')

with

  '#/resource/csdk/connectivity/api'

same for lines 34-38
Line 62: nit: remove tailing whitespace
Line 64: not 100% sure but I don't think you need to full path to the .dat file.

you should be able to just do

samples_env.Install(build_dir + examples_dir, 'ocf_svr_db_client.dat')

examples/OCFSecure/README.txt
Line 4: the
Line 4: in the
","A"
"482","Patch Set 6:

(1 comment)
examples/OCFSecure/client.c
Line 40: this should be MAX_URI_LENGTH  from ocstackconfig.h
","A"
"483","Patch Set 7: Code-Review+1

(8 comments)

I have left several suggestions for minor cleanup but none of them are significant enough for me to stop this being committed.
examples/OCFSecure/server.cpp
Line 62: nit: clean trailing white space.
Line 206: although I didn't find anything on this in the coding guidelines I would recommend putting the else on its own line it makes it stand out and simpler to read.

  }
  else
  {

or

  }
  else if()
  }
Line 301: if (signalNumber == SIGINT)
  {
     STOP = true;
  }

examples/OCFSecure/client.c
Line 120: nit: clean up white space.
Line 253: nit: clean trailing whitespace
Line 260: I recommend using OC_UNUSED(handle) in place of the (void) cast.  Makes it clear this is an unused input.
Line 462: use {}

  if (signalNumber == SIGINT)
  {
     STOP = true;
  }
Line 484: since argc and argv are not used why not use 'int main() {...}' without the params.
","A"
"484","Patch Set 9: Code-Review+1

(2 comments)
examples/OCFSecure/server.cpp
Line 306: nit: fix tab depth.  I assume this is a copy paste error.

examples/OCFSecure/client.c
Line 462: nit: fix tab depth to match if statement as done else where.
","B"
"485","Topic changed from next to security","C"
"486","Topic changed from secure sample applications to next","C"
"487","Patch Set 1: Code-Review+1

(1 comment)
/COMMIT_MSG
Line 7: typo
","C"
"488","Topic changed from MLK to next","C"
"489","Topic changed from MLK-1.3-rel to MLK","C"
"490","Patch Set 1: Code-Review+1

(1 comment)
bridging/plugins/lifx_plugin/SConscript
Line 74: can't it be found using paths ?
","B"
"491","Topic changed from build-1.3-rel to next","C"
"492","Patch Set 1: Code-Review-1

(9 comments)
resource/csdk/connectivity/src/cainterfacecontroller.c
Line 26: why did platform_features.h need to be added?
","A"
"493","Patch Set 2:

Code wise the change looks fine. I can not comment on if this commit should go into the code or not.","B"
"494","Patch Set 3:

Change makes since to me.  I will give this a +1 this seems like an issue caused by not having clear list of public header files.  I am not completely convinced the logging should be made public. Since we already have samples and code that assume it is public this change makes since.","B"
"495","Patch Set 3:

Since 1.3.1 is all-but-final (I think a few WES issues remain only) can we cherry pick to master and abandon the 1.3-rel version?  This looks like a very large change to push into 1.3-rel at this point.","A"
"496","Patch Set 3: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","B"
"497","Patch Set 3: Code-Review-1

(8 comments)

In general experimental APIs should not be used in the same samples meant to be the samples for public APIs.

As such, either the logging APIs need to be public, or we need new samples that do not use experimental APIs.
resource/csdk/security/provisioning/sample/cloud/cloudAuth.c
Line 22: Since this sample uses experimental APIs, please include a notice in README-cloud.txt that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/resource-directory/samples/rd_queryClient.cpp
Line 24: Since this sample uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/security/provisioning/sample/autoprovisioningclient.c
Line 38: Since this sample uses experimental APIs, please include a notice in README-Provisioning-Tool.txt that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/security/tool/svrdbeditor_src/svrdbeditorcred.c
Line 38: Since this tool uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/stack/samples/linux/OCSample/ocserver.c
Line 36: Since this sample code uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/resource-directory/samples/rd_publishingClient.cpp
Line 29: Since this sample uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/stack/samples/linux/OCSample/occlient.c
Line 34: Since this sample code uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.

resource/csdk/stack/samples/arduino/SimpleClientServer/ocserver/ocserver.cpp
Line 24: Since this sample code uses experimental APIs, please include a notice somewhere that there is no guarantee of support for this sample code in future releases, nor is there any guarantee that breaking changes will not occur across releases.
","A"
"498","Patch Set 3: Code-Review-2

This looks fine and I'll remove my -2 review as soon as we've tagged RC5.  Right now, only ""mandatory to fix cert blocking issues"" should be merged into 1.3-rel.","B"
"499","Patch Set 2:

(1 comment)
Dockerfile
Line 70: I would suggest to provide a ARG to allow customization of the scons build, e.g.
ARG buildargs
and then call scons with
scons VERBOSE=1 ${buildargs}
","A"
"500","Patch Set 2:

Partly answering myself, it seems the prep.sh call is relative to the top of the iotivity tree.","B"
"501","Patch Set 2:

can we put this in the same place as the vagrantfile (that is, a subdir under tools)?  I'm not sure that is the perfect place either but it would be nice to keep things consistent.","C"
"502","Patch Set 4: Code-Review+1

cherry pick, seems fine","B"
"503","Patch Set 5:

(1 comment)
service/notification/cpp-wrapper/unittest/NSConsumerServiceSimulator.h
Line 196: It is good we're checking that the resource exists first, but wouldn't it be better to inform the caller by returning an error that the resource they were trying to use is NULL.

Similar issue exists in other parts.
","B"
"504","Patch Set 5:

(1 comment)
service/notification/unittest/NSProviderTest.cpp
Line 578: @Yadav, Why do we call it here?
","C"
"505","Patch Set 5:

(1 comment)
service/notification/unittest/NSProviderTest.cpp
Line 578: Even with your comment I still don't understand why the call to findProvider is needed here.  It does not seem to be related to this commit. Which says its only adding null checks.

If this is needed for the commit I would add it to the commit message.

If it is not needed I would commit it in its own separate commit.
","B"
"506","Patch Set 5:

(1 comment)
service/notification/unittest/NSProviderTest.cpp
Line 578: The following comment is there on the IOT-2415 issue in jira:

""
Dear Uze Choi,
We've found that this problem sholud be fixed by updating UTC code.
Mr. Baek attached ""0001-Resolve-UBSAN-27695.patch"" that resolves such problem after the verification of it.
""

There is one patch file attached in the JIRA which is fixes UBSAN-27695 issue. That is where this code is coming here.

Please check with the patch owner.
","A"
"507","Patch Set 5: Code-Review-1

(4 comments)
service/notification/unittest/NSConsumerSimulator.h
Line 228: default to OC_STACK_ERROR or similar.
Line 238: default to OC_STACK_ERROR or similar.

service/notification/cpp-wrapper/unittest/NSConsumerServiceSimulator.h
Line 192: shouldn't this default to failure not pass.  that way if the m_msgResource is null an error is returned.
Line 202: this should default to failure not pass.
","A"
"508","Patch Set 6:

Phil, this is making the unit test more reliable. Since the change only effects the unit tests it will not matter if it is in the next release. Very Low Risk commit.","B"
"509","Patch Set 6:

Since 1.3.1 is all-but-final (I think a few WES issues remain only) can we cherry pick to master and abandon the 1.3-rel version?  Or is this an issue that needs to be fixed in 1.3.1?","C"
"510","Patch Set 6: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","A"
"511","Patch Set 6: Code-Review+2

@Yadav, please apply the change from patch set 5 to 6 into master branch.","A"
"512","Patch Set 6: Code-Review-2

Even though I agree with George that it's very low risk, we are within a day or two of final tagging for 1.3.1 and this isn't fixing a cert-blocker, so I'd rather wait for after RC5 tagging to merge, just as a matter of sticking to that criteria.  Anything that changes the HEAD of 1.3-rel at this point introduces additional complexity for testing/verifying/etc. other issues (even by virtue of requiring all the QA and dev folks working to re-fetch and re-pull 1.3-rel).  

Sorry to be pedantic but there'll be another release in just a few weeks and I'll merge this as soon as RC5 is tagged :)","B"
"513","Patch Set 1: Code-Review+1

fine, though I don't know much about the needs of tizen at this point (didn't you say they are using fork now anyway?)","C"
"514","Patch Set 5:

Phil you need to manually rebase this to solve the merge conflict. I would also suggest creating a Jira ticket associated with this issue. If it should go in the next release it should have a Jira ticket.","A"
"515","Patch Set 5:

be nice if there was a Jira ticket tracking this issue.","B"
"516","Patch Set 1:

Looks like this patch should start using the model from https://gerrit.iotivity.org/gerrit/#/c/21549/ ?","B"
"517","Patch Set 1: Code-Review-1

I think we should create %{buildroot}%{_includedir}/experimental/ for this kind of header files that need future improvements. It should be clear that we'll most likely need to make breaking changes to this header file, in the future. 

Example of improvements needed here:
- Should securevirtualresourcetypes.h and everything inside it be Public?
- Public APIs should have consistent names, but ConfigSelfOwnership is not consistent with the other names from the same file
- Etc.","A"
"518","Patch Set 4:

(1 comment)
resource/provisioning/examples/cloudAuth.cpp
Line 28: Since this sample uses experimental APIs, please update README-Provisioning-Tool-CPP.txt to state that this example is experimental and there is no guarantee of support in future releases, nor is there any guarantee that breaking changes will not occur across releases.
","A"
"519","Patch Set 4:

I assume this is now targeted for ""master"" since 1.3.1 release is nearly done?  Can we cherry pick over and abandon the 1.3-rel version, or are you trying to make this into 1.3.1-RC6 (alongside the WES etc fixes?)","C"
"520","Patch Set 4: Code-Review+1

This is merged to master now, leaving the decision on the 1.3-rel pick open for bit.","A"
"521","Patch Set 4: Code-Review-1

-1 until README-Provisioning-Tool-CPP.txt is updated","B"
"522","Patch Set 3:

(4 comments)
/COMMIT_MSG
Line 7: typically we use IOT-2508
Line 8: optional but also really good add:

  Bug: https://jira.iotivity.org/browse/IOT-2508

This will add a clickable link back to the Jira ticket in question.

resource/include/StringConstants.h
Line 42: nit: white space not lined up.

resource/include/ResourceInitException.h
Line 40: This is a public header file. Is this going to be used in other peoples code?

If this has the possibility of being used in other peoples code then this should be overloaded to keep backward compatibility.
","A"
"523","Patch Set 3:

This is a RI layer exception file. I have seen the IoTivity code for reference. Only OCResource throws this exception. Also I did not use default parameters as I wanted the developer to be specific about the exception being thrown as they were based on the parameters passed specifically.","B"
"524","Patch Set 5:

(1 comment)
/COMMIT_MSG
Line 7: nit: use IOT-2508
","C"
"525","Patch Set 5:

(1 comment)
resource/include/ResourceInitException.h
Line 32: This is a RI layer exception file. I have seen the IoTivity code for reference. Only OCResource throws this exception. Also I did not use default parameters as I wanted the developer to be specific about the exception being thrown as they were based on the parameters passed specifically.
","B"
"526","Patch Set 5: Code-Review-1

(2 comments)
resource/include/StringConstants.h
Line 42: nit: fix alignment so it matches the nearby code.

resource/include/ResourceInitException.h
Line 32: this is a public header.  You should use method over loading to provide a version of ResourceInitException that is compatible with older versions.

something like this...

  /// @deprecated
  ResourceInitException(
                bool missingUri,
                bool missingType,
                bool missingInterface,
                bool missingClientWrapper,
                bool invalidPort,
                bool invalidIp)
        : m_whatMessage(),
          m_missingUri(missingUri),
          m_invalidUri(false),
          m_missingType(missingType),
          m_missingInterface(missingInterface),
          m_missingClientWrapper(missingClientWrapper),
          m_invalidPort(invalidPort),
          m_invalidIp(invalidIp),
          m_invalidHost(false)
  {
  ...
  }

Since 1.3.1 is a point release we should not be breaking APIs on its release.
","A"
"527","Patch Set 6:

You still didn't address my comment on patch set 5.  If you will not address it please add a comment why you are choosing to ignore.","B"
"528","Patch Set 6: Commit message was updated.","C"
"529","Patch Set 7:

Did you mean ""fix alignment so it matches the nearby code"" comment,
I think I missed this one. I have made a patch for the same. Thank you.","C"
"530","Patch Set 7: Code-Review+1

(2 comments)

Arya sorry I was referring to the backwards compatible comment which you did address.

I have two nitpicky comments on the commit message that don't matter at all. If you end up making another patch it would be nice to see them updated but they don't matter at all.
/COMMIT_MSG
Line 7: nit: if you use IOT-2508 without space we have tools that will link this commit with the Jira ticket.
Line 8: nit:

Add

  Bug: https://jira.iotivity.org/browse/IOT-2508
","C"
"531","Patch Set 7: Code-Review-1

(1 comment)
resource/include/ResourceInitException.h
Line 34: this file is a public API, and hence breaking changes are not allowed.  It is ok to add a second new constructor, but not ok to remove the old one.
","A"
"532","Patch Set 4:

(5 comments)

I'm not intimately familiar with this code so I'd really like a +1 from Kevin or Dan before merging.  See other comments inline.
resource/csdk/security/src/credresource.c
Line 3167: pemCertNum
Line 3168: I'd prefer a more descriptive name like ""tempPubData"" or even ""cursor"" but only bother if you're submitted a new patch anyway for other reasons.
Line 3189: Have you checked to ensure this ""len"" value includes an extra byte for the null char we append, without overwriting actual data?
Line 3223: Please add a comment that explains when this ""else"" code block is executed (e.g. ""encode non-PEM B64 cert"" or whatever is accurate).
Line 3284: I'm not sure the if/else logic here is the same... in prior code, the logic is ""if B64 || PEM, do pem encode, else do other encode"", now the logic is ""if B64, then if PEM, do pem encode, else do other encode"".  Is the  new logic correct?
","A"
"533","Patch Set 4: Code-Review+1

All CTT tests (except for 1.7.8.11) pass.","B"
"534","Patch Set 4: Code-Review-1

(7 comments)
resource/csdk/security/src/credresource.c
Line 74: Prefer to avoid using #defines. Instead:

static const char PEM_BEGIN_CRT[] = ""...""

And similarly for PEM_END_CRT.
Line 3165: Error exits in many places in this function will leave chain in a partially initialized state. Is this what you want? If not, you may also need to free and clear chain before returning since you have no return value to indicate an error condition.
Line 3171: Verify ptr is not NULL to ensure the desired substring is actually present before proceeding.
Line 3172: Cast to size_t to avoid unintended narrowing.
Line 3172: sizeof will include the terminating NULL in the string in its result; be sure this is what you want here and below when you increment ptr by this value. sizeof is preferred since it does the computation at compile time (unlike strlen which does it at runtime) but subtract 1 if you don't want to count that null.
Line 3188: Verify item is not NULL before dereferencing.
Line 3190: Verify item->data is not NULL before dereferencing.
","A"
"535","Patch Set 4: Code-Review-1

unable to cherry-pick due to conflict","C"
"536","Topic changed from log log to security","C"
"537","Topic changed from log to log log","C"
"538","Topic set to log","C"
"539","Patch Set 1:

(1 comment)
auto_build.py
Line 142: We'll need to make sure JAVA_HOME gets set somewhere if we are adding this. My build-for-everything also adds these:

ROUTING=GW TARGET_TRANSPORT=ALL WITH_MQ=PUB,SUB,BROKER RD_MODE=all

And we should drop the two WITH_RA options since they are no longer used.
","A"
"540","Patch Set 1:

(1 comment)
auto_build.py
Line 142: Well, on WITH_RA, it seems to have been officially dumped, see https://jira.iotivity.org/browse/IOT-2680.  I know that bug said ""contact the build maintainer to remove"" and nobody did ever contact me, but it seems like the decision was made: ""RA related build option is not valid any more"".
","A"
"541","Patch Set 1:

maybe rebase on 

https://gerrit.iotivity.org/gerrit/#/c/8137/","C"
"542","Patch Set 3:

(1 comment)
build_common/SConscript
Line 281: I think it's redondant with scons's prefix arg

could be removed
","B"
"543","Patch Set 3:

(2 comments)
tools/tizen/iotivity.spec
Line 281: not safe, it will work only if in includedir
before keep as before

resource/c_common/SConscript
Line 229: overlapping
","A"
"544","Patch Set 4:

(1 comment)

As a general comment, this seems good.
build_common/SConscript
Line 300: Please check these... BUILD_JAVA, JAVA_HOME, OIC_SUPPORT_TIZEN_TRACE already defined above in the bulk AddVariables.  WITH_EXAMPLES and WITH_UNIT_TESTS could move up there too.  Should make sure there's no confusion with PREFIX/prefix with existing code.
","A"
"545","Patch Set 4:

(1 comment)
build_common/SConscript
Line 701: remove it should work as linux on yocto
","A"
"546","Patch Set 4:

> Phil, I have troubles using --install-sandbox in this change:
 > 
 > 1. It renders an exception during installation:
 > scons: *** [out/linux/x86_64/release/liblogger.a] AttributeError :
 > 'FileBuildInfo' object has no attribute 'result'
 
I replied the wrong way to this.  Can you try removing the .pyc files and see if that helps?  There's nothing in the scripts that should have a way of triggering this, except out of sync python compiled modules, that I can think of.","B"
"547","Patch Set 4:

I use scons install in : 

https://gerrit.iotivity.org/gerrit/#/c/22711/","B"
"548","Patch Set 4:

Sigh. I was hoping to quickly test ""what would this do"" by running 'scons -n install', but of course ran into old irritating bug: https://jira.iotivity.org/browse/IOT-2356","B"
"549","Patch Set 4:

This only happens with this patchset?","C"
"550","Patch Set 4:

please also review base change:

https://gerrit.iotivity.org/gerrit/#/c/8137/","C"
"551","Patch Set 4:

please rebase en eventually split in several patches if possible

try to isolate DESTDIR change
I think we can ignore it for now","B"
"552","Patch Set 4:

please try to rebase on :
https://gerrit.iotivity.org/gerrit/#/c/23293/1/tools/tizen/iotivity.spec
and remove lines that install sample and .dat files","B"
"553","Patch Set 1: Code-Review-1

Please rebase on master or abandon","B"
"554","Change has been successfully rebased as 230218737ec7b4b49a9e59339bfc382fa8abf6af by Mats Wichmann","C"
"555","Patch Set 13: Code-Review+1

(1 comment)
service/easy-setup/sampleapp/mediator/linux/richsdk_sample/SConscript
Line 67: Seems unusual that we have 2 successive AppendUnique calls - as far as I remember IoTivity usually makes just 1 call, with a longer list as parameter.
","A"
"556","Patch Set 15:

(1 comment)
service/easy-setup/sampleapp/mediator/linux/richsdk_sample/SConscript
Line 79: Dan: I have been gradually consolidating these, hadn't gotten to all yet by any means.  What has not been clear is when some libs get Prepend and some get Append, I'm usually not clear that ordering needs to be preserved but usually try not to mess with it until more sure.  Notice here there has been some change in that ordering.
","B"
"557","Patch Set 15:

(1 comment)
service/easy-setup/sampleapp/mediator/linux/richsdk_sample/SConscript
Line 79: I'm not sure we even know.  For example, liboc_logger.so is built so it has dependencies (DT_NEEDED) on ""system"" libraries libdl, libpthread, librt, libuuid, but it does not actually use any of them (if linked with -Wl,--as-needed those ""dependencies"" vanish). It's not just system libs; libnotification_provider.so has DT_NEEDED of liboc.so and libresource_directory.so but they are not real dependencies either.  A script would presumably depend on looking in the library's dependency list which may thus be wrong.
","B"
"558","Patch Set 15:

(1 comment)
service/easy-setup/sampleapp/mediator/linux/richsdk_sample/SConscript
Line 79: do we have a place the deps are described?
","C"
"559","Patch Set 15: Code-Review-1

(3 comments)
resource/csdk/stack/SConscript
Line 102: Just making sure: is it intended to overwrite the RPATH instead of adding another one?

bridging/mpm_client/SConscript
Line 52: This one's different than what you've got in build_common. I think it might have to stay here.

service/easy-setup/sampleapp/mediator/linux/richsdk_sample/SConscript
Line 79: Just a small correction: if lib A depends on lib B, then they need to be added in order ""-lA -lB"". Since our libs can only have dependency on the system ones and not the other way around, I think we should be placing them at the end.

See: http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html for instance.
","A"
"560","Patch Set 16:

Just because it isn't available on Windows, doesn't preclude as a value add at all. I just wanted to ensure you were aware of that. I don't if there's something we can do with our SConscripts to overcome that.

The other thing I learned the hard way that I never saw in plain text is that you can't easily build applications with SConscripts either. It works well with libraries, though.","B"
"561","Patch Set 16:

This may have already been brought up, but RPATH doesn't exist on Windows. I learned that the hard way.","A"
"562","Patch Set 18: Code-Review+1

this should be picked up by mergeback, no?","C"
"563","Patch Set 20: Code-Review+1

this change no longer seems to have much to do with the commit msg.  The one line removed seems just fine!","B"
"564","Patch Set 3:

(1 comment)
build_common/SConscript
Line 814: did you mean RPATH here?
","B"
"565","Patch Set 5:

It's an addition to the paths to look in at runtime.  So when the samples are installed in out/whatever, they won't find their own libraries unless those got install in ""system locations"" (which we don't do) without setting RPATH.  Linux binaries don't look in the current directory for runtime libraries.","B"
"566","Patch Set 5:

This looks good to me but I don't have a good understanding of what RPATH is used for.  I would like others to take a look that have a better understanding.","C"
"567","Change has been successfully rebased as c5e8171edfa21c24d058d25dfd7bfa682698c8bd by Mats Wichmann","C"
"568","Patch Set 6: Code-Review+1

harmless, but why bother at this point?","C"
"569","Patch Set 1: -Code-Review

(1 comment)
test/build/linux/SConscriptRI
Line 36: why is this required?
","C"
"570","Change has been successfully rebased as 0da5adb75f1f9112256f543ee7a5694ed8b3e20b by Mushfiqul Islam","C"
"571","Patch Set 1: Code-Review-1

(4 comments)

Please return appropriate value.
test/src/testapp/ca/c_cpp/src/sample_server.c
Line 91: Return type converted from void to CAResult_t
Should there be a retrun at the end of the fuction?

test/src/tc/ca/gtest/src/helper/CAHelper.cpp
Line 1439: Return type converted from void to CAResult_t
Should there be a retrun at the end of the fuction?

test/src/testapp/ca/c_cpp/src/sample_client.c
Line 78: Return type converted from void to CAResult_t
Should there be a retrun at the end of the fuction?

test/src/testapp/ca/c_cpp/src/ca_simulator.c
Line 228: Return type converted from void to CAResult_t
Should there be a retrun at the end of the fuction?
","A"
"572","Patch Set 2: Code-Review-1

there are conflicts","C"
"573","Change has been successfully merged by Nathan Heldt-Sheller","C"
"574","Patch Set 1: Code-Review+1

#22967 regression already fixed by Oleksii in #23279.
So you need to make a choice - to revert 23229 or to merge 23279.","B"
"575","Change has been successfully rebased as d79b904d82836cad7f4378a00f86262dc49a7f09 by Mushfiqul Islam","C"
"576","Change has been successfully rebased as 99fa192a40e7ca848861ab0b3f0faa15fcf82c72 by Mushfiqul Islam","C"
"577","Patch Set 2: -Code-Review

If it added in tizen repo then we no longer need to maintain this. So, it would be certainly better if it added in tizen repo.","B"
"578","Change has been successfully merged by Mushfiqul Islam","C"
"579","Patch Set 1:

please, remove IoTivity_TC.spec and ES_UTC_ITC.spec from this commit. I've removed those file in another commit (https://gerrit.iotivity.org/gerrit/23177)","B"
"580","Patch Set 2: Code-Review+1

not fan of changing style back and forth but It's reasonable for me","C"
"581","Patch Set 6: Code-Review-1

(1 comment)
resource/csdk/security/include/base64.h
Line 44: Spelling: deprecated
","C"
"582","Patch Set 7:

(1 comment)
resource/csdk/security/unittest/SConscript
Line 77: no, there is just a trailing space that could be removed ;)

blame my lazyness ;)
","C"
"583","Patch Set 7: Code-Review+1

(4 comments)
resource/c_common/platform_features.h
Line 165: can't comments be on different lines to fit in <80col ?

resource/csdk/security/unittest/SConscript
Line 77: !

resource/csdk/security/include/base64.h
Line 26: I tend to put config files on 1st lines
Line 107: impL...
","A"
"584","Patch Set 8:

reverify","C"
"585","Patch Set 8: Code-Review+1

This seems fine (and looks like it's already been in 1.3-rel)","C"
"586","Change has been successfully cherry-picked as 7d7fe55e98c5672c66a9ed2b844196a9d7fa48df by Nathan Heldt-Sheller","C"
"587","Patch Set 1: Verified-1

Merge conflict.","C"
"588","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/security/include/ocsecurity.h
Line 44: whitespace; fix if you plan to submit another patch set anyway.
","C"
"589","Patch Set 3:

(1 comment)
resource/csdk/security/src/ocsecurity.c
Line 76: This could generate and error on latest fedora:

resource/csdk/security/src/ocsecurity.c:75:16: error: this statement may fall through [-Werror=implicit-fallthrough=]
","A"
"590","Topic set to security","C"
"591","Patch Set 1:

(4 comments)
service/easy-setup/sampleapp/mediator/android/EasySetup/app/src/main/assets/oic_svr_db_client.json
Line 2: Done

service/resource-encapsulation/unittests/oic_svr_db_re_client.json
Line 2: Done

resource/csdk/security/unittest/oic_unittest_default_acl.json
Line 2: Done

resource/csdk/stack/samples/linux/secure/oic_svr_db_server_justworks.json
Line 22: Done
","A"
"592","Patch Set 1: Code-Review+1

(4 comments)
service/easy-setup/sampleapp/mediator/android/EasySetup/app/src/main/assets/oic_svr_db_client.json
Line 2: Possible line ending change in this file.

service/resource-encapsulation/unittests/oic_svr_db_re_client.json
Line 2: Possible line ending change in this file.

resource/csdk/security/unittest/oic_unittest_default_acl.json
Line 2: Was there a line ending change in this file? Everything is marked as green so it seems likely.

resource/csdk/stack/samples/linux/secure/oic_svr_db_server_justworks.json
Line 22: nit: Space between the "" and } to align to the rest of the file.
","A"
"593","Patch Set 1: Code-Review+1

Seems okay to make these changes since I think most Devices will indeed want to grant access to the introspection Resources once onboarding is finished.  However as Mitch pointed out in IOT-2581 comments, we still must understand why the request was being denied, because it appears that the /acl2 policy was already set to grant the request.","B"
"594","Patch Set 2:

(1 comment)
service/resource-encapsulation/unittests/oic_svr_db_re_client.json
Line 56: Is coaps supported for accessing /introspection/payload? 

If yes, maybe like you should add /introspection/payload to this ""auth-crypt"" ACE?
","A"
"595","Patch Set 2:

(1 comment)
service/resource-encapsulation/unittests/oic_svr_db_re_client.json
Line 56: No it is not. The /introspection/payload is only over clear
","B"
"596","Patch Set 2:

> I looked at the JIRA ticket server logs and saw that the request is
 > denied because it arrived over CoAP and there's no ""anon-clear""
 > ACE.  Mitch took the AR to add such an ACE so we can merge this
 > change if it's ready to go... Ibrahim can you verify that no
 > further changes are needed?

These changes should do the trick. We ran the CTT test and it could access the /introspection/payload endpoint successfully with these changes.

I will fix the merge conflict and upload a new Patch.","A"
"597","Patch Set 2:

As I understand, this must be included for introspection to work (for these example apps) without requiring modification of .json and re-encoding to .dat, right?  If so, can you please re-base and re-submit and I'll run a regression test against CTT 1.5.30?  It would be good to have this in 1.3.1-RC6 if possible.","A"
"598","Patch Set 2:

I looked at the JIRA ticket server logs and saw that the request is denied because it arrived over CoAP and there's no ""anon-clear"" ACE.  Mitch took the AR to add such an ACE so we can merge this change if it's ready to go... Ibrahim can you verify that no further changes are needed?","B"
"599","Patch Set 3: Code-Review-2

I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done.  I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.","B"
"600","Change has been successfully rebased as cd1cde97f772464bae84b245b13dd46992d8babb by Mats Wichmann","C"
"601","Patch Set 2: Code-Review+1

(1 comment)
/COMMIT_MSG
Line 9: typo
","C"
"602","Patch Set 4:

I don't know how to make it happen, but we've been talking about a ""turn on everything"" type build in an effort to make sure unused code doesn't slip through unbuilt by Jenkins.","B"
"603","Patch Set 4:

Is there a plan to add another build job that has MOT enabled or to include MOT in an existing job?","B"
"604","Patch Set 5:

Alex Kelley's suggestion is a good one","B"
"605","Patch Set 5:

If we can't have a full build with all of the features is there a build we could have that enables security features like MOT? I understand that we are making this change to align to the spec but security in IoTivity changes rapidly. If MOT is not built regularly it could be broken again without us knowing. This just results in developers spending more time trying to track down and solve an issue that could have been prevented.","A"
"606","Patch Set 5: Code-Review+1

(1 comment)
/COMMIT_MSG
Line 9: typo still exists: required
","B"
"607","Patch Set 7:

Thanks for adding the MOT option to Linux full!","B"
"608","Patch Set 7: -Code-Review

Please see my open question in change 21539 that impacts this change.","A"
"609","Patch Set 1: Code-Review-1

Nathan Heldt-Sheller, the patch #22987 is needed to be reverted instead of this","B"
"610","Topic set to proxy","C"
"611","Patch Set 2:

(1 comment)
resource/csdk/stack/src/ocpayloadparse.c
Line 1198: maybe you want also to test *outPayload here
","B"
"612","Patch Set 3:

(1 comment)
resource/csdk/stack/src/ocpayloadparse.c
Line 1198: *
","C"
"613","Patch Set 3:

(1 comment)
resource/csdk/stack/src/ocpayloadparse.c
Line 1198: if ((NULL != outPayload) && (NULL != *outPayload)) looks correct.
","A"
"614","Patch Set 3:

(1 comment)
resource/csdk/stack/src/ocpayloadparse.c
Line 1198: yes I agrea
","C"
"615","Topic set to MLK","C"
"616","Patch Set 1:

(1 comment)

Bug: https://jira.iotivity.org/browse/IOT-2893

Also there is a discussion about non secured resources in secured mode on jira, maybe this help:

https://jira.iotivity.org/browse/IOT-2443?jql=labels%20%3D%20OC_STACK_UNAUTHORIZED_REQ
resource/examples/simpleclient.cpp
Line 440: better use
#if 0
...

#endif
","A"
"617","Change has been successfully rebased as 57f121d6fdb887752eeeaa452d942a8c30ca9af9 by Ziran Sun","C"
"618","Patch Set 1: Code-Review+2

this is no-impact to anybody else.","C"
"619","Patch Set 2:

reverify","C"
"620","Patch Set 2:

why do we need to package it? seems like ""not our problem"".","B"
"621","Change has been successfully rebased as 4176027f8dc6645438e2f160974d8ebd88b6d23f by Mats Wichmann","C"
"622","Patch Set 3:

(3 comments)
auto_build.py
Line 536: failing on 1st failure is more logical,
I think that current behaviour is a mistake not something we actually wanted.

tools/scons/RunTest.py
Line 50: ok , but might not be needed if rpath is correctly set
Line 56: ',' could be better because we have some executable that use _ so we can guess back the exec name.
","A"
"623","Patch Set 4:

(2 comments)

Can you verify the script will prevent Jenkins from just exiting when scons fails so it will process any valgrind memcheck files that were generated before exiting?
auto_build.py
Line 50: is it possible this will leave Jenkins spinning not completing its tasks?

tools/scons/RunTest.py
Line 99: debug print statements should probably be removed.
","A"
"624","Patch Set 4:

OK thanks Mats.  I will wait to review this again till you have removed the -2.","C"
"625","Patch Set 5:

(1 comment)
tools/scons/RunTest.py
Line 95: this looks like debug output that is no longer needed.
","A"
"626","Patch Set 7:

(1 comment)

Mats this looks good to me but I want to come back to this and take another look once I can concentrate on the code a little more.
tools/scons/RunTest.py
Line 38: may want to manually add white space so the line does not run so far off the screen.
","B"
"627","Patch Set 9:

reverify","C"
"628","Patch Set 2:

@Rick should review","C"
"629","Patch Set 2:

Can you share with me your use case for bundling and exposing mpm through JNI?","B"
"630","Patch Set 2:

George - This just doing repackaging to Android Bundle. Please let know if you approve and I check it in.","B"
"631","Patch Set 2:

touch","C"
"632","Patch Set 2: Code-Review-1

Zoltan - I just noticed that you are bundling Resource Container libraries into Android Bundle. What is your use case that you are using the Resource Container? Are you using them as a Plugin Manager?  If yes you should be looking at the Min-Plugin Manager instead of Resource Container.","A"
"633","Topic set to android","C"
"634","Patch Set 2: Code-Review-1

isnt something missing ?","C"
"635","Patch Set 3: Code-Review-1","C"
"636","Patch Set 1: Code-Review+1

(2 comments)

more reviewer welcome

Could be improved too
resource/examples/fridgeserver.cpp
Line 137: swap

note style is not correct,
once that change merged you can reformat the whole file and submit
Line 143: swap
","A"
"637","Patch Set 2: Commit message was updated.","C"
"638","Patch Set 3:

(1 comment)
resource/examples/fridgeserver.cpp
Line 179: Not sure I understand.  Why is this being removed?

This does not look like it is fixing a delete issue. This looks like it is just a bunch of console output code for the sample.
","B"
"639","Patch Set 3: Cherry Picked

This patchset was cherry picked to branch master as commit ac65f14c71f6184f3ca39452b18117c43ccb8f26","C"
"640","Topic set to resources","C"
"641","Patch Set 14:

(1 comment)

one suggestion
resource/csdk/stack/src/ocresource.c
Line 2289: maybe by scanf(""%d-%d-%d"", &y, &m, &d) 
is easier to read (and write)
","A"
"642","Patch Set 19:

(1 comment)
resource/csdk/stack/src/ocresource.c
Line 2281: can we use strptime() to validate the date?
","B"
"643","Patch Set 19: Code-Review+1

(4 comments)

far simpler to use scanf, maybe it could be simplified with extra formating args, but it does what it is supposed to do ;)
resource/csdk/stack/src/ocresource.c
Line 2309: why to lower on digits ?
Line 2289: cant sscanf do that check ?
Line 2298: can't we scan 4 digits here ?
Line 2300: maybe we can use unix epoc as reference : 1970
","A"
"644","Patch Set 19: Patch Set 18 was rebased","C"
"645","Patch Set 1: Code-Review-1

(2 comments)
resource/csdk/stack/src/ocresource.c
Line 2289: would be useful to log the error code returned by regcomp().
Line 2299: should call regfree(&regex) before leaving this scope.
","A"
"646","Patch Set 20: Patch Set 19 was rebased","C"
"647","Patch Set 3:

(1 comment)

I would rather submit to master 1st
resource/csdk/stack/src/ocresource.c
Line 40: is this crossplatform ?
","B"
"648","Patch Set 3:

(1 comment)
resource/csdk/stack/src/ocresource.c
Line 40: <regex> will be.
","A"
"649","Topic set to csdk","C"
"650","Uploaded patch set 7.","C"
"651","Patch Set 6:

Is there a Jira ticket to fix the code?  If so I would add it to the commit as well. Without a Jira ticket the #if 0 is as bad as the block of commented out code.","B"
"652","Patch Set 7:

(1 comment)
resource/csdk/resource-directory/unittests/rdtests.cpp
Line 204: I don't think this is the way to handle the commented out code.  You should create a Jira ticket to fix the test.

This will create more noise in the output that will get ignored.

This will also make it so we will not be able to add the -Werror tag which is the only way to know for sure build warnings will be addressed.

Using Jira will mean this will be assigned to the developer that most likely has the knowledge to fix the issue.

I only say this because I have spent hours working on https://jira.iotivity.org/browse/IOT-2539 an this will just make that harder.
","A"
"653","Patch Set 7:

(2 comments)
resource/csdk/resource-directory/unittests/rdtests.cpp
Line 153: google test has a mechanism for disabling tests without commenting out the code

change this line

  TEST_F(RDTests, CreateRDPayload)

to 

  TEST_F(RDTests, DISABLED_CreateRDPayload)
Line 170: Add DISABLED_ and don't add the #if 0
","B"
"654","Patch Set 1:

maybe port to master 1st","A"
"655","Change has been successfully rebased as 199ff174d4e57fa37ebebbda1e12086941595ec4 by C.J. Collier","C"
"656","Patch Set 1: Code-Review+1

I still think you should add the BUILD_JAVA because till that option is added you really are not getting a full build.  Still this is a good start.","B"
"657","Patch Set 1: Code-Review-1

(1 comment)

that description sting needs updating
auto_build.py
Line 140: This should probably be different than the one above it
","A"
"658","Patch Set 3: Verified+1","C"
"659","Change has been successfully rebased as 2b78909a7d0a9f2c3299ea8a92b4afa9cd3030de by C.J. Collier","C"
"660","Patch Set 3:

(1 comment)
resource/c_common/SConscript
Line 37: When I have used this approach I've found that you still need to generate a src-dir specific path for the os.path.exists check, which will not get scons' path modification for variant.  that has been avoided here by using .abspath, which is not a disaster, but you can also generate the path-for-existcheck with Dir('.').srcnode().path and then avoid having to use abspath.
","A"
"661","Patch Set 3:

(1 comment)
resource/c_common/SConscript
Line 37: some changes of that sort are indeed pending in the 3-patch series on making variant work as expected (it's not 100% coverage, just proposed where I thought it was needed)
","B"
"662","Patch Set 6: Code-Review+1

(1 comment)

guess I'm okay with it.
resource/c_common/SConscript
Line 145: this can just be CPPPATH=""resource/c_common""
","A"
"663","Patch Set 6: Code-Review+1

I would prefer to see the creating of iotivity_config.h added to a custom builder but this is a reasonable step at this time.","B"
"664","Patch Set 7:

(1 comment)

I'm a little confused about the mkdir . code in c_common/SConscript, but it seems harmless.
resource/c_common/SConscript
Line 127: I don't know how the current directory could not exist, unless it was rm'd out from under us by a different process...
","B"
"665","Change has been successfully rebased as be01086f34e49a41340c5460881391f6879d66ac by Nathan Heldt-Sheller","C"
"666","Patch Set 11: Code-Review-2

Mistakenly submitted my comments against patchset 3, sorry.

Also, I checked this patch out and the CTT JustWorks OTM test fails... please do not merge until I've had a chance to investigate.","B"
"667","Patch Set 15: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","B"
"668","Patch Set 15: Code-Review-1

(17 comments)

Several logic errors need to be fixed, as well as fixing pre-existing bugs where setting deviceuuid also sets rowneruuid etc.
resource/csdk/security/src/srmutility.c
Line 171: surround this entire function in #ifndef NDEBUG to avoid wasted processing in release builds (also best to surround calls to this function in the same)

resource/csdk/security/src/credresource.c
Line 3119: remove this var as it's part of revert logic (see below)
Line 3133: remove this line as part of revert logic (see below)
Line 3143: please remove the revert logic... a failure to write to persistent storage should be logged, but the newly Set value should remain.

resource/csdk/security/src/aclresource.c
Line 957: remove extra space
Line 2047: I don't think this is correct... why are we checking for Nil UUID here?  Seems like this will cause the rowneruuid to be parsed only when /acl.rowneruuid is Nil UUID... but we should be able to update even if already set to non-Nil, which means we need to parse the value whenever present.  I think the logic change should be removed and just the logging improvements left.

resource/csdk/security/include/internal/pstatresource.h
Line 220: insert space after line 219

resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 2032: This is strange... we're basically setting the Server's /doxm.rowneruuid to the same value as this provisioningclient's /doxm.rowneruuid, right?  But what we should be doing is setting it to the provisioningclient's /doxm.deviceuuid.
Line 2478: It would be preferable to do this is two separate Update requests.  The Specification says that the /pstat.rowneruuid should be set, before changing /pstat.dos.s = RF_PRO.  This call happens to work because IoTivity applies the rowneruuid change before attempting to update dos.s, but that might not be the case with another stack.  

Not a critical fix in this case, but it would be best to first Update rowneruuid, then update dos.s.
Line 2480: Same as above: we should be setting the Server's /pstat.rowneruuid to the /doxm.deviceuuid of this provisioningclient Device.

resource/csdk/security/src/deviceonboardingstate.c
Line 119: uncomment this line (it should be checked)
Line 153: This is only meant to be logged, not cause a ""false"" return!
Prior code is correct:
VERIFY_SUCCESS(TAG, OC_STACK_OK == GetDoxmDeviceID(&tempUuid), ERROR);
    if (!IsNilUuid(&tempUuid))
    {
        OIC_LOG_V(INFO, TAG, ""%s: doxm.deviceuuid != Nil UUID... allowed but noted."",
            __func__);
    }

resource/csdk/security/src/doxmresource.c
Line 2014: This function should only ever set the deviceuuid property; please remove all other side effects such as setting owner or rowneruuid.
Line 2016: Please remove revert logic as with pstat.rowneruuid.
Line 2060: remove!
Line 2077: remove!
Line 2079: remove
","A"
"669","Patch Set 18: Code-Review-1

I don't see any issues with the code, but I cherry-picked this patch on to the current 1.3-rel HEAD, and ran CTT 1.5.28.  CT 1.7.12.3 seems to have a regression... it failed for me with this patch on top of commit 231614... just now.  Can you investigate please?","B"
"670","Patch Set 18: Patch Set 17 was rebased","C"
"671","Patch Set 19:

Abitha, we are trying to get this merged before RC6 so please let us know if you are about to tag.  I need to regression test before merging.","B"
"672","Patch Set 19: Code-Review+2","C"
"673","Patch Set 1:

(10 comments)

see comments inline
resource/csdk/security/src/credresource.c
Line 3140: Again prefer ""IsCredRowneruuidTheNilUuid()"" (and again flip the return booleans)

resource/csdk/security/src/aclresource.c
Line 4008: I'm not sure if this is right... we should free the cborPayload  in case of OC_STACK_OK (we should just always do it, since OICFree will do the right thing if cborPayload is still NULL). 

And regarding restoring prevId, if the PS update fails and we are here, we should not restore the previous ID, we should still leave it in gAcl but post an ERROR log message saying that the PS update failed.  In fact I can't think of any case in which we want to restore prevId, except if the memcpy new->gAcl fails, which we aren't checking.

Finally I'm not sure what the log message means... especially since in this case we're actually failing to set rownerid.  It should be WARNING and ""%s: failed to set rowneruuid."" message or something, right?
Line 4031: Prefer ""IsAclRowneruuidTheNilUuid()"".  Note that IsNilUuid() doesn't necessarily return ""true"" if the passed UUID is uninitialized... so !IsNilUuid() is not equivalent to ""IsUuidSetToSomethingBesidesNil()"".

resource/csdk/security/src/pstatresource.c
Line 865: Not sure why memcpy is preferred here, can you please clarify?  OicUuid_t doesn't require a deep copy so either should work, but I find the assignment operator more readable.

resource/csdk/security/src/deviceonboardingstate.c
Line 192: prefer !IsDoxmDevowneruuidTheNidUuid()
Line 195: same
Line 200: same
Line 202: same
Line 204: same
Line 206: same
","A"
"674","Patch Set 1:

Note: retrigged all jenkins tests","C"
"675","Patch Set 3:

(10 comments)
resource/csdk/security/src/srmutility.c
Line 157: add #ifndef NDEBUG around all the function contents so that in release build this function is a no-op.

resource/csdk/security/src/credresource.c
Line 3161: I know we do this in other SetXXX functions, but I worry: what if the intent of calling is to make sure the rowneruuid is saved to persistent storage?  For example if the rowneruuid was updated directly (without calling this function) and then this function was called?  The persistent storage step is skipped but there's no guarantee that the persistent version matches the current gRownerId, right?

resource/csdk/security/src/aclresource.c
Line 2057: Normally (in other CBOR->binary functions) this is a required step, so that if the CBOR doesn't contain the Property, we don't over-write the existing value in the binary structure... is the /acl Update handler doing something to avoid clobbering the rowneruuid at line 2948, if the CBOR payload doesn't contain a rowneruuid?
Line 3995: same concern as noted in credresource.c

resource/csdk/security/src/pstatresource.c
Line 865: nit: space after rownerID,

resource/csdk/security/src/doxmresource.c
Line 2105: some concern as noted in credresource.c
Line 2108: this should be removed (see below comment)
Line 2113: some concern as noted in credresource.c
Line 2116: this should be removed (see below comment)
Line 2137: I think we can remove this logic... we do not know that it's correct to un-do an Update to /doxm if the persistent storage step fails.
","A"
"676","Patch Set 3:

(4 comments)
resource/csdk/security/include/internal/credresource.h
Line 281: I know it's a detail but can you please name all ""IsXXXXXTheNilUuid"" consistently?  I prefer:
""IsSvrPropertyTheNilUuid()"" where the Svr is Pstat or Doxm or Cred, etc, and the Property is Rowneruuid, Devowneruuid, Deviceuuid (using the actual OCF Property name, not the IoTivity struct member name).

resource/csdk/security/include/internal/doxmresource.h
Line 294: I know it's a detail but can you please name all ""IsXXXXXTheNilUuid"" consistently?  I prefer:
""IsSvrPropertyTheNilUuid()"" where the Svr is Pstat or Doxm or Cred, etc, and the Property is Rowneruuid, Devowneruuid, Deviceuuid (using the actual OCF Property name, not the IoTivity struct member name).
Line 299: I know it's a detail but can you please name all ""IsXXXXXTheNilUuid"" consistently?  I prefer:
""IsSvrPropertyTheNilUuid()"" where the Svr is Pstat or Doxm or Cred, etc, and the Property is Rowneruuid, Devowneruuid, Deviceuuid (using the actual OCF Property name, not the IoTivity struct member name).

resource/csdk/security/include/internal/pstatresource.h
Line 229: I know it's a detail but can you please name all ""IsXXXXXTheNilUuid"" consistently?  I prefer:
""IsSvrPropertyTheNilUuid()"" where the Svr is Pstat or Doxm or Cred, etc, and the Property is Rowneruuid, Devowneruuid, Deviceuuid (using the actual OCF Property name, not the IoTivity struct member name).
","A"
"677","Change has been successfully rebased as 7f9d8c71fadc2eb8968e953f78e3b4afce262c52 by Nathan Heldt-Sheller","C"
"678","Patch Set 2:

(sorry, mis-clicked +2!)

I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done. I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.","B"
"679","Patch Set 2: Code-Review-2","C"
"680","Patch Set 3:

(2 comments)
resource/csdk/connectivity/common/inc/parsechain.h
Line 37: of
Line 45: add @param for certs
","B"
"681","Patch Set 3:

Abitha, we are trying to get this merged before RC6 so please let us know if you are about to tag.  I need to regression test before merging.","B"
"682","Patch Set 4: Reverted

This patchset was reverted in change: I49ef4487ff3ffd0f61f570b8f9159641934825e4","C"
"683","Patch Set 4: Reverted

This patchset was reverted in change: I931c2be5e5fa3be432955a8ca7929452e44c0a97","C"
"684","Patch Set 4: Reverted

This patchset was reverted in change: Ib727fc2a7df76e8f6bf0b5f820b074fc32609992","C"
"685","Patch Set 4: Reverted

This patchset was reverted in change: Id89773e80e4b770be809e6b3dff533b9e068fd50","C"
"686","Patch Set 1:

This change does fix the problem. I don't know if this header was intended to be a public header file.","B"
"687","Patch Set 1: Code-Review+1

Please comment this related change:

https://gerrit.iotivity.org/gerrit/#/c/13047/","C"
"688","Patch Set 3: Code-Review+1

This fixes the issue but I still don't really know if the this should be made into a public header. Or if the other headers should be reworked to hide the types data types that are in the ownershiptransfermanager","B"
"689","Patch Set 4:

> I am ok to put all headers in include dir and rely on scon scripts
 > to remove or relocate to /unstable/ or /experimental/ subfolders,
 > then we can decide what to expose without loosing history

I would feel a lot more comfortable if we had the corresponding UserInstallTargetHeader calls ready for review too. Otherwise I don't see much value in this patch, and it can definitely create confusion.","A"
"690","Patch Set 4:

I am ok to put all headers in include dir and rely on scon scripts to remove or relocate to /unstable/ or /experimental/ subfolders, then we can decide what to expose without loosing history","B"
"691","Patch Set 4:

Please cherry pick to master","B"
"692","Patch Set 4:

Quick update after my vacation:

I vote for following the securevirtualresourcetypes.h model from https://gerrit.iotivity.org/gerrit/#/c/21549/8/resource/csdk/security/SConscript.","B"
"693","Patch Set 4: Code-Review+1

Does this relate to:

https://gerrit.iotivity.org/gerrit/#/c/12357/","B"
"694","Patch Set 4: Code-Review+1

Please see comments on my other +1's","C"
"695","Patch Set 4: Code-Review-1

I think we should create %{buildroot}%{_includedir}/experimental/ for this kind of header files that need future improvements. It should be clear that we'll most likely need to make breaking changes to this header file, in the future. 

Example of improvements needed here:
- Should securevirtualresourcetypes.h and everything inside it be Public?
- Public APIs should have consistent names, but ConfigSelfOwnership is not consistent with the other names from the same file
- Etc.","A"
"696","Patch Set 1:

Just a reminder since you already plan to move to master, please abandon when you are done.","B"
"697","Patch Set 1:

The change looks fine to me but I don't really understand the reason for the change. Was there a change in the spec?","C"
"698","Patch Set 1: Code-Review-2

""x.org.iotivity.tcp"" is final one. There was revert-and-revert again before.","B"
"699","Patch Set 1:

(1 comment)

Let's pick it to master ?
resource/csdk/security/provisioning/src/secureresourceprovider.c
Line 521: OK
It's tested in call:

void DeleteCredList(OicSecCred_t* cred)
{
    if (cred)
    {

Could be set to null afterwards
","A"
"700","Patch Set 1:

(1 comment)
resource/csdk/security/provisioning/src/secureresourceprovider.c
Line 519: with &&
","C"
"701","Patch Set 1:

Ah, sorry Todd I missed the ""Bug:"" tag.  I was looking for ""[IOT-2828]"" ahead of the commit msg title.  Ignore my comment; I'll take a look at 2828.","C"
"702","Patch Set 1:

Todd can you please create a JIRA issue that described the problem this patch is addressing, and then update the commit message to include the IOT-nnnn info?  If there's a problem that we can fix in 1.3.1-RC6 I'd like to understand it.","B"
"703","Patch Set 1: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","A"
"704","Patch Set 1: Cherry Picked

This patchset was cherry picked to branch master as commit dc52bb3af68bca943f3cbdbe1d85a6aee34ae207","C"
"705","Patch Set 1: Code-Review+1

(1 comment)
resource/csdk/security/provisioning/src/secureresourceprovider.c
Line 519: credInfo should be there maybe
","B"
"706","Patch Set 1: Code-Review+1

I don't think I understand what's going on here well enough to really weigh in on this, but if this fixes the problem, okay.","C"
"707","Patch Set 1: Code-Review-2

Let's wait and merge this after tagging RC5 as it's not CTT blocking.  Please raise this again with a comment (against 1.3-rel is fine) once 1.3.1 tagging is done.","B"
"708","Patch Set 1:

(1 comment)
resource/csdk/security/unittest/policyengine.cpp
Line 239: It's OK, and there are no specific coding style rules relative to this, but usually it do in this way (at least in my practice).
","C"
"709","Patch Set 1:

(1 comment)
resource/csdk/security/unittest/policyengine.cpp
Line 304: Good point... perhaps make this a parameter, and pass a hard-coded (#def'd) value from the TEST function?
","C"
"710","Patch Set 1:

(2 comments)
resource/csdk/security/unittest/policyengine.cpp
Line 239: If helpers functions are used only inside this unittest source file, it is better to move helpers implementation to the top and remove preliminary declaration.
Line 304: Is it ok to use such hardcoded values in helpers?
It is normal in TEST functions, but not here (IMO)
Maybe better to use some defined constants or func parameter, or both?
","A"
"711","Patch Set 1:

(8 comments)

These looks really good and a big addition to our unit testing.  Once you address my comments and Jenkins passes, I'll pull and verify locally before we merge.  Thanks!!
resource/csdk/security/unittest/oic_unittest_policyengine.json
Line 84: These Nil Values combined with dos.s = 3 may present issues as this is technically an illegal state... suggest changing all SVR.*owner UUIDs from Nil UUID to ""1010101010-1010-etc"" as a generic ""OBT"" UUID.

resource/csdk/security/src/aclresource.c
Line 4033: IoTivity coding standards require zero trailing whitespace (usually something you can configure in your editor to trim whitespace on save)
Line 4091: This should be in the logCurrentAcl() function itself, so that it's not printed when logging a non-gAcl-acl!
Line 4092: we have a VERIFY_NOT_NULL() macro if you want to use it here
Line 4098: to be clearer I prefer ""/acl2.rowneruuid:"" or ""rowneruuid:""

resource/csdk/security/unittest/policyengine.cpp
Line 47: Is it possible to move this out to a more generically-reusable ""unit test helper methods"" file?  I think this is going to be re-used in several other tests, don't you?
Line 99: looks correct, thanks

resource/csdk/security/include/internal/aclresource.h
Line 45: prefer ""logCurrentAcl()"" (note ""rr"" instead of ""rrr"")
","A"
"712","Patch Set 3:

Steve I'd really like to get these into master... can you cherry pick over, and abandon this patch to 1.3-rel?","C"
"713","Patch Set 13:

It appears one of the unit tests is failing:
12:56:21 [  FAILED  ] EasysetupEnrolleeTest.CloudServerProperiesProvisionedWithSuccess (1006 ms)","C"
"714","Patch Set 18:

Anyone can take back this patch and eventually please push to master","C"
"715","Patch Set 18: -Code-Review

RC5 is tagged, so I'm removing -2.  PLEASE NOTE: We still need to be very conservative with what we merge into 1.3-rel, so please make sure you (or someone else) has run your patch against the CTT to check for regressions before merging.","A"
"716","Patch Set 18: Code-Review-2

I'm giving this a -2 just to make sure we don't merge anything non-CTT-critical until the 1.3.1 final RC tag is done. I'll then remove this -2; please ping me with a reminder if it sits for more than a day after the final 1.3.1 RC tag is done.","B"
"717","Patch Set 18: Code-Review-2

This feature was removed from CTT testing because of usability concerns, and also may be removed from Bangkok Security Specification (TBD on SecWG discussion), so definitely this patch should stay ""on ice"" until its verified that it will be normatively required in the next OCF Specification release.","B"
"718","Patch Set 4: Cherry Picked

This patchset was cherry picked to branch master as commit 1c6c98ac5dad7879268a1d26e2eedfc0f25605d4","C"
"719","Patch Set 1: Code-Review+1

(2 comments)
/COMMIT_MSG
Line 11: fix typo: details
Line 12: did you mean ""Semantics""?
","C"
"720","Patch Set 2:

There is a bug with the missing-field-initializers but it is limited to older compilers.

I would suggest this fix:
https://gerrit.iotivity.org/gerrit/22743/","B"
"721","Patch Set 2: Code-Review-1

(1 comment)
build_common/linux/SConscript
Line 60: At the moment this violates a principle listed in the iotivity C/C++ coding standards listed on the wiki. Those may be violated elsewhere, but before adding another exception we should get some kind of approval we don't actually care about that requirement (and remove it):

""Code must compile with no warnings at the standard warning level without flags forcing any warnings off.""
","A"
"722","Patch Set 3:

Comment left on the Jira ticket.","B"
"723","Patch Set 3:

Phil I think this can be abandoned see this commit.
https://gerrit.iotivity.org/gerrit/#/c/22743/

The reason for the missing-field-initializers is a bug in gcc an that gerrit ticket lists why it is ignored but it limits it to the version of gcc that it is a problem on.","B"
"724","Patch Set 36:

The change is good... but it looks like the unit tests are not close to passing, and it's not a memory leak issue.  Jenkins is reporting: Test Result (23 failures / +23). I don't even see the valgrind results getting exmined. Why is this marked MLK?","A"
"725","Patch Set 38:

maybe change commit msg to show the test update is needed first?  it is still failing badly.","B"
"726","Patch Set 1:

(1 comment)
service/notification/SConscript
Line 33: eh? does every compiler support this? or am I missing something?
","C"
"727","Patch Set 3:

(1 comment)
service/notification/SConscript
Line 37: okay, so this *is* also a gcc option. So they why does the commit msg say ""for clang"".  it's also my understanding that at least for gcc it is not useful unless also used at compile time, so how is adding it to LINKFLAGS only interesting?
","B"
"728","Patch Set 4: Code-Review-1

(2 comments)

-1 due getting wrong target_os
service/notification/SConscript
Line 28: I doubt this is what you wanted.
Line 36: this is the better fix than appending 'gcov' to LIBS.  however, does this need to be down here?  should it not be able to be passed down from the top level - build_common/linux/SConscript and if to be used for tizen, build_common/tizen/SConscript.
","B"
"729","Patch Set 5: Code-Review+1

OKay now.  I'd still prefer to see this set more globally, gcov stuff is scattered in 20 scripts now at current count. (and it already is set in build_common/linux/SConscript so it should be global)","B"
"730","Change has been successfully cherry-picked as 97fd51ba4a3ae236973dda82dc30824a0d853564 by Randeep Singh","C"
"731","Patch Set 2:

It was not picked to master

https://gerrit.iotivity.org/gerrit/#/c/17215/

Can someone double check for 1.3-rel ?","B"
"732","Patch Set 2:

Please check if it is needed for master or 1.3-rel

https://gerrit.iotivity.org/gerrit/#/c/17215/","B"
"733","Patch Set 2:

Please cherry-pick it to master","B"
"734","Patch Set 1:

I would have put an exit code instead of commenting it","C"
"735","Patch Set 1:

It is supposed to be used 
   //TODO fill in from OIC Security Spec

Isn't it ?","C"
"736","Patch Set 1:

yes and add a bug id to the TODO line if any
#warning ""TODO: $url"" ;)","A"
"737","Patch Set 2: Code-Review-1

remove code or surround w/ #if 0 is better than commenting it","A"
"738","Patch Set 3:

(1 comment)
resource/csdk/security/include/securevirtualresourcetypes.h
Line 541: remove code or surround with #if 0 better than comments

Maybe rebase on :
https://gerrit.iotivity.org/gerrit/#/c/18331/
","A"
"739","Patch Set 3:

please rebase 

is there an open bug id related to this ?","C"
"740","Patch Set 3:

please rebase or abandon","C"
"741","Patch Set 3: Code-Review-1

better use #if 0 instead of comment, or just delete code","B"
"742","Patch Set 2:

Commit message :

 * all lines must be wrapped at 74 characters or less .. please modify the commit message","A"
"743","Patch Set 2:

ping","C"
"744","Patch Set 2: Code-Review+1

May you rebase on this :
https://gerrit.iotivity.org/gerrit/#/c/9085/3","B"
"745","Patch Set 6:

Ready to be submitted ?","C"
"746","Patch Set 6: Code-Review+2","C"
"747","Patch Set 9: Code-Review+1

Correct C++.","C"
"748","Patch Set 9: Code-Review+1

Whatever happened to this one?","C"
"749","Topic set to resource","C"
"750","Uploaded patch set 10.","C"
"751","Change has been successfully cherry-picked as ca128bf71a5cbc32874e27bc3ba85c12f137fbb9 by Randeep Singh","C"
"752","Patch Set 2:

(1 comment)

not expert on security but it looks ok

should it be pushed to master 1st ?
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 504: I would have put it on 3 lines...

can't we use bit masks to avoid this?
","B"
"753","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 504: i think its ok for now, later on can be considered while OTM refactoring. Jongmin please share your views on this ?
","B"
"754","Patch Set 3:

Please double check if present in 1.3-rel

https://gerrit.iotivity.org/gerrit/#/c/17211/
was not merged in master","B"
"755","Patch Set 3: Cherry Picked

This patchset was cherry picked to branch master as commit c33077fc1062da9c572082b764fe1aeaafad6d7e","C"
"756","Patch Set 2:

Won't it disable jenkins verification for BT ?","C"
"757","Patch Set 3:

It would be better if CI verify BT transport as well.","B"
"758","Patch Set 3:

@Uze, It's picked from master, so I guess it's safe to merge ?","C"
"759","Patch Set 2:

Please summit to master if needed","B"
"760","Patch Set 12: Published edit on patch set 11","B"
"761","Patch Set 14:

Please summit to master if needed","B"
"762","Patch Set 5:

Please review more and justify why it should be in next RC.

Thanks","C"
"763","Uploaded patch set 11.","C"
"764","Uploaded patch set 13.","C"
"765","Patch Set 1: Code-Review-1

(1 comment)
test/build/tizen/common/com.oic.common.test.spec
Line 6: Version and Release shouldn't be changed here. Those value changed dynamically using tools/tizen/iotivity.spec file when building for tizen
","A"
"766","Patch Set 1: Code-Review-1

(5 comments)
test/src/iBtestapp/modules/re/android/src/org/iotivity/test/re/app/MainActivity.java
Line 65: 6 has been removed and made as 7 why?

test/src/iBtestapp/modules/ri/android/src/org/iotivity/test/ri/app/RITestAppAction.java
Line 133: Spaces

test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/PMHelper.java
Line 495: Code alignment is missing

test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/OCPlatformHelper.java
Line 115: code alignment

test/src/iBtestapp/modules/pm/c_cpp/cpp/src/PMCppAppMotHelper.cpp
Line 65: Tabs have been used instead of spaces
","B"
"767","Patch Set 3: Code-Review-1

(6 comments)
test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/Light.java
Line 4: ???
Line 22: Please change FileName with Proper convention

test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/PMHelper.java
Line 493: ??

test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/Action.java
Line 1: Please follow proper naming convention
ex: PMAction or PMActionHelper
change File Name

test/src/iBtestapp/modules/pm/c_cpp/cpp/include/PMCppAppMotHelper.h
Line 1: ????

test/src/iBtestapp/modules/ns/c_cpp/cpp/src/NSProviderCppApp.cpp
Line 518: dead code
","B"
"768","Patch Set 1: Code-Review-1

I think you accidentally placed this change in the wrong branch. Please double-check.","B"
"769","Patch Set 1:

weird is target_os not set to windows ?","B"
"770","Change has been successfully cherry-picked as 3a61eec7227d430108436411f09f8ce0c9224913 by Rick Bell","C"
"771","Patch Set 2: Code-Review+1

maybe this warning could be just removed","B"
"772","Patch Set 3:

> Can you try to pick to 1.2-rel using gerrit, it raises error 500
 > for me

I see the same.","C"
"773","Patch Set 3:

Can you try to pick to 1.2-rel using gerrit, it raises error 500 for me","C"
"774","Change has been successfully merged by Towhidul Islam","B"
"775","Patch Set 9:

reverify

: not understanding this fail, doesn't look like the usual transients, but let's brute-force a retry","B"
"776","Patch Set 2:

Hi Phil, I'm not sure exactly what you're asking.  Won't this get slurped in when 1.3 is merged into master?","C"
"777","Change has been successfully merged by Dan Mihai","B"
"778","Patch Set 1: Code-Review+1

+1 for my patches","C"
"779","Patch Set 2:

Unless a major issue is found in RC5, I propose to merge it soon.

meanwhile free to add additional reviewers (those listed in linked changes)","B"
"780","Patch Set 2:

this is marked as conflict with 22733, another merge commit. which do we want? or both?","C"
"781","Patch Set 2:

this one is preferred, I didn't notice it was pending before merging again","B"
"782","Patch Set 2: Code-Review+1

I don't see anything here that would cause problems for me.","C"
"783","Patch Set 3: Code-Review+1

(5 comments)
service/easy-setup/mediator/richsdk/unittests/SConscript
Line 90: dont you usually add ',' at end of lists ?

resource/csdk/logger/SConscript
Line 55: Do you think all common stuff should land there ?

resource/csdk/routing/SConscript
Line 28: why this extra # ? do you plan to remove it later ?

service/easy-setup/mediator/richsdk/SConscript
Line 44: I would create a variable and use a single Append
Line 66: XXX ?
","B"
"784","Change has been successfully rebased as 630bb71b3db87f0e8da61574c9925350c815b19c by C.J. Collier","C"
"785","Patch Set 3:

CJ can you also merge this one since https://gerrit.iotivity.org/gerrit/#/c/23103 is already merged","B"
"786","Patch Set 3: Code-Review+1

I cherry picked Mats change for https://gerrit.iotivity.org/gerrit/#/c/22525/ from master to 1.3-rel. That review is here: https://gerrit.iotivity.org/gerrit/#/c/23103/
With these 2 changes we can build with SCons 3.0 in 1.3-rel branch.

This is needed to enable building iotivity for UWP apps","B"
"787","Change has been successfully rebased as 231614df25368738168a67336f4a73d748d482d6 by Mushfiqul Islam","C"
"788","Patch Set 2:

George, can you take a look at this with an eye towards the new API parameter?","C"
"789","Patch Set 3:

I have issues when trying to build this on android. 

I get a scons error Two environments with different actions were specified for the same target sqlite3.o

build command used: scons TARGET_OS=android RD_MODE=CLIENT,SERVER

I tried building without this patch and found the same issue in the scons script. Do we expect RD_MODE to build on android. It appears it may have broke in the past making it hard to verify this change with regards to android.","B"
"790","Patch Set 3:

I think the android issue is a separate issue and can be addressed outside this patch. We may want to create a Jira ticket for the issue.  It would probably be a good idea to add IOT-1935 as a relates to Jira ticket since I suspect this change will force code changes in the android code.","B"
"791","Patch Set 4:

Thanks George, I created https://jira.iotivity.org/browse/IOT-2871 to track the build issue.","B"
"792","Patch Set 4:

reverify","C"
"793","Patch Set 4: Code-Review+1

I also verified that the Android build will build when RD_MODE=CLIENT","B"
"794","Patch Set 4: Code-Review+1

The patch works fine. Resources are being deleted from RD when TLL is passed now.","C"
"795","Patch Set 5:

It looks some investigations should be done to pass tests ? No","C"
"796","Topic set to next","C"
"797","Change has been successfully rebased as a2b20dc4d78ca6af54731b0fac9509c2c608a43d by Nathan Heldt-Sheller","C"
"798","Patch Set 2: Code-Review+1

(2 comments)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 2034: check for returned error?
Line 2477: check for returned error?
","C"
"799","Patch Set 6:

Assuming this was meant to fix smoke test, I ran provisioninclient + sampleserver_justworks after applying this patch, here's what I saw

>> Enter Menu Number: 10

   Discovering All Un/Owned Devices on Network..
   > Discovered Owned Devices
     Device List is Empty..
   > Discovered Unowned Devices
     [1] 12345678-1234-1234-1234-123456789012    ocf.1.1.0

>> Enter Menu Number: 20

   Registering All Discovered Unowned Devices..
   02:22.573 ERROR: provisioningclient: OCProvisionCredentials callback error
   02:22.573 ERROR: provisioningclient: _20_REGIST_DEVS_: error     

So looks like smoke test still broken?

Interestingly, I did a  follow-on ""10"" after this, and even with the above error, looks like provisioning client thinks OTM was successful?

>> Enter Menu Number: 10

   Discovering All Un/Owned Devices on Network..
   > Discovered Owned Devices
     [1] 12345678-1234-1234-1234-123456789012    ocf.1.1.0
   > Discovered Unowned Devices
     Device List is Empty..","B"
"800","Change has been successfully merged by C.J. Collier","B"
"801","Patch Set 1:

(1 comment)
java/SConscript
Line 165: That's an error I didn't catch (the file in master looks like this).  Yes, done by the Python-supplied 2to3 script, which is not smart, it wraps prints in parens even if they were already wrapped.
","B"
"802","Patch Set 1:

19:17:09 Build step 'Publish Valgrind results' changed build result to FAILURE

I think this is due to the illegal memory access, I'm not yet understanding this one:

https://build.iotivity.org/ci/job/iotivity-verify-unit_tests/19668/valgrindResult/pid=12088,0x2/","B"
"803","Patch Set 1:

> reverify

This may well pass on retry, but looks like a real error - reference through an uninit field apparently (presumably it's normally okay since 1.3 builds normally work). I recall fixing one of these (empty uuid, passed up through the chain, ended up being treated as if it were valid), and you had one with the database path.  I'm not sure where the problem is introduced without digging much deeper.","B"
"804","Patch Set 1: Code-Review+1

(1 comment)
java/SConscript
Line 165: are the double parentheses added because the inline concatenation? or is it because a find and replace script was used to find all instances of print?
","C"
"805","Patch Set 2:

Mats if you +1 this I'll +2 it.","C"
"806","Change has been successfully rebased as 0d010e4b64ff853fefb6e55038e6ecaa072fc760 by Mats Wichmann","C"
"807","Patch Set 2: Code-Review+1

the gtest_output can be used as a commandline argument as well. Still works as an environment variable so I see no problem with this commit.","B"
"808","Patch Set 3: Cherry Picked

This patchset was cherry picked to branch 1.3-rel as commit 072b0de187a5a87b2a6ff768da0105d9368ffd5d","C"
"809","Patch Set 4: Code-Review+1

CT1.7.8.3 is passing now on my WiFi network. Great work Veeraj!","B"
"810","Change has been successfully rebased as 031a247de874890330cb1582a0db85425b6bd2b6 by Mats Wichmann","C"
"811","Patch Set 1:

Ibrahim, you may merge if you feel comfortable with the review.","C"
"812","Patch Set 1:

There's not really anything wrong with this, but now we have two special cases, the other one being ""cross compiling"", where we also can't run a binary that's just been built because host != target. Be nice to unify the approaches somehow.","A"
"813","Patch Set 1:

see the definition of ScanJson in build_common/SConscript, or poke pcoval.","B"
"814","Patch Set 1: Code-Review+1

okay then.","C"
"815","Patch Set 1:

The patches to do this were covered in https://gerrit.iotivity.org/gerrit/#/c/22635/ and https://gerrit.iotivity.org/gerrit/#/c/22525/ which already merged to master.  I'm doubtful we'll get these through 1.3-rel at the moment, maybe after 1.3.1 releases?","B"
"816","Change has been successfully rebased as 6f6a467358c1a020eac5c2ca4971f0b6b8254225 by Mushfiqul Islam","C"
"817","Patch Set 1: Code-Review+1

(1 comment)
resource/csdk/stack/src/ocresource.c
Line 1939: nit. extra space.
","C"
"818","Patch Set 3:

*Note: @Senthil confirm after verifying this with CTT and try to get it merged before next RC tagging.","B"
"819","Patch Set 5: Code-Review+2 Verified+1

This is CTT related patch. From the clasa extension view, evaluate this patch validity and fix if needed.","B"
"820","Change has been successfully rebased as e3cebd00894889dab738e5fc318101b12517d187 by Uze Choi","C"
"821","Patch Set 11:

seems like a UT failed in jenkins build :

09:09:46 /home/jenkins-ci/workspace/iotivity-verify-unit_tests/out/linux/x86_64/debug/service/scene-manager/unittests/remote_scene_list_test
09:09:46 Running main() from gtest_main.cc
09:09:46 [==========] Running 2 tests from 1 test case.
09:09:46 [----------] Global test environment set-up.
09:09:46 [----------] 2 tests from RemoteSceneListTest
09:09:46 [ RUN      ] RemoteSceneListTest.createRemoteSceneListInstance
09:09:48 terminate called after throwing an instance of 'OC::OCException'
09:09:48   what():  Error: OptionID valid only If-Match(1), If-None-Match(5),Location-Path(8), Location-Query(20),and from 2048 to 3000 inclusive.","A"
"822","Patch Set 11: Code-Review-1

(1 comment)
resource/include/OCHeaderOption.h
Line 56: currently OCHeaderOption.h appears to be public, in which case a breaking change is not ok.  It's ok to add new things to it, and to mark existing things as @deprecated, but not ok to remove old things like CONTENT_TYPE_OPTION_ID.

Only if this file is labeled ""experimental"" would that be ok.
","A"
"823","Patch Set 1:

(1 comment)
resource/include/ResourceInitException.h
Line 34: I would add it the end and use default parameters
","B"
"824","Patch Set 1: Cherry Picked

This patchset was cherry picked to branch 1.3-rel as commit e67281fefea6ac3a9fa903599cd249a2364e1730","C"
"825","Patch Set 1: Code-Review+1

(1 comment)
resource/include/StringConstants.h
Line 42: extra space can be removed here
","C"
"826","Patch Set 2: Code-Review+1

more reviewers welcome","C"
"827","Patch Set 3: Code-Review-1

Please check comments in:
https://gerrit.iotivity.org/gerrit/#/c/21957/","B"
"828","Patch Set 4:

see about linking bugid

http://wiki.iotivity.org/contribute","B"
"829","Patch Set 4: Code-Review-1

(1 comment)
resource/include/ResourceInitException.h
Line 34: This is currently a public header file and so breaking changes are not allowed.  You can add a second constructor with this prototype but you should not delete the old one.
","A"
"830","Patch Set 4: -Code-Review

Why the removal?  OCByteStringCopy does do allocation.","B"
"831","Patch Set 1:

(1 comment)
plugins/zigbee_wrapper/src/SConscript
Line 72: I guess that those plugins are loaded using dlopen so better have everything in ? it worth to be tested
","A"
"832","Patch Set 1:

(1 comment)
plugins/zigbee_wrapper/telegesis_wrapper/src/SConscript
Line 57: please can you confirm and test plugin is loading fine without those objects ?
","A"
"833","Patch Set 1:

(2 comments)

unsure it will work, we could duplicate linked objects instead
plugins/zigbee_wrapper/src/SConscript
Line 72: should nt those remain ?

plugins/samples/linux/SConscript
Line 32: we tend to use #/ prefix don't we ?
","A"
"834","Patch Set 1:

maybe this should be in 1.3-rel first","B"
"835","Patch Set 6: Code-Review+1

(1 comment)
plugins/zigbee_wrapper/telegesis_wrapper/SConscript
Line 28: this could be in isolated cleanup change
","B"
"836","Patch Set 8: Code-Review+1

(1 comment)
plugins/samples/linux/SConscript
Line 36: nit: preference for `#/` I feel it make is clear that it represents path information.
","C"
"837","Patch Set 4:

I don't see anything that stands out as a problem.","C"
"838","Patch Set 5:

(1 comment)
tools/vagrant/Vagrantfile
Line 76: nit: use spaces to remain consistan.
","C"
"839","Patch Set 7:

I don't have a way to test the scripts but I don't see anything else that stands out.","C"
"840","Patch Set 2:

(16 comments)

Dave I am still working though the commit.  Here are my initial questions. I am sure I will have much more as I keep working though the change.

from the looks of it I still have 2/3 of the code left to review.
resource/csdk/connectivity/inc/cainterfacecontroller.h
Line 186: documentation cleanup that could be moved to master.

resource/csdk/connectivity/inc/caipadapter.h
Line 141: documentation cleanup that could be moved to master.

resource/csdk/connectivity/api/cacommon.h
Line 616: is this really device independent?  Wouldn't the ipv4/ipv6 be a attribute of the platform not the device?
Line 662: you tell me what ocState is not but I have no clue what it actually is.

It this everything to do with the device that is not connection related?
Line 789: could add code sample here

Example:

  CALocalDevice_t *myDevice = CACreateLocalDevice(false, true);
  CASetPortNumberTosAssign(myDevice, my_transport_adapter, my_flags, 75657);
  CAStartLocalDevice(myDevice)

This is not needed but it could improve the quality of the documentation for future developers.

Doxygen supports markdown style syntax and so for a minimum you could use `CAStartLocalDevice` and `CASetPortNumberToAssign()` to make it display fixed width font (that is the back tick ""`"" character).
Line 808: If is local device has muliple local references and this is called will is still be deleted or will the ref count be decremented?

If it is deleted then we will need a function to check the ref count to decided if this should really be deleted.
Line 828: need 
  @return
    - returns true if device is OC_SERVER
    - returns false if device is OC_CLIENT
    - returns true if device is OC_CLIENT_SERVER
    - returns true if device is OC_GATEWAY

I am just giving examples I am not sure that about the actual return values.

resource/csdk/connectivity/inc/camessagehandler.h
Line 113: Just wondering do you know of a way to test single threaded code on a multi threaded machine?

resource/csdk/connectivity/src/cainterfacecontroller.c
Line 426: should this assert be an if statement instead of an assert?
Line 441: how hard would this be to move out?

I assume it would not actually be that hard but you just don't want to do it for this first commit.
Line 503: would this make more since if it were

  if (result == 0)

I know that in C int can be treated like a boolean but the refCount is a number not a boolean.

resource/csdk/connectivity/api/cainterface.h
Line 152: This is an API breaking change. Not sure how to handle this. In C++ it could be easy to just use function overloading and use the default device.

Should we add a CACreateEndpointX(...) where X is the updated API while adjusting the code for CACreateEndpoint to use the default device so it continues to work as before?

  CAResult_t CACreateEndpoint(CATransportFlags_t, ...)
  CAResult_t CACreateEndpointa(CALocalDevice_t*, CATransportFlags_t, ...) 


This is the only place I am going to ask this question but it shows up in many other locations.
","A"
"841","Patch Set 2:

Also there is currently a build error on linux with this change.

resource/csdk/connectivity/src/ip_adapter/linux/caipnwmonitor.c: In function 'CAIPGetInterfaceInformation':
resource/csdk/connectivity/src/ip_adapter/linux/caipnwmonitor.c:461:49: error: 'struct sockets' has no member named 'ipv6enabled'
         if ((family == AF_INET6 && !caglobals.ip.ipv6enabled) ||
                                                 ^
resource/csdk/connectivity/src/ip_adapter/linux/caipnwmonitor.c:462:48: error: 'struct sockets' has no member named 'ipv4enabled'
             (family == AF_INET && !caglobals.ip.ipv4enabled))


If you have not looked at the error I will try and look once I have finished the code review.","A"
"842","Patch Set 3:

(1 comment)

Given you feed back I think we should get this committed as soon as possible so we can start testing and working with the code. Note I still have not been able to build the code locally.
resource/csdk/routing/include/routingmanager.h
Line 30: Thanks,  Sorry I was basing my comment off of the fact that the routingmanager.h was not in a folder called internal and I for some reason though it was part of the public headers.

Thanks
","A"
"843","Patch Set 3:

(4 comments)
resource/csdk/stack/src/ocstack.c
Line 694: change to space.
Line 751: change to spaces.

resource/csdk/security/src/pconfresource.c
Line 1193: looks like this should be annotated [in,out]

resource/csdk/routing/include/routingmanager.h
Line 30: if this is an internal header it should not be included in a public header.
","B"
"844","Patch Set 3:

All of the comments I left are minor except maybe the private header in a public header.","B"
"845","Patch Set 3:

David - Are you working on rebase so this builds and we can test against it?","C"
"846","Patch Set 3:

https://build.iotivity.org/ci/job/iotivity-verify-windows-amd64-vs2015/2009/consoleText :

I vaguely remember seeing this kind of failure:

[  FAILED  ] CAGetNetworkInformationTest.EnableIPV6

in 1.3-rel recently. So, 1.3-rel might have a fix for that already.","B"
"847","Patch Set 3: Code-Review-1

(4 comments)
resource/csdk/routing/src/routingmanagerinterface.c
Line 146: OCClientResponce does not contain a localDevice param.
Line 237: OCClientResponce does not contain a localDevice param.

resource/csdk/connectivity/api/cacommon.h
Line 616: Thanks that makes since.

resource/csdk/connectivity/api/cainterface.h
Line 152: You are correct this one is not a public header. I think there are other locations that are in public headers.  How are you planning on handling those?
","A"
"848","Change has been successfully rebased as 23f8cebb45771f789c757ef67c7648efc8dfa779 by Towhidul Islam","C"
"849","Patch Set 2: Code-Review-1

(1 comment)
test/src/testapp/IUTSimulatorApp/c_cpp/IUTSimulator.cpp
Line 1870: please use variable instead of hard coded value
","B"
"850","Change has been successfully rebased as 813b4c437a5f311249b3afe12de29db95e39840a by Mushfiqul Islam","C"
"851","Patch Set 1: Code-Review-1

(4 comments)

Please refer to the comments on each file.
test/src/tc/rd/gtest/include/RDHelper.h
Line 165: tabs should be replaced by 4 spaces.

test/src/tc/rd/gtest/src/btc/RDServerTest.cpp
Line 210: Are these TCs obsolete, or requires rework because of API change? 
If they can be used in future by some rework, then I think it is better to block them by #ifdef, instead of commenting them as dead code.

test/src/tc/rd/gtest/src/helper/RDHelper.cpp
Line 281: I think using #ifdef is better

test/src/tc/rd/gtest/src/stc/RDServerIntegrationTest.cpp
Line 335: I think using #ifdef is better
","A"
"852","Change has been successfully rebased as 0d2bc99d967d30c8271a7b0be4e21c24cd780100 by Mushfiqul Islam","C"
"853","Patch Set 1: Code-Review+1

Looks fine","C"
"854","Patch Set 1: Code-Review+1

Recent email response from Wouter is that introspection should use HTTP response codes. So 200 should be ok. Sorrt for the mess, but it was originating from a real rtest failure.","B"
"855","Patch Set 1: Code-Review-1

CoAP does not use 200 response code: 205 is used for GET, and 204 for POST. At least some versions of the Certification Tool (CTT) required an explicit code in the schema, so 200 wasn't good. Maybe the behavior had changed, but it should be confirmed with the experts.","B"
"856","Change has been successfully rebased as 4c89aa4b6a291f90769de69d187686609d228c11 by Nathan Heldt-Sheller","C"
"857","Patch Set 2:

(1 comment)
resource/csdk/security/src/doxmresource.c
Line 1638: This code is being removed, not added. What's the problem?
","C"
"858","Patch Set 2:

IOT-2859","C"
"859","Patch Set 2:

If not, we have a second release coming as soon as 1.3.1 is tagged, and I'd like to wait to merge anything non-critical until after that tag is created.","B"
"860","Patch Set 2:

Is this causing a cert failure or critical security issue?","C"
"861","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/security/src/doxmresource.c
Line 1638: Ah, thanks... I've clearly exceeded my parallel operations capacity.  Thanks Kevin.
","C"
"862","Patch Set 2: Code-Review-1

(1 comment)
resource/csdk/security/src/doxmresource.c
Line 1638: Is this really the right place to do this, in every single Post Handler request?  Shouldn't it instead be in the ""StartOwnershipTransfer()"" code path, or similar?  This seems like an over-brute-force way to make sure the two functions get called.
","B"
"863","Change has been successfully rebased as 92efeea0ecce326f4cd2692cf424b9ffe13fe536 by Mats Wichmann","C"
"864","Change has been successfully rebased as 754d84d22e253e3b3d54be827d3e8f071bc919b0 by Mats Wichmann","C"
"865","Patch Set 3:

reverify","C"
"866","Patch Set 2:

Verified with Dan in JIRA IOT-2860 comments that this is needed; merging.","B"
"867","Patch Set 2: Code-Review+1

Dan please correct me if I'm wrong, but I think this patch is required to pass CT1.7.4.5, even after release of CTT 1.5.26?

If so this is a mandatory patch for 1.3.1 RC tagging, so folks please review at your earliest opportunity.","A"
"868","Change has been successfully rebased as ac02c2f96143a059d9442fa0b0d5939753c028d9 by Nathan Heldt-Sheller","C"
"869","Patch Set 1:

(1 comment)
resource/csdk/security/src/rolesresource.c
Line 860: Is there a reason you put this logic here instead of in OCInternalIsValidRoleCertificate?
","C"
"870","Patch Set 2: -Code-Review","C"
"871","Patch Set 2: Code-Review+1

@Dan I cherry-picked just this patch onto 1.3-rel to remove the dependency on the revert change, because I tested with and without the revert change and found no difference in CT pass/fail.  I also think the change reverted is really important as otherwise we have all sorts of cases where /pstat or /doxm will arbitrarily revert some of their vals. Please verify whether the revert actually fixes things for you with the CTT 1.5.25 and respond here!  Thanks!!","A"
"872","Patch Set 2: Code-Review-1

cherry picked so as to remove dependency on revert patch","C"
"873","Change has been successfully rebased as 10d49e10167ef78ffc9f43018944a6cdb22d55f9 by Nathan Heldt-Sheller","C"
"874","Patch Set 1:

(1 comment)
resource/csdk/security/src/policyengine.c
Line 820: space...
","C"
"875","Patch Set 1: Code-Review+1

(1 comment)
/COMMIT_MSG
Line 15: Indeed.
","C"
"876","Patch Set 1: Code-Review+1

looks ok","C"
"877","Change has been successfully rebased as 19426a57caa9020d228d99d109fe268631aec446 by Randeep Singh","C"
"878","Patch Set 1:

Maybe pick to master to ease next 1.3-rel merge","B"
"879","Change has been successfully rebased as d4fa893a4ca4fdaaf2552e337062c018f45ef4e2 by Mats Wichmann","C"
"880","Patch Set 5: Code-Review+1

The change looks straight forward please get a +1 from someone in the security team before merging this.","B"
"881","Patch Set 6: Code-Review+1

Please note that:
- Dave has been instated as API Maintainer recently
- Dave has sent out API guidlines that are different from our approach here
- Dave is out of town for the next 10 days or so

So, it' possible that we'll need different types of changes here, in the future.","B"
"882","Patch Set 7: Code-Review-1

Two objections. First, I don't think ""experimental"" belongs in the source three for various reasons (e.g. it's metadata, for one).  But if we must have it, the way to deal with it is to adjust the build scripts (e.g. add ""-Iexperimental"") rather than injecting ""experimental/"" into source code #defines. That way you can easily relocate it later and you only have to edit the build scripts.","B"
"883","Patch Set 8:

Are all the differences between patch set 6 and 8 due to rebase?

That is what I am guessing based on the diff.","C"
"884","Patch Set 9: Code-Review+2

ok.","C"
"885","Topic changed from WIP to security, WIP","C"
"886","Patch Set 3: Code-Review+1

We should probably merge this, and if people care, later the report tool could check the version of gcovr to decide whether it can use the option (looks like it was added at 3.2).","B"
"887","Patch Set 4: Code-Review+1

reverify","C"
"888","Patch Set 4: Verified+1

This is ridiculous... have to wait for a full build for a change to a shell script that isn't used during the current build, and then it fails for some bogus reason (the IPCA test barfed on Windows, again). Marking verified.","C"
"889","Patch Set 1:

Maybe we should test in 1.3-rel?
And what about build WITH_TCP option?
Let's check the Jenkins result","C"
"890","Patch Set 5:

@chul could you please have a look at it?","C"
"891","Patch Set 5:

Hi phil and randeep,

This patch can not be applied to master branch.
https://gerrit.iotivity.org/gerrit/#/c/16917/ is requred in order to merge this.

But as I said on patch 16917, patch 16917 also can not be applied now.
So I will upload new patch for master and 1.3-rel branch.","A"
"892","Change has been successfully rebased as 5fdb8a11ec9ac563f3f8e22e6ec7d1d6db4445a7 by Nathan Heldt-Sheller","C"
"893","Patch Set 10:

Dan, since this code touches the credresource.h/.c code I'd like you to take a quick look before I merge.  Note that Kevin has already reviewed so if you're good with that fact you can comment as much.  Thanks.","B"
"894","Patch Set 10:

George, Kevin, please check if you can +1 at this point, and I'll merge if so.  Thanks folks.","B"
"895","Patch Set 10: Code-Review+2","C"
"896","Patch Set 11:

Maybe this can be picked to master to double check before merge","B"
"897","Patch Set 5: Code-Review+1

(1 comment)

@Kevin and Dan: this fix is here because we patched the /cred Resource to correclty have a single global rowneruuid, but now the cases where we're marshaling something other than IoTivity's current /cred (e.g. using the marshaling code in json2cbor) break unless we allow them to supply their own rowneruuid (optionally).  I think this fixes it; can you guys take a look?  12th hour changes like this I don't want to merge without additional reviewers.
resource/csdk/security/src/credresource.c
Line 975: I think this is okay to make permanent... is there a reason not to just say // Wrapper to keep... 
?
","A"
"898","Patch Set 7:

(1 comment)
/COMMIT_MSG
Line 7: if you update this commit change this to IOT-2851.  I know IOT-2851 was not created when you started this ticket which is why I would only change it if you are updating something else.
","A"
"899","Patch Set 7:

I ended up creating a separate ticket for this issue since it really was not the issue reported in IOT-2826.

https://jira.iotivity.org/browse/IOT-2851

I have already posted this fix in that ticket.","B"
"900","Patch Set 7:

Vadym please address Kevin's comment as I think that especially the header files should be corrected.  Thanks.","B"
"901","Patch Set 7: Code-Review+1

(4 comments)

All my comments are nits so I will vote +1, as  I can't justify blocking this change over them. However if there are any more patch sets, I strongly recommend they be addressed.
resource/csdk/security/tool/json2cbor.c
Line 1361: Nit: Fix indentation to line up correctly.

resource/csdk/security/src/credresource.c
Line 981: Nit: I would prefer the commas follow at the end of the preceding parameter, not on the next line in front of the following parameter. I've not seen anywhere else in the codebase that uses this convention.

resource/csdk/security/include/internal/credresource.h
Line 75: Comment should instruct callers to call OICFree on cborPayload when finished with it. Right now OICFree and free are the same thing so this will still work, but these functions use the OICCalloc functions internally and so we should match with the correct functions.

Also, extraneous space at the end of this line.
Line 90: Same comment as above: both regarding mentioning OICFree and extraneous space at the end of the line.
","A"
"902","Patch Set 7: Code-Review-1

please address Kevin's comments.","B"
"903","Patch Set 3:

(2 comments)

This CAN go in. It doesn't break anything except for a corner case in line 113. It may even be considered to add consistency.

The plugins in the bridging directory should however use C++ std::string() and use == to compare a smuch as possible.
resource/c_common/oic_string/src/oic_string.c
Line 111: Why would one use this function instead of just strcmp or strncmp?
I posit there is no safety to be had here unless there is a safe version of strlen. This just shifts the failure point in case of non null terminated strings to the callee as **someone** has to call strlen and then pass it in here.

Besides, if there are non null terminated strings floating around the system, it is already late.

A reasonable version of a safe equals imo, would accept two strings and an uint and only compare some number of characters for equality which is exactly what strncmp does. Besides strcmp and strncmp compare only as many characters as the smaller string.
Line 113: Two strings of length 0 are equal. Although it is unlikely this function will be called with such strings, it is still incorrect.
","A"
"904","Patch Set 3:

(2 comments)
resource/c_common/oic_string/src/oic_string.c
Line 111: name is a bit missleading, maybe instead of Str we could use buffer. because according to your code I assume you want to ignore \0 into your comparison ?
Line 113: agrea
","A"
"905","Patch Set 3:

This introduces a safe streq() functionality into IoTivity. Various plugins in the IoTivity Bridging Plugin will use this functionality.","B"
"906","Patch Set 4:

(1 comment)
/COMMIT_MSG
Line 7: If nothing uses it, then it should be abandoned until something needs it.  But either way, this should not be checked in unless unit tests are added to the changelist.
","B"
"907","Patch Set 4:

(1 comment)
/COMMIT_MSG
Line 7: This is to add to IoTivity's aresenal of string safety functions.

It was intended to be used by the ZigBee plugin, but due to lack of review of this CS and another iteration of it before we moved ahead without and implemented a one-off safe string comparison long ago.

If this doesn't go in now, I will just abandon this CS. Like you said, nothing directly uses it anyway.
","B"
"908","Patch Set 4: Code-Review-1

(5 comments)
/COMMIT_MSG
Line 7: Insufficient explanation.  why is this being introduced?
What JIRA ticket covers this?  There's no code in this changelist that calls this function.

Also there's no unit test and there should always be a unit test that covers any new functionality.

resource/c_common/oic_string/include/oic_string.h
Line 106: new cod should use [in] etc annotations
Line 108: ambiguous.  Unclear whether this is to count the NULL or not.  From the code it looks like not, but the string must still be null terminated.   The comments should say so.
Line 113: inconsistent use of whitespace.  this file uses space after * not before

resource/c_common/oic_string/src/oic_string.c
Line 111: inconsistent use of whitespace
","A"
"909","Patch Set 5: Code-Review-1","C"
"910","Patch Set 6: Code-Review-1

-1 since functionality is added without any unit tests","B"
"911","Patch Set 7: Code-Review-1

check comments","C"
"912","Patch Set 8: Cherry Picked

This patchset was cherry picked to branch 1.3-rel as commit e85d1a273a566f6cf48aea5763db98e06cbb457f","C"
"913","Patch Set 9:

Please abandon or give a bug link to know why do you still want this in ?

Thanks","B"
"914","Patch Set 9:

is there a need for it ? or bug id justifying this change ?

see my comment in :

https://gerrit.iotivity.org/gerrit/#/c/21203/


I agrea there is no need for it, I will abandon in 1.3-rel when abandoned in master","A"
"915","Patch Set 9: Code-Review-1

(1 comment)
resource/c_common/oic_string/src/oic_string.c
Line 113: why do we need this check?  Seems dangerous to say that NULL does not match NULL.  Seems better to either crash or return an error.
","B"
"916","Patch Set 9: Code-Review-1

Please add unit tests","B"
"917","Removed the following votes:

* Code-Review-1 by Dave Thaler <dthaler@microsoft.com>
","C"
"918","Uploaded patch set 9.","C"
"919","Change has been successfully rebased as 5dc28ad5839f5573d13d9d21310ddb4d669880e5 by Uze Choi","C"
"920","Patch Set 5:

(1 comment)
service/easy-setup/enrollee/src/resourcehandler.c
Line 392: I'm confused because log message infers an update to be executed, but you removed resource update execution.
","B"
"921","Patch Set 7:

(1 comment)
service/easy-setup/enrollee/src/resourcehandler.c
Line 409: Should we also check for uri to be empty string (i.e. """") ?
Although I am not sure how ""uri"" parameter is filled in underlying layer.

As per spec:
If the ""href"" value is empty, denoted by a zero length string or """" in JSON, the ""rep"" Property shall be applied to linked Resources in the Collection.
","B"
"922","Change has been successfully rebased as b65481fd523ad4b1bb5579fa40160a21ad85d9e8 by Ashok Babu Channa","C"
"923","Patch Set 3:

(1 comment)
resource/c_common/SConscript
Line 127: I think we should create a builder for the config.h file which would solve a lot of problems that we are having. Till a builder is created for the config.h file this is a reasonable work around.
","B"
"924","Patch Set 3:

(1 comment)
resource/c_common/SConscript
Line 127: SCons variant dirs are odd like that sometimes. Personally I would like to see a TODO explaining what needs to be done here.
","B"
"925","Patch Set 3:

(1 comment)
resource/c_common/SConscript
Line 127: Yes, I agree.  If only I can keep track of these ""to be done"" things.  I disagree with Phil's reading on this: cur_dir = Dir('.').abspath, which is also ""the directory the SConscript is found in"", returned as an absolute path.  It should be impossible for it not to exist, or we won't be reading the script.
","A"
"926","Patch Set 3:

(1 comment)
resource/c_common/SConscript
Line 127: not real happy with this, first scons has a way to do creation the environment so it knows about this directory itself.  Mkdir  (init-caps) is an action that can be used in a builder.  Second, how can it ever be that the current directory does not exist?
","B"
"927","Patch Set 4:

Phil, I don't have a problem with this going into the 1.3-rel branch but at this point we are really close to the 1.3.1 release. I don't see a compeling reason for this commit to be part of the next release. As author do you see a reason to push this for the release?","B"
"928","Patch Set 4:

This seems like a relatively-complex change. I can live with it if needed, but I would prefer one of these other changes, in the order of my preference:

1. Add into the git repo a few copies of iotivity_config.h, one for each platform supported by IoTivity. Stop generating iotivity_config.h on everyone's machine. 

OR

2. Add iotivity_config.h into .gitignore, as a trivial alternative to this more complex patch.

I tried to convince Dave to adopt #1 a while ago, but I failed to. I would love to be able to track changes to the checked-in copies of iotivity_config.h, instead of everyone having to generate locally copies of iotivity_config.h.","B"
"929","Patch Set 4:

Where is the jira ticket for this issue. We are so close to release of 1.3.1 all commits should be documented with a jira ticket.","B"
"930","Patch Set 4: Code-Review+1

I would prefer to see the creating of iotivity_config.h added to a custom builder but this is a reasonable step at this time.","B"
"931","Change has been successfully rebased as e03d274a88460f4be2fec75d3ee930bdf238cb4d by Mats Wichmann","C"
"932","Patch Set 11:

Are we planning on updating the include paths for all of the samples and other locations in a later patch?

I really like the idea of putting the headers in an iotivity space.","B"
"933","Patch Set 11: Code-Review+1

(1 comment)
build_common/SConscript
Line 483: I think this is actually a valid place for os.path.join()
","A"
"934","Patch Set 11: Code-Review+1

Are we planning on updating the include paths for all of the samples and other locations in a later patch?

I really like the idea of putting the headers in an iotivity space.","B"
"935","Patch Set 12: Code-Review+2","C"
"936","Patch Set 2: Code-Review-1

(3 comments)

need to resolve merge conflicts
/COMMIT_MSG
Line 12: ""on""

tools/tizen/iotivity.spec
Line 92: why the change here?
Line 280: typo: transitional
","B"
"937","Patch Set 5:

I agree with the concept; the headers should go in a project-specific directory if installed to ""the system"".  Since at the moment it only affects tizen, are things okay there?  last I knew tizen was actually including the code, nobody elses uses iotivity's own scripts to install to a system location that I know of.","B"
"938","Patch Set 7: Code-Review+1

I'd like to see some mention of this on the wiki, but that can't be part of this patch which of course doesn't apply to wiki.  Phil, can you see if there's a place to leave a note that ""header files should 'install' to PREFIX/include/iotivity""  or whatever it would look like.","A"
"939","Patch Set 13: Code-Review+1","C"
"940","Patch Set 14: Code-Review+1","C"
"941","Patch Set 14: Code-Review+1

I suppose we won't get this into 1.3-rel, but I recently had occasion to muck around in the same waters and like this.  I can make it work to call the gtest sconscript from unit_tests.scons, but moving it to a more visible place seems better.  Maybe we can move this over to master and make it happen?","B"
"942","Patch Set 2:

I like the way the change is going. I have wanted to do a similar change for a while. Once you are able to figure out the build issues will be happy to give my +1 for the change.","B"
"943","Patch Set 5:

It's an improvement (not to call gtest sconscript from everywhere!). Still exploring some maybe better ways than doing Clone() everywhere (it is a very expensive function to SCons) and the maintainers tell me that's not really necessary as you can supply target-specific args to a builder.  Still, this may be a decent way to ease into a bigger change of that sort.","B"
"944","Change has been successfully rebased as 5f568dfa93373427133a816734a652803f7f471a by Nathan Heldt-Sheller","C"
"945","Change has been successfully rebased as 89370a693744ba42733aeffe2880904da75b6102 by Nathan Heldt-Sheller","C"
"946","Patch Set 1: Code-Review+1

OK I trust you on this one","C"
"947","Change has been successfully rebased as 63f82bf1398a041cf52a6af96b8d83621eeb48c6 by Todd Malsbary","C"
"948","Patch Set 1:

(1 comment)
resource/csdk/resource-directory/src/rd_server.c
Line 315: Should the sendResponce be after the OCNotifyAllObservers as it was in the original code?

It is unclear to me if the order of these two actions is important.
","B"
"949","Change has been successfully rebased as f92bf07ea302bc55c4e19832594cc5c850c8e825 by Rick Bell","C"
"950","Patch Set 1: -Code-Review

Okay, I see what I was missing: the /cred resource disables anon cipher after calculating PSK... this is probably soon enough, and we can just remove the one you (effectively) removed here.  Do you want to update your patch to just cut it out?","B"
"951","Patch Set 1: Code-Review-1

(1 comment)
resource/csdk/security/src/doxmresource.c
Line 1360: I'm confused... Dan I think this effectively removes this code from ever running, since the only place this function is called is already surrounded by a check for gDoxm->owned == false?

For that matter though, this isn't the right place to be closing off the anon cipher suite... that should be done as soon as a message is received over the anon DTLS session.  I'm going to try an update that fixes it.

Separately, the CTT should *not* be trying to initiate OTM mid-way through onboarding.  I don't know what that's about but I've emailed Mitch to ask him to fix the CTT.
","A"
"952","Change has been successfully rebased as 1dfc200dac27e3bc83448f269619807791e32406 by Ashok Babu Channa","C"
"953","Patch Set 3:

(1 comment)
resource/csdk/connectivity/src/camessagehandler.c
Line 1506: I think it is very likely that this could run on Windows so we should m ove to PRIuPTR.
","A"
"954","Patch Set 3:

(2 comments)
resource/csdk/connectivity/src/camessagehandler.c
Line 1506: Is this code going to be build on Windows?

Right now the oldest compiler we support on windows is VS2013 which does not have support for %zu.  The most portable way to avoid size_t items is to use the PRIuPTR macro.

If this never builds on windows then I have no problem with this going into the code base.
Line 1510: see comment above
","A"
"955","Patch Set 4: Code-Review+1

(1 comment)
/COMMIT_MSG
Line 23: you did not update the commit message but its not as important as the code.
","A"
"956","Change has been successfully rebased as 32f7109c29237adc78b890699f7341b705c14997 by Ashok Babu Channa","C"
"957","Patch Set 3:

Please submit to master branch if needed","B"
"958","Change has been successfully rebased as 669dc1cad92fdd0b30907afa191e141b46798a35 by Uze Choi","C"
"959","Patch Set 2: Code-Review+1

If there is no issue for working, it is better than use OICFree","B"
"960","Patch Set 5: Code-Review+1

Is there a jira ticket associated with this change? we are so close to the 1.3.1 release all commits should be documented in the bug tracking system.","B"
"961","Patch Set 5: Code-Review+1

don't really see how this could be a problem, esp. since it's already in master.","B"
"962","Patch Set 5: Code-Review+2

Acceptable, frankly I prefer to use MACRO for this kind of simple wrapping with null check addition.","A"
"963","Change has been successfully rebased as 150b2de83ac784d74b007a5835c757416f19765a by Nathan Heldt-Sheller","C"
"964","Patch Set 1: Code-Review+1

(2 comments)

I'm giving +1 for now; if nobody else reviews in the next day (or less) I'll change to +2.
resource/csdk/security/src/credresource.c
Line 3713: Nice, readable code... looks right to me.
Line 3788: This warning isn't printed if we return early above due to null key parameter... do you want to print a warning in that case (other than ""out"") or use the ""goto exit"" so prevalent in IoTivity already? Your call... not critical.
","B"
"965","Patch Set 2:

I wonder if this issue has something to do with the way symmetric keys used in PSK ciphersuites are encoded in DER versus how asymmetric public keys used in ECDSA ciphersuites are encoded in DER. This solution seems sufficient for now, but this might be worth looking into later.","B"
"966","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/security/src/credresource.c
Line 3794: suggested moving exit label to line 3788 if you have time to wait for reverification, otherwise, go ahead and merge.
","A"
"967","Change has been successfully rebased as 7bf0147782cdc464bcbb474c9a0b8cc45518bb58 by Mats Wichmann","C"
"968","Patch Set 1:

(1 comment)
test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/PMHelper.java
Line 70: By default string member variable initialized as null
","B"
"969","Patch Set 1:

(2 comments)
test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/PMAction.java
Line 35: mismatch indentation

test/src/iBtestapp/modules/pm/c_cpp/cpp/src/PMCppAppHelper.cpp
Line 779: unnecessary break statement
","B"
"970","Patch Set 1: Code-Review-1

(3 comments)
test/src/iBtestapp/modules/pm/android/src/org/iotivity/test/pm/app/PMLight.java
Line 3: 2017 instead of 2016

test/build/linux/SConscript
Line 106: remove trailing space
Line 123: remove commented code
","A"
"971","Change has been successfully rebased as 5cfded4d70df7d39603cc6da1f3cb4872aa8d1a1 by Rick Bell","C"
"972","Patch Set 1: Code-Review-1

(2 comments)

Minor spelling errors
java/common/src/main/java/org/iotivity/base/OcSecureResource.java
Line 200: Spelling error...
Line 216: Spelling Error
","C"
"973","Change has been successfully rebased as 418ccc6670b4771a9221ab8d8a156d3f51a9de6a by Rick Bell","C"
"974","Patch Set 14:

One question about this concept is ""which compiler"".  e.g. I have https://jira.iotivity.org/browse/IOT-2782 reported which seems to happen only to me.  I have added this to the ticket.","B"
"975","Patch Set 15: Code-Review+2","C"
"976","Patch Set 16: Patch Set 15 was rebased","C"
"977","Abandoned

confirmed ok to abandon","C"
"978","Patch Set 7:

Does this patch need to be abandoned, then?","C"
"979","Patch Set 7: -Code-Review","C"
"980","Patch Set 7: Code-Review+1

Looks reasonable to me.  Can anyone verify that this patch causes no CTT regressions?","B"
"981","Patch Set 7: Code-Review-1","C"
"982","Patch Set 7: Code-Review-2","C"
"983","Change has been successfully rebased as 58592f945bfe9e936cf135ef1d36258893101b10 by Mats Wichmann","C"
"984","Patch Set 2:

I am almost sure this is due to the merge commits from 1.3-rel. So I have no problem giving it a +1.","B"
"985","Change has been successfully rebased as 223a1449571c910a67341d30a727919c71bdc5b3 by Mats Wichmann","C"
"986","Patch Set 15: Code-Review+1","C"
"987","Change has been successfully rebased as b39469d182188063c22254f1d297c5b1b83db82c by Mats Wichmann","C"
"988","Patch Set 2:

(2 comments)

This looks mostly ok.  A couple of comments added, plus this seems to conflict with another 1.3-rel merge?
service/coap-http-proxy/unittests/CoAPHttpUnitTest.cpp
Line 278: I think we wanted the other version: (uint16_t) case style

resource/csdk/stack/src/ocobserve.c
Line 462: okay... this doesn't seem to be part of a mege conflict?
","B"
"989","Change has been successfully rebased as b1659ae02d87267295fb53555a84c7dd1d96a138 by Nathan Heldt-Sheller","C"
"990","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/security/src/credresource.c
Line 2834: You could eliminate strUuidCred and use a single buffer for both, since you use it as scratch space that you write to and use immediately each time.
","B"
"991","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/security/src/credresource.c
Line 2835: Is this a deterministic check, i.e. could there ever be a case where desc_len = UUID_LENGTH (16), when desc is something other than a uuid?
","A"
"992","Change has been successfully rebased as 7fbb1ac52b2c66305cc0039b6052001345235268 by Randeep Singh","C"
"993","Patch Set 3:

(1 comment)
resource/csdk/security/tool/json2cbor.c
Line 1322: please remove tabs
","C"
"994","Patch Set 6:

There is not Jira ticket for this issue and this fix is causing causing other things to break.

I don't want to just revert this change but something is not right could any of those involve with this fix please look at and comment on https://jira.iotivity.org/browse/IOT-2826

I really wish a Jira ticket had been created for this change at least I would have been able to figure out the reason for the change.","A"
"995","Change has been successfully rebased as ce02b354a9fed3af5f5980b00891454546920aa8 by Rick Bell","C"
"996","Change has been successfully rebased as 7ee4eee534723dad6b8ee32e5770b6a6c02a779a by Rick Bell","C"
"997","Patch Set 1:

did we had those lines earlier ?","C"
"998","Patch Set 1: Code-Review+1

> did we had those lines earlier ?

Sure sounds familiar.","B"
"999","Patch Set 2: Cherry Picked

This patchset was cherry picked to branch master as commit d4ac9d28084610ab492041edc4c8f5a5f0fbfe0d","C"
"1000","Patch Set 12: Code-Review+1

Build ok,  system tests passed.","B"
"1001","Patch Set 15:

(3 comments)

a couple of suggestions, not blocking but i am not expert on security topic.
resource/csdk/connectivity/common/inc/parsechain.h
Line 24: use < > for external/system libs

resource/csdk/security/include/internal/certhelpers.h
Line 26: I would have included after lib

resource/csdk/connectivity/common/src/parsechain.c
Line 28: check is style script is not removing spaces before var
","B"
"1002","Patch Set 15:

> Dear Dan, could you share the logs for CT1.7.8.5?

I don't have the logs handy now. You can obtain them by running CTT against sampleserver_randompin.

The initial round of proposed fixes is in:

https://gerrit.iotivity.org/gerrit/#/c/21983/
https://gerrit.iotivity.org/gerrit/#/c/21937/
https://gerrit.iotivity.org/gerrit/#/c/21985/","A"
"1003","Patch Set 15:

Another fix for this CTT test case:

https://gerrit.iotivity.org/gerrit/#/c/21987/

But, Jenkins seems broken.","B"
"1004","Patch Set 15:

Update: I am working on some patches that allow CT1.7.8.5 to make progress. Hopefully those patches will be available for reviews in the next couple of days.","B"
"1005","Patch Set 15: -Code-Review

All my CT1.7.8.5 fixes have been merged - thanks for waiting!

However, Aleksey is still investigating https://jira.iotivity.org/browse/IOT-2631, that blocks CT1.7.8.5. I will leave on vacation in a couple of days, but I recommend finishing the work for IOT-2631 before making these PEM/DER changes. Also, please run CT1.7.8.5 before merging these changes, and make sure the behavior doesn't get worse than the behavior described in IOT-2631.

Thanks!","B"
"1006","Patch Set 15: Code-Review-1

Oleksii, are you able to make CT1.7.8.5 work after these changes?

I am currently debugging and trying to make that work. If you cannot help with that investigation, I would prefer to postpone changes on these code paths until we figure out what's wrong with CT1.7.8.5.","B"
"1007","Patch Set 18: Code-Review-2

(1 comment)

Code looks generally fine aside from my one comment in the code, but per the JIRA ticket this work is not targeted for the 1.3 release, but is on the 1.3-rel branch. This work should be moved to master for a future release.
resource/csdk/connectivity/common/src/parsechain.c
Line 34: ""errNum"" should also be verified to not be NULL here since it gets written to later.
","A"
"1008","Patch Set 4: Code-Review-1

(6 comments)

Since you've moved this change to 1.3-rel, please make sure the tests we added are still passing. See csdk\security\provisioning\sample\provisioningTest.py to run them in a script, or you can run 'autoprovisioningclient <test#>' manually against sampleserver_justworks. Assuming ownership transfer isn't currently broken, these tests should still pass.
resource/csdk/security/src/credresource.c
Line 3181: buf leaks on this error path.
Line 3197: buf leaks on this error path.
Line 3383: item leaks on this error path.
Line 3399: item and item->data leak on this error path.
Line 3401: Do you need to set tmp->next equal to NULL before passing it to LL_APPEND, or will the macro do that? You're using OICMalloc so the structure isn't returned zeroed.

resource/csdk/connectivity/common/src/parsechain.c
Line 64: Certificates are considered public data, and so there's no security reason to zero their contents before freeing. I suggest removing this line.

In general, though, don't use memset for this purpose. The compiler may see tmp1->cert->data isn't used again before being freed and optimize the memset call out. Always use OICClearMemory to zero contents of sensitive buffers, as this function is designed to make sure it doesn't get optimized out by the compiler.
","A"
"1009","Patch Set 6: Code-Review+1

> Launched autoprovisioningclient for tests cases 1-7 against
 > sampleserver_justworks on Linux, got the same results with and
 > without the patch. All test cases end up with CA_NOT_SUPPORTED in
 > CAUtilSetBTConfigure().

Awesome. That means someone else broke our code and we didn't know about it. Well, hopefully it will get sorted out by the CTT testing. But since that's not your fault this change can go ahead.","B"
"1010","Change has been successfully rebased as d463a8ffd09c7802833363b9f339741516e1cbd3 by Randeep Singh","C"
"1011","Patch Set 16:

(2 comments)
resource/csdk/security/provisioning/sample/system_test.py
Line 17: suite's
Line 136: certain
","B"
"1012","Patch Set 16: Code-Review+1","C"
"1013","Patch Set 16: Code-Review+2","C"
"1014","Patch Set 17: Patch Set 16 was rebased","C"
"1015","Patch Set 1:

(1 comment)
resource/csdk/security/provisioning/sample/system_test.py
Line 7: this is odd: import ourselves?
","C"
"1016","Patch Set 1: Code-Review-1

(1 comment)
resource/csdk/security/provisioning/sample/system_test.py
Line 928: Fix tabs, please
","C"
"1017","Uploaded patch set 14.","C"
"1018","Patch Set 2: Code-Review-1

I do not believe this is the correct course because privateData should not leave the device. That's a terrible practice. See my comments on the JIRA ticket.","B"
"1019","Patch Set 2: Code-Review-1

Right we cannot merge this fix but it's useful to sanity check that this is the issue... indeed it appears the CTT is clobbering the privatedata, I just didn't see it in the Update logs.  The CTT will have to change to fix this issue.","A"
"1020","Patch Set 2: Code-Review-2

Nathan agrees with my assessment in JIRA, so blocking this.","B"
"1021","Change has been successfully rebased as c6580479658cb024558a5d68619d1a459505babe by Mushfiqul Islam","C"
"1022","Change has been successfully rebased as b7ed1c3855eb9c294d81e440b0146000a085aaa3 by Nathan Heldt-Sheller","C"
"1023","Patch Set 5: Code-Review+1

(1 comment)

I won't claim I understand the ins and outs of the OTM code to be super-confident in this, but it looks alright to me. I recommend additional review from someone who's spent more time in this part of the code than I.
resource/csdk/security/src/doxmresource.c
Line 1363: Hasn't been tinyDTLS in a long time. Since we're calling into the CA layer, let's just scratch out the reference to what the underlying DTLS layer is altogether.
","A"
"1024","Patch Set 6: Code-Review+1

I don't feel familiar enough with the code base to rate this based on visual inspection.  I did apply the patch to latest rel-1.3, and ran security and provisioning unit tests.  Results were same wrt clean rel-1.3, so on that basis, I give a +1 :)","B"
"1025","Patch Set 7:

Sorry, I was away from the office for a couple hours, but the latest rev looks fine as well, so consider this my ex post facto +1.","B"
"1026","Change has been successfully rebased as b2aff896db2809f9d9cd8dac88f3453ee52079bd by Nathan Heldt-Sheller","C"
"1027","Change has been successfully rebased as c9cfe3f0d001bb6b56a56190c43534d8fd040b70 by Nathan Heldt-Sheller","C"
"1028","Patch Set 1: Code-Review+1

Looks fine, works fine","C"
"1029","Patch Set 1: Code-Review+2 Verified+1

ok.. looks fine.. its need to be merged for RC4 Basic Acceptance Testing to be passed.","B"
"1030","Change has been successfully rebased as fbaf4b4df305df98a3ea5fa9ea702b0d83d0f7b2 by Towhidul Islam","C"
"1031","Patch Set 2:

(1 comment)
test/src/tc/pm/gtest/csdk/src/btc/PMCsdkOtmTest.cpp
Line 75: 2 times windows in the whole file
","B"
"1032","Patch Set 2: Code-Review-1

(3 comments)
test/build/linux/SConscriptPM
Line 177: Remove the spaces in the code

test/src/testapp/pm/iotivity_pm_server.cpp
Line 29: Windows support removed.
Please add it back it will not build for windows

test/src/common/commonutil/c_cpp/CommonUtil.cpp
Line 346: Please use platform abstraction layer code already used
","B"
"1033","Patch Set 4: Code-Review+2

(2 comments)
test/src/tc/pm/gtest/csdk/src/btc/PMCsdkAutoProvisionTest.cpp
Line 235: please remove the commented code if not required

test/build/linux/SConscriptPM
Line 172: /usr/local/lib is used multiple times, make a variable and use it from it.
","A"
"1034","Change has been successfully rebased as b854aa906e68cc45f32af0802821606b59b12737 by Nathan Heldt-Sheller","C"
"1035","Change has been successfully rebased as e9aea7067f97612075a25b62e21e55aff061a314 by Rick Bell","C"
"1036","Change has been successfully rebased as f9f65c7fc63f90daf47b0c9ad36a30f3754c2b96 by Ashok Babu Channa","C"
"1037","Change has been successfully rebased as 2e1acd2e326b126ac277e731289c153a701d35d8 by Ashok Babu Channa","C"
"1038","Patch Set 10:

I agree with Mats we should remove the comment now that it is re-enabled.","A"
"1039","Patch Set 10: Code-Review+1

(1 comment)
resource/unittests/OCRepresentationTest.cpp
Line 611: Is this comment still needed if we are re-enabling this test?
","C"
"1040","Patch Set 9: Code-Review+1

assuming it's ready to enable... should probably fixup/remove the comment as well.","A"
"1041","Change has been successfully rebased as a161a07b9e7ae86b34bc52bb83afaca4209fed2d by Ashok Babu Channa","C"
"1042","Patch Set 2:

(1 comment)

looks okay as far as I can tell, with one question
auto_build.py
Line 15: I think the 1.3-rel patches were removing this. Wrong merge choice?
","B"
"1043","Change has been successfully rebased as a26e4befb2986b3119b5d4cc776d1c40dc3d8088 by Nathan Heldt-Sheller","C"
"1044","Patch Set 2: Code-Review-1

(4 comments)
resource/csdk/security/src/policyengine.c
Line 338: This isn't a macro. Why a line continuation?
Line 405: Same here. Why a line continuation?
Line 472: And a third one.
Line 473: This check in all three places is a little strange. The functions are called IsRequestFrom{Something}, but the functions really answer the question: is the request from Something AND is it an SVR?

This is further made strange by the calling code specifically checking for PSTAT in the case of AMS and CMS, making this seem a bit redundant.

Can you clarify this design? Does it make more sense either not to check the resource type in these functions (thus making their function more accurately described by their names) or should all the checking of resource type be done here and not by the caller (in which case a renaming may be in order for clarity)?
","A"
"1045","Change has been successfully rebased as 89b355386e36fd10959f627179657ee36b234e73 by Dan Mihai","C"
"1046","Patch Set 3:

Not sure I understand what is being changed since these are .dat files I can not really properly review the contents.

Is the change already done to the corresponding .json files?","C"
"1047","Patch Set 5:

Error seems unrelated. Linker cannot find ocpmapi.lib?","B"
"1048","Patch Set 6: Code-Review+1

This +1 is based on the assumption that the source .json files have already been updated.","B"
"1049","Change has been successfully rebased as 9b58c8469e1f84653b15efb06567dd8908e6fd53 by Mats Wichmann","C"
"1050","Patch Set 1: Code-Review+2

Indeed.  I see no reason to wait around on this one.

By the way: is the tarxz change wanted/needed (gerrit 20023)? It seems to have stalled.","C"
"1051","Change has been successfully rebased as ae724dd8947c084671b158455befcb23c1bc046e by Nathan Heldt-Sheller","C"
"1052","Patch Set 11:

(1 comment)

Please see my (long) note on doxmresource.c ""HandleDoxmPostRequestSetRownerId()"" function.  That said, we can still merge this patch (which fixes many other things; thanks!) when Kevin gives a +1, but I want people working on this code to understand that the Server should never be changing the ""rowneruuid"" for any SVR (/acl, /cred, /doxm or /pstat) unless a POST for that SVR containing ""rowneruuid"" is received.  The exception is /pstat.dos RESET, which clears those values and sets them to the Nil UUID.  Any other place where these values are being changed (outside of the POST handler for that SVR in question) is wrong and must be removed or the CTT will continue to fail.  I've captured the ""TODO"" in JIRA IOT-2805 and IOT-2816; See my inline comment for more details.  Thanks!
resource/csdk/security/src/doxmresource.c
Line 1245: This function (HandleDoxmPostRequestSetROwnerId()) still needs to be removed... it's wrong to set all the rowneruuids for the /cred, /pstat and /acl SVR here in the Server ""automagically"", and the CTT is failing on this step (see [IOT-2805] which I'm working on).

These SVR.rowneruuids must be Updated on a per-SVR basis by the provisioningclient, prior to moving the device to RFPRO.

Once this function (...SetRownerId()) is removed, the provisioningclient will need to be fixed also, to POST the rowneruuid Update to each of these four SVRs.

I've provided an example patch for this doxm.rowneruuid (see https://gerrit.iotivity.org/gerrit/#/c/22829/). This shows where and how the provisioningclient should POST the new rowneruuid for each SVR in question, using /doxm as a template.

The same template can be applied to the /pstat Resource, which also has a ""partial payload"" binary->CBOR marshaling function (which allows creation of a payload containing just the rowneruuid Property).  However the /acl and /cred functions do not have this ""partial payload"" function written yet.  So either a) these functions must be written for /acl and /cred (using /doxm or /pstat as example) or b) the provisioningclient must do a GET on the /acl2 Resource, change the ""rowneruuid"", and POST the changed (full) representation.

I've created a JIRA ticket to fix the provisioningclient; see [IOT-2815].
","A"
"1053","Patch Set 11:

(1 comment)
resource/csdk/security/src/credresource.c
Line 1689: Kevin I believe this is here just for debugging, so that we can see when AddCredential() is being called in RFNOP, and make sure that it's due to an allowed operation (such as /roles GET) and not some other code path we're trying to stamp out :)

That said, this whole block could be included in an #ifndef NDEBUG to avoid wasteful function calls in release builds.
","A"
"1054","Patch Set 11: Code-Review-1

(1 comment)
resource/csdk/security/src/credresource.c
Line 1689: Why is this only a warning now? Shouldn't the change be disallowed if this is the case?
","B"
"1055","Patch Set 14:

Oleksandr please rebase this change and address Kevin's small comment about a space after the comma while you're at it; we have to get this merged as quickly as we can.  Thank you.","B"
"1056","Patch Set 14:

Thanks again Kevin for stepping in to help get this important patch reviewed, I know it's no longer on your job description! 

Oleksandr, thanks for the quick turnaround... as soon as we get verification passed (might as well fix Kevin's last comment while you're at it) I'll merge. Please let me know if you need help with verification issues... this patch is our top priority right now.","A"
"1057","Patch Set 14: Code-Review+1

(1 comment)
resource/csdk/security/src/doxmresource.c
Line 978: Nit: Prefer a space between comma and uuidString, but only bother if you need another patch set. Not blocking.
","C"
"1058","Patch Set 17:

(3 comments)

The new code looks OK to me. I didn't check if it fixes the original CTT failures.
resource/csdk/security/src/pstatresource.c
Line 898: prevId doesn't seem very useful, because UpdatePersistentStorage could fail in many different ways. It's hard for me to imagine that restoring just gPstat->rownerID will be very helpful.

But, I am OK with this, if you guys want to keep this prevId code.

resource/csdk/security/src/doxmresource.c
Line 1638: Should this really be a warning?
Line 1644: is not supported by the Server
","A"
"1059","Patch Set 17:

I made a small fix, that seems to have resolved the unit test failures. I did not review the entire source code diff for this patch yet.","B"
"1060","Patch Set 17: Code-Review+1

(2 comments)
resource/csdk/security/src/aclresource.c
Line 2949: nitpick: Add parens

resource/csdk/security/src/doxmresource.c
Line 1640: nitpick: Add parens
","C"
"1061","Patch Set 17: Code-Review+2","C"
"1062","Patch Set 18:

> Dan can you please look into the verification failure again?  The
 > patch was re-based.  Thanks.

""Build step 'Publish Valgrind results' changed build result to FAILURE""

I suggested a while back that those Valgrind failures are too unreliable, but it looks like we are still wasting time using the same Valgrind settings in Jenkins. :-(

I will re-trigger the unit tests - usually Valgrind doesn't complain the second time.","A"
"1063","Patch Set 18:

Dan can you please look into the verification failure again?  The patch was re-based.  Thanks.","C"
"1064","Patch Set 18: Code-Review+1","C"
"1065","Patch Set 18: Code-Review+1

(1 comment)
resource/csdk/security/src/credresource.c
Line 2174: Nit: If you're fixing spelling, might as well fix this to be ""received"" as well.
","C"
"1066","Patch Set 18: Code-Review+2","C"
"1067","Patch Set 19:

Thanks Dan; sorry I didn't take a min to look at the failure log before asking for your help!","B"
"1068","Patch Set 5: Code-Review-1

(5 comments)

Thanks for the work... I have some questions; let's get them sorted out before merge please.
resource/csdk/security/src/pstatresource.c
Line 880: similar to /acl, we do want to update rowner if the Update payload contained an ""rowner"" Property.

resource/csdk/security/src/credresource.c
Line 1733: this removal looks correct to me

resource/csdk/security/src/aclresource.c
Line 2938: Okay I looked more closely at this code just now, and I don't think removing this outright is correct... the /acl.rownerID should be updated, if (and only if) the rownerID was included in the Update payload sent from the Client.

I believe the intent of this code was that it would *always* copy the newAcl->rownerID into gAcl->rownerID, because the CBOR->ACL marshaling function is meant to either a) copy a the rownerID from the CBOR payload, or b) copy the existing gAcl->rownerID into the newAcl, before returning.  Therefore the idea (I think) was that when we get to this line 2938, the newAcl->rownerID is either a valid new rowner from the CBOR payload, or a copy of the existing rowner, so either way, it's okay to copy it.

HOWEVER, if you look at the CBOR to ACL marshaling function, you'll see that the behavior is broken there (line 2049).  The existing gAcl rowner only gets copied into newAcl in some cases, not all, I believe.

I think the correct behavior would be that the CBOR->ACL marshaling code only modifies gAcl->rownerID if the ""rowner"" tag is found, otherwise it leaves it unchanges (so, removing the else if clause on line 2049).  And then, this line (the Update request handler) modifies gAcl ONLY if the newAcl->rownerID is not NULL (which would imply that rowner was in the CBOR payload and thus is being Updated).

What do you think?
Line 3070: This line also would need to be updated to behave in the same way as the above!

resource/csdk/security/src/doxmresource.c
Line 1245: Can you please explain the design intent here?
","A"
"1069","Patch Set 6:

Kevin, if you have time, we could really use help looking over the logic in this fix.  The goal here is to remove un-intentional updates to SVR rowneruuid Properties that were sprinkled through the code.  This patch along with https://gerrit.iotivity.org/gerrit/#/c/22665, and https://gerrit.iotivity.org/gerrit/#/c/22529, and https://gerrit.iotivity.org/gerrit/#/c/22587/, are all attempting to fix that.  I'm working on other issues and don't have time to carefully review this critical fix so if you can help out, it would be most appreciated.  Understand if you cannot make time, either!","A"
"1070","Patch Set 7: Code-Review-1

(4 comments)
resource/csdk/security/src/pstatresource.c
Line 1111: Nit: space between 'ret' and '='

resource/csdk/security/src/doxmresource.c
Line 996: You still need to check NULL != dst->mom in case the memory allocation above failed, otherwise the dereference on line 998 will crash.
Line 1627: I'm having trouble understanding the purpose of this if check here:

If dos.state == DOS_RESET or DOS_RFNOP, then the first clause (DOS_RFOTM != dos.state) will also be true, so this seems redundant. Improving the text in the logging will help understanding as I am not clear on what this means.

If the device is unowned, is doxm read only in every state except RFOTM? In that case I think you only need the first entry.

Please clarify the desired behavior here.
Line 1657: Nit: space after else before comment
","A"
"1071","Patch Set 8: Code-Review-1

(2 comments)
resource/csdk/security/src/doxmresource.c
Line 1627: I'm confused. You've just taken the whole thing out. Don't you still need to check this state bit in some way to provide the correct behavior?
Line 1001: No, no, this is no good. The logic here is:

If dst->mom is NULL to start with, attempt to allocate memory for it.
THEN copy the contents from the source. 
If the memory allocation fails, then we should not attempt to do this. So the if really needs to be a compound if that checks if dst->mom is still NULL and if those owned flags are different.
","A"
"1072","Patch Set 9: Code-Review-1

(6 comments)
resource/csdk/security/src/pstatresource.c
Line 1111: Put space back between ret and =

resource/csdk/security/src/credresource.c
Line 2148: Nit: Extraneous space at end of line.

resource/csdk/security/src/doxmresource.c
Line 990: If you do this, then some logging is going to get skipped, including the ""OUT"" before the return. The code previously set result to OC_STACK_NO_MEMORY and let execution continue. Consider whether or not the logging added below should still happen, and adjust the control flow accordingly.
Line 991: The memset is unnecessary. OICCalloc zeroes the buffer when it's returned.
Line 1625: Ok, this if is back again. Why is this not redundant? What is the desired behavior, here? When is the resource supposed to be read-only?
Line 1655: Put space back between else and //
","B"
"1073","Uploaded patch set 17.","C"
"1074","Change has been successfully rebased as 5fc3762377f40c3e8122ef3e47773eba4d36ef1e by Nathan Heldt-Sheller","C"
"1075","Change has been successfully rebased as 4fb639be2859993d22a903b5e9a2fa45b8c461f6 by Nathan Heldt-Sheller","C"
"1076","Change has been successfully rebased as 6da31dd4a2872f623ed8137cce51b6d8aa6e27ee by Nathan Heldt-Sheller","C"
"1077","Patch Set 15:

(1 comment)
resource/csdk/security/provisioning/unittest/otmunittest.cpp
Line 588: One builder is failing (warnings-treated-as-errors) here and line 607: warning C4189: '_ctx': local variable is initialized but not referenced.
","A"
"1078","Patch Set 7:

reverify","C"
"1079","Patch Set 7:

will not rebase through the gerrit button due to conflicts, will need to be done manually.","B"
"1080","Patch Set 9: Code-Review-1

(1 comment)
resource/csdk/security/provisioning/unittest/SConscript
Line 193: this won't work unless something is assigned to ex.  Change line 191 to:

    except ImportError as ex:
","C"
"1081","Change has been successfully rebased as 7dbf81fe0c41510f68507d7611e298b085ef1db2 by Nathan Heldt-Sheller","C"
"1082","Change has been successfully rebased as b35aeab364a06c045db6d2ec49a53e73ce4598c6 by Uze Choi","C"
"1083","Change has been successfully rebased as a464e7c9eea20c9fa477f7466c157fe367498a06 by Uze Choi","C"
"1084","Patch Set 6:

(1 comment)
resource/csdk/resource-directory/src/rd_client.c
Line 306: +1 for Todd's comment.
","B"
"1085","Patch Set 6: Code-Review+1

(1 comment)
resource/csdk/resource-directory/src/rd_client.c
Line 306: This is fine, but it'd be a bit more efficient to pull the call to CAGetNetworkInformation out of the for loop (beginning at line 202).  Then we wouldn't need the call to free here either, the one after exit: would catch it.
","B"
"1086","Patch Set 9: Code-Review+1

+1, but same comment as patch set 6.","B"
"1087","Patch Set 9: Code-Review+2","C"
"1088","Change has been successfully rebased as 6457ddcefe5a59db8035243e0c6bcb9b9928a44d by Uze Choi","C"
"1089","Change has been successfully rebased as 0e885696ed726e9bac49d6eda7d3156b1f12f22e by Uze Choi","C"
"1090","Change has been successfully rebased as 0b9179b33648d73b993df4c63cb0dfb03d27a182 by Uze Choi","C"
"1091","Patch Set 1: Code-Review+1

George Nash, thanks for taking care of warning issues in simulator module.","C"
"1092","Patch Set 1: Code-Review+2

(1 comment)
service/simulator/src/common/request_model_builder.cpp
Line 43: There is no principal to exit on debug mode for error in this project, but your intend is understood.
","B"
"1093","Change has been successfully rebased as eb4bde7ac46b277ff812eeac738668895b0c0334 by Uze Choi","C"
"1094","Change has been successfully rebased as 267afd8b6d00cd20b5fff39f8bcad5ba2885839c by Uze Choi","C"
"1095","Patch Set 1:

(1 comment)
resource/csdk/stack/include/ocpayload.h
Line 308: I agree that the documentation should state that the function is doing something with the memory if the function is handling memory. I would likely cause memory leaks if the documentation does not tell me how it is handling memory.
","A"
"1096","Patch Set 1:

(2 comments)
resource/csdk/stack/include/ocpayload.h
Line 307: if we're going to change anyway, I suggest ""Copy a byte string"" (none of these APIs need to have their description start with ""This function"")
Line 308: suggest: ""destination bytestring. If it has existing contents they are freed first"".  Doc should also say somewhere that memory is allocated.
","A"
"1097","Change has been successfully rebased as bf0ee10efcb142cfb0cd78d8080e856b876d6092 by Uze Choi","C"
"1098","Patch Set 4:

(1 comment)
service/resource-container/unittests/SConscript
Line 112: Hate to be nitpicky, but I'd suggest we just drop the line instead. If this flag were important to the project, this wouldn't be the only place it was set.  Checking if the compiler name is g++ isn't always sufficient: on Mac, where clang/clang++ is the native compiler, it's available under the name g++, so it would match the test and still be clang++.  We can always put it back later if needed.
","C"
"1099","Patch Set 4:

(1 comment)
service/resource-container/unittests/SConscript
Line 112: may want to add this based on target OS. But clang++ is available in Linux as well so that is not reliable as well. However, on Linux it is unlikely to be called g++.
","B"
"1100","Change has been successfully rebased as 4e81d7d45939948566ddec41d5564d5541ee00c6 by Uze Choi","C"
"1101","Patch Set 14: Code-Review+2","C"
"1102","Patch Set 15: Patch Set 14 was rebased","C"
"1103","Patch Set 8:

So why is this needed - commit msg suggests it isn't. Maybe just drop unless there's a reason?","B"
"1104","Patch Set 8: Code-Review+1

cherry-pick from master, okay to merge?","B"
"1105","Change has been successfully rebased as b7d1e0e1b2826fa66275141f9330d573e2b8fdee by Uze Choi","C"
"1106","Patch Set 1: Code-Review+1

Ugly, but at least it's a way forward.","C"
"1107","Patch Set 14:

reverify","C"
"1108","Change has been successfully rebased as a2bdf0f1f0fd4af7da27533a4dacd9a156805f61 by Uze Choi","C"
"1109","Change has been successfully rebased as 7b48db67ecc6b44e8b120a2ea9e987bc1ff2da03 by Uze Choi","C"
"1110","Patch Set 1:

(4 comments)

minor comments.
service/easy-setup/enrollee/src/resourcehandler.c
Line 259: can wrap to 100 chars ?
Line 307: can wrap to 100 chars ?
Line 422: can wrap to 100 chars ?
Line 1856: good catch!
","A"
"1111","Change has been successfully rebased as 4a76e62ac25c0e1e76aa9e76b77338c84f5d84a3 by Nathan Heldt-Sheller","C"
"1112","Patch Set 1:

BTW I believe this addresses [IOT-2818] correct?","C"
"1113","Patch Set 1:

Dan these look fine... have you smoke-tested these .json/.dat files with the provisioningclient app?  If so I can merge.","B"
"1114","Change has been successfully merged by Rick Bell","B"
"1115","Patch Set 2:

(1 comment)
resource/csdk/stack/src/ocpayload.c
Line 2273: this one got fixed via https://gerrit.iotivity.org/gerrit/#/c/22747/8/resource/csdk/stack/src/ocpayload.c
","A"
"1116","Patch Set 2: Code-Review+1

can merge if merge conflict is solved.","B"
"1117","Change has been successfully rebased as 70cfa580436eacc7de4905e271ac7ba3de3bd0b8 by Rick Bell","C"
"1118","Change has been successfully rebased as fe8b4966af3ff93934ad0c1ce902c1a0e8ac2977 by Mats Wichmann","C"
"1119","Patch Set 2:

(1 comment)
extlibs/libcoap/SConscript
Line 126: Should the _DEFAULT_SOURCE also be used here.

The _DEFAULT_SOURCE macro is part of the glibc
https://sourceware.org/glibc/wiki/Release/2.20#Packaging_Changes

I assume that the use of _DEFAULT_SOURCE was a typo and the actual macro should be _GNU_SOURCE which handle very different things.

Just verifying we are not removing a required define.
","A"
"1120","Patch Set 2: Code-Review+1

(1 comment)
build_common/linux/SConscript
Line 12: maybe it can be cleaned up elsewhere too
","B"
"1121","Patch Set 2: Code-Review+1

(1 comment)
extlibs/libcoap/SConscript
Line 126: Thanks Mats.
","C"
"1122","Change has been successfully rebased as 27c8d0b1ca218729ca6012795f7911caf745f529 by Mats Wichmann","C"
"1123","Patch Set 1: Code-Review+1

Please add bugid URL if any","C"
"1124","Patch Set 3:

(2 comments)
resource/csdk/stack/src/occollection.c
Line 506: If we add the selflink at the last case from for loop, we may minimize the code modification and this comparision also.
This comparison expression makes me mislead that childResource->rsrcResource  originally includes selfLink.

resource/csdk/stack/include/ocpayload.h
Line 334: insertSelfLink or addSelfLink looks better to understand which implicate is as additional request from developer view. Just selfLink mislead developer should do it by default, but selfLink is extra case from the collection philosophy.
","A"
"1125","Patch Set 5:

(1 comment)
resource/csdk/stack/src/occollection.c
Line 598: Next ""else if"" here can remove your new adding code except ""childCount++"" in this file.
else if (insertSelfLink)
 {iterResource = colResourceHandle }
","A"
"1126","Patch Set 6:

Will need to be rebased on https://gerrit.iotivity.org/gerrit/#/c/22629/7","B"
"1127","Patch Set 6:

reverify","C"
"1128","Patch Set 6: Code-Review+2 Verified+1

@Pandey, if order is still strange, please let me know to fix next.","B"
"1129","Change has been successfully rebased as dad17f20b03333e5155c3ee4f963a708f1c35de1 by Uze Choi","C"
"1130","Patch Set 1:

@Uze, can you review this to be included in RC2 tag for 1.3.1 release ?","C"
"1131","Patch Set 1: -Code-Review

You may add it later, but this approach will remove the existing working code for OIC request. I prefer to making the wrapper code on that function to branch out cases and we can deprecate with removal the OIC handling logic later.","B"
"1132","Patch Set 1: Code-Review-1

If request come from OIC version, response should be old style.
Please check the version from the request and separte the logic to handle OIC and OCF for backward interoperability compatibility.","B"
"1133","Patch Set 6:

(1 comment)

Could you add more detail comments on the commit message how did you change the code for proper working?
service/easy-setup/enrollee/src/es_util.c
Line 189: You'd better check thru https://gerrit.iotivity.org/gerrit/#/c/20987/45/resource/csdk/stack/src/ocpayload.c
","B"
"1134","Patch Set 6:

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: Hi Uze, latest of this patch is Patch#7 and you seem to have reviewed Patch#6. 

Also, about media type checking, core spec text has a mandatory requirement specifically when describing links property. 

<Section 7.6.3.3.1 From Core Spec> 
---
The Representation determined by this Interface depends on the requesting Client. For a Client that includes an OCF-Accept-Content-Format-Version option as defined in section 12.2.5 in the request the response only includes the Property Value of the links Property, hence a Collection or /oic/res response with oic.if.ll is an array of OCF Links. For a Client that does not include an OCF-Accept-Content-Format-Version option the response is as defined in E.5.
----

Hence the version checking should be on OCF-Accept-Content-Format-Version as per spec requirement.
","A"
"1135","Patch Set 6:

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: I recommend use OCGetRequestPayloadVersion() API instead of defining ESUtilIsOCFRequest() again.
","A"
"1136","Patch Set 6:

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: I understand, making it public API is on the way to go as https://gerrit.iotivity.org/gerrit/#/c/21675/. However, I'd like to point out, media type checking is the right way.
Let me fix the #21675 patch.
","B"
"1137","Patch Set 6:

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: My point is wrapper function is redundant.
","A"
"1138","Patch Set 6:

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: Thank you for your clear declaration. How about using OCGetRequestPayloadVersion() for retrieving version also instead of ESUtilIsOCFRequest() API?
","C"
"1139","Patch Set 6:

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: We need to consider value is greater than 1.0.0. Currently 1.3.0 is the spec version, I think. I recommend just check media-content type as application/vnd.cbor rather than version.
","A"
"1140","Patch Set 6:

https://gerrit.iotivity.org/gerrit/#/c/21675/ is ready, you'd better rebase this on top of #21675 to use new API.","B"
"1141","Patch Set 6: -Code-Review

(1 comment)
service/easy-setup/enrollee/src/es_util.c
Line 189: @Uze, 
currently OCRequestIsOCFContentFormat() is an internal API. Can we make public so we can use it from Easy Setup Enrollee ?
","B"
"1142","Patch Set 6: Code-Review+1

@Uze, Please review.","C"
"1143","Patch Set 9: Code-Review+1

If the changes are final, it can be merged first given its a dependency for my patch on self link.","B"
"1144","Patch Set 1:

Should this work move into the master branch?","B"
"1145","Patch Set 1: Code-Review-1

(4 comments)

does this work on secured mode ?
if not please add support because it is turned on by default
I can share hints if needed
resource/examples/collectionclient.cpp
Line 21: I would remove that ?
Line 117: +1
Line 225: could swap 

constant == variable
Line 287: add support for secured mode using persistant storage
","A"
"1146","Change has been successfully rebased as fd5e3b74689180541570bed9cb19a6568a19a72f by Nathan Heldt-Sheller","C"
"1147","Patch Set 2:

The change looks good to me and makes since. Please don't merge till you get feedback from another developer that is more familiar with security than I am.","B"
"1148","Change has been successfully rebased as 83b83eb6c966360f0582b97152282ace118cda31 by Nathan Heldt-Sheller","C"
"1149","Change has been successfully rebased as 005ae865a0fa56870c1cbe46ddefdf03e13219ac by Ziran Sun","C"
"1150","Patch Set 1:

(1 comment)
resource/csdk/stack/src/ocpayload.c
Line 2272: I take that we can extend this to get payloadFormat, payloadVersion and acceptVersion.
","A"
"1151","Patch Set 3: Code-Review+1

I think we can merge this one.","C"
"1152","Change has been successfully rebased as b0f25a42f5813aaf68f61e4eb1214a61d4b7c841 by Rick Bell","C"
"1153","Change has been successfully rebased as fcab5a4ccc2834e19b2b3370a519b48e10bd5ed0 by Nathan Heldt-Sheller","C"
"1154","Change has been successfully rebased as eb9e0d4873788710fb0b2ebd964b28ca532acb00 by Randeep Singh","C"
"1155","Change has been successfully rebased as a5fd41ec680248b9833a621f3f71f3437329bb02 by Uze Choi","C"
"1156","Patch Set 1:

> Thanks Abhishek I didn't know about IOT-2817 or I would have added
 > it in the Bug list. I am just trying to get IOT-2539 closed.  Is
 > easysetup_x.c picked up by normal build options. I am not seeing
 > that error when I build locally or when I look at the jenkins build
 > output.

easysetup_x.c gets picked up for linux build 
https://build.iotivity.org/ci/job/iotivity-verify-linux_secured_with_tcp/14848/console 

17:34:42 Compiling out/linux/x86_64/release/service/easy-setup/sampleapp/enrollee/linux/easysetup_x.o

although build error is only shown for x86_64 OS due to size variation of long long int type.","B"
"1157","Patch Set 1:

@Uze,
Please review and merge if appropriate.","B"
"1158","Patch Set 1: Code-Review+1

thanks for the fix.. 
I planned to fix it as part of https://jira.iotivity.org/browse/IOT-2817 but we can merge this one first and check another warning for 64 bit arch noted in IOT-2817 separately.","B"
"1159","Change has been successfully rebased as e37fdcb01b41ecaabe3a444252fcda598eb93033 by Uze Choi","C"
"1160","Patch Set 1:

(1 comment)
service/simulator/src/common/simulator_logger.cpp
Line 57: If write() is called before open(), then using m_out would result in undefined behavior. Right?
","A"
"1161","Change has been successfully rebased as cd347c9b9209fd87959a73b68e1bb6d1becac50e by Nathan Heldt-Sheller","C"
"1162","Change has been successfully rebased as a8920349797ae93b007a79a12fbe87187706d6a1 by Ashok Babu Channa","C"
"1163","Change has been successfully rebased as 82020f46f23d7e55d89f77c45d75bf4768676252 by Ashok Babu Channa","C"
"1164","Change has been successfully rebased as ad3e38e84d2abbfb7e41004c85bccfb414e44b9c by Ashok Babu Channa","C"
"1165","Patch Set 1:

(1 comment)
service/notification/android/notification-service/src/main/java/org/iotivity/service/ns/consumer/Provider.java
Line 76: It does not matter as you are re-throwing it again. I feel we don't need this catch as nothing is done after catching exception.
","A"
"1166","Patch Set 1: Code-Review+1

(1 comment)
service/notification/android/notification-service/src/main/java/org/iotivity/service/ns/consumer/Provider.java
Line 76: catching Throwable is not suggested unless we are intended to do some thing with thrown Error and Exceptions. This code is just catching and re-throwing it again which is equivalent to not catching it.
Anyway the change does not change the behaviour of the old code. Right now I give +1 to this change, Think of removing catch block from other override finalize methods.
","A"
"1167","Change has been successfully rebased as d9b06695e9d85c5339d9ef5de35166c1a13e8d86 by Ashok Babu Channa","C"
"1168","Patch Set 1: Code-Review-1

(3 comments)
service/notification/cpp-wrapper/common/NSException.h
Line 57: remove extra spaces

service/notification/src/provider/NSProviderNotification.c
Line 104: this prints only at error case. Instead check ""serverInfo"" for NULL value and return error code from there logging error case.

service/notification/src/consumer/NSConsumerScheduler.c
Line 126: remove extra line
","A"
"1169","Patch Set 2: Code-Review-1

(1 comment)
service/notification/src/provider/NSProviderNotification.c
Line 106: if (!serverInfo)
{
    //Log it and return error code
}

// do everything on valid serverInfo
","B"
"1170","Change has been successfully rebased as f20f157422f3889ec20e37a4762925d4baa9105c by Ashok Babu Channa","C"
"1171","Change has been successfully rebased as cba0de12cbeaff68b31e82b26e39fffb11a2a9b0 by Nathan Heldt-Sheller","C"
"1172","Patch Set 1:

Looks good, thanks!

A clarifying question:

I think I recall that %zu is specifically provided for size_t vars... have you checked that all these %zu -> %u replacements are actually printing u32s or u16s (as opposed to size_ts) so that we don't get warnings on 64-bit vs 32-bit systems?

I'm also a bit confused by the PRIdPTR and PRIuPTR macros... I thought these were for printing pointer vars?","B"
"1173","Patch Set 1:

Thanks for the info folks, I'll merge.","C"
"1174","Patch Set 1:

Visual Studio 2015's compiler actually does support %zu, and MSDN is just wrong that it doesn't. I filed a doc bug but who knows if it'll ever get fixed.

2013 and before, though, it's correct that it was unsupported and PRIuPTR was the way to go for a portable printf format specifier.","A"
"1175","Change has been successfully rebased as 79ba615e70888841a31befb8e614124832f9688f by Nathan Heldt-Sheller","C"
"1176","Patch Set 4:

This change depends on change 22619 being merged first.  Please do respond to Kevin's comments in the meantime.","B"
"1177","Patch Set 4: Code-Review-1

(3 comments)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 481: This might cause compilation problems on Windows because it becomes a goto instead of a return and jumps over some variable declarations. If this is a problem look into using one of the VERIFY_NOT_NULL_RET macros or similar.

resource/csdk/security/provisioning/unittest/credentialgeneratortest.cpp
Line 42: This test no longer seems to be relevant since you've removed this parameter, and now does not test what it set out to test. If this is the case, remove this test as moot and likely redundant with other tests.

resource/csdk/security/provisioning/include/internal/credentialgenerator.h
Line 46: Why is this being removed in this change? What does this have to do with rownerid?
","A"
"1178","Patch Set 7:

(3 comments)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 481: looks like it's built successfully on Windows without errors or warnings

resource/csdk/security/provisioning/unittest/credentialgeneratortest.cpp
Line 42: Done

resource/csdk/security/provisioning/include/internal/credentialgenerator.h
Line 46: rownerId was needed only to fill the corresponding field of the OicSecCred_t struct. Since it was deleted, this parameter is no longer needed.
","A"
"1179","Patch Set 7: Code-Review+2

(1 comment)
resource/csdk/security/include/experimental/securevirtualresourcetypes.h
Line 565: I don't understand... why are we removing the rownerID?  I know there's a separate global but it's the same as using gCred->rownerID (which is also a single global UUID).
","B"
"1180","Uploaded patch set 5: Commit message was updated.","C"
"1181","Uploaded patch set 6: Patch Set 5 was rebased.","C"
"1182","Change has been successfully rebased as 6ee2dcb1fdcfe761cf62e5b7936aca3544349e3e by Nathan Heldt-Sheller","C"
"1183","Patch Set 1:

(1 comment)
extlibs/gtest/SConscript
Line 73: if we're going to muck about here anyway, we ought to fix this too... this isn't a Configure task, scons should be able to understand the targets and use a Command(..., Copy()) sequence to put them in place... assuming that even has to happen.  Why doesn't cmake build them to the right place to begin with?
","A"
"1184","Patch Set 3:

To get this to pass you will need to get C.J. or one of the other maintainers from the Linux foundation to add cmake to the build systems.","B"
"1185","Patch Set 4:

I agree that we should be able to get scons to build it without cmake.  Still I have no problem promoting this in the mean time. Note I have had a Jira ticket to move the gtest build to scons only for quite a while. https://jira.iotivity.org/browse/IOT-1672 I Just have not been able to work on that ticket.  Other things have always been higher priority.","B"
"1186","Patch Set 4:

I'm not sure we even need cmake.  There are two things that happen: a python script is run which mucks about and produces the two source files and one header that will be in play; then the libraries are built, one from each source file.  That's so trivial we should just be able to do it in SCons (it's not too different from what Windows does now).","B"
"1187","Change has been successfully rebased as 4474e50d93d6aef4e813d7f15673c47e8b812af2 by Ashok Babu Channa","C"
"1188","Patch Set 10: Commit message was updated.","C"
"1189","Patch Set 6:

(3 comments)
resource/examples/simpleclient.cpp
Line 40: <coap/pdu.h>
Line 319: swap
Line 319: swap
","A"
"1190","Change has been successfully rebased as e0acbf303c68ff960c58dec8ff11fa4ecec43aa3 by Randeep Singh","C"
"1191","Patch Set 12:

(1 comment)
resource/csdk/security/provisioning/src/provisioningdatabasemanager.c
Line 839: yes, that part is fine.  We don't need the test, but it doesn't hurt anything either.
","B"
"1192","Patch Set 12: Code-Review+1

(1 comment)
resource/csdk/security/provisioning/src/provisioningdatabasemanager.c
Line 837: this isn't really needed, per the sqlite docs, ""Calling sqlite3_close() or sqlite3_close_v2() with a NULL pointer argument is a harmless no-op. ""
","B"
"1193","Patch Set 7:

(1 comment)
resource/csdk/security/provisioning/src/provisioningdatabasemanager.c
Line 840: hmmm, I thought these would be linked, commented in the one for master.  It shouldn't be necessary to check, sqlite3_close on a null ptr is harmless. Maybe there's something else going on here?  https://sqlite.org/c3ref/close.html
","A"
"1194","Patch Set 7:

Phil please checkout https://gerrit.iotivity.org/gerrit/#/c/22223/ I think it is solving this issue more completely.","B"
"1195","Patch Set 9: Code-Review-1

Okay, I agree with George, let's go with the other one.","B"
"1196","Change has been successfully rebased as 92268a18f719a45118ad2a7e1338b0fd3f95119d by Randeep Singh","C"
"1197","Change has been successfully merged by Randeep Singh","B"
"1198","Change has been successfully rebased as d8fe01898f4cb7a8c9d50918eef2dff092c78aab by Randeep Singh","C"
"1199","Change has been successfully rebased as de3b02aa6ee5ceb800417e27a2745f14edc2c108 by Ashok Babu Channa","C"
"1200","Patch Set 1:

(1 comment)
service/easy-setup/enrollee/inc/internal/es_util.h
Line 38: Not sure if we should remove "" WiFiModeStringToEnum()"" & WiFiFreqStringToEnum()?
They might be currently unused, but won't it be good to maintain them, to have completeness?
","A"
"1201","Patch Set 1:

(1 comment)
service/easy-setup/enrollee/inc/internal/es_util.h
Line 38: understand, but keeping just the unused code / functions may not be good .. (as reported by static analyzer.) I know this is not a public header, so we can not use it in sample apps. 

And there is no guarantee that it won't break in future and if breaks it may get UN-noticed due to no callers / unit tests. 

How about adding some unit tests if we really want to retain them ?
","A"
"1202","Patch Set 1: Code-Review+1

(1 comment)
service/easy-setup/enrollee/inc/internal/es_util.h
Line 38: I don't have a strong opinion on this. Can add UTs too. We can also write them again, when required.
","B"
"1203","Change has been successfully rebased as 474a3b3fca093d44470ff5622083009ea38a084e by Ashok Babu Channa","C"
"1204","Change has been successfully rebased as f9954951121bab27dea28ba451adb50322f21f3e by Mats Wichmann","C"
"1205","Patch Set 2:

looks like other changes have to land before this can build with jenkins since it now fails on warnings.","B"
"1206","Patch Set 7:

That seem reasonable to do. Please go ahead make the change.","B"
"1207","Change has been successfully rebased as 9cff3985820ae87212710195aed6f860747afc0a by Rick Bell","C"
"1208","Topic changed from clean-warnings to next","C"
"1209","Change has been successfully rebased as 690545bb0711d447ea2d1e4ecbebc24506e26e5e by Randeep Singh","C"
"1210","Patch Set 13:

(2 comments)
resource/csdk/connectivity/api/casecurityinterface.h
Line 134: I'm not clear on the purpose of this callback, as it appears to allow the application to veto a certificate based on its CN.

If the intention is only to communicate the CN to the application, then you should change these names to reflect that, and not allow a negative result returned by the application to cause an error exit inside the SSL adapter.

If the intention IS to allow the application to veto certificates based on the CN, then these doc comments need to be updated to correctly reflect the functionality being implemented.
Line 136: Not accurate. This function returns an int, currently 0 on success.
","B"
"1211","Patch Set 13:

reverify","C"
"1212","Patch Set 13: Code-Review-1

(2 comments)

I agree with Kevin's comments.
resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 498: Invalid param would probably be more descriptive here.
Line 514: nitpick: Put constant on the left to align with other checks.
","A"
"1213","Patch Set 13: Code-Review-1

(8 comments)
resource/csdk/security/provisioning/sample/provisioningclient.c
Line 2757: This returns a status code. Check it and verify success before proceeding.

resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 500: Does this global need to be protected with a lock?
Line 502: 0 maps to false. Is this what you want to return? Is it typical to return 0 on success in this module?
Line 523: This assumes subject is not NULL. If CN is not present, it will be, and this will crash. You can't trust that the certificate will always have a CN.

resource/csdk/security/provisioning/src/ocprovisioningmanager.c
Line 1593: This returns a status code. Check it and convert it into a suitable OCStackResult value.

resource/csdk/stack/octbstack_product_secured.def
Line 56: Move this up so that the file remains in alphabetical order.

resource/csdk/security/provisioning/include/ocprovisioningmanager.h
Line 695: Please provide a better description than this. PeerCNVerifyCallback is meaningless. Describe what it does, which is presumably allowing the application to see the CN of the certificate at some point (when a client connects?) and decide whether or not to allow it to continue connecting.

resource/csdk/security/provisioning/sample/sampleserver_mfg.cpp
Line 439: This returns a status code. Check it and verify success before proceeding.
","A"
"1214","Patch Set 15:

(12 comments)
resource/csdk/security/provisioning/sample/provisioningclient.c
Line 2757: Changed to void

resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 498: Not at all, it may be called with NULL to disable the callback.
Line 500: Hardly ever it will be simultaneously set up, so perhaps not.
Line 502: Changed to void
Line 514: Done
Line 523: Done

resource/csdk/connectivity/api/casecurityinterface.h
Line 134: Done
Line 136: Changed to void

resource/csdk/security/provisioning/src/ocprovisioningmanager.c
Line 1593: Changed to void

resource/csdk/stack/octbstack_product_secured.def
Line 56: Done

resource/csdk/security/provisioning/include/ocprovisioningmanager.h
Line 695: Done

resource/csdk/security/provisioning/sample/sampleserver_mfg.cpp
Line 439: Changed to void
","A"
"1215","Patch Set 15: Code-Review-1

(5 comments)
resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 521: I don't think you want the ""NULL != subject"" check here in the outer if, since you have it again in the inner if, which changes how you call g_peerCNVerifyCallback. Please review and if you agree make the appropriate change.

resource/csdk/connectivity/api/casecurityinterface.h
Line 133: What is the memory management for cert? Does the adapter allocate new memory and return it to the caller, and if so how is the caller supposed to free that memory, or does the caller supply memory, or what?
Line 140: If this is being returned to caller, this needs to be a size_t* with the address of a size_t owned by the caller.
Line 146: Keep the name of the parameter here for clarity.

resource/csdk/security/provisioning/include/ocprovisioningmanager.h
Line 704: Add a descriptive parameter name, especially since you'll need it for the doc comment so documentation gets generated correctly.
","A"
"1216","Patch Set 16:

(5 comments)
resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 521: Done

resource/csdk/connectivity/api/casecurityinterface.h
Line 133: Done
Line 140: It is used to deliver common name length and doesn't being returned back.
Line 146: Done

resource/csdk/security/provisioning/include/ocprovisioningmanager.h
Line 704: Done
","B"
"1217","Patch Set 16: Code-Review-1

(5 comments)
resource/csdk/security/provisioning/sample/provisioningclient.c
Line 2516: Elsewhere you use unsigned char *. These are actually the same type but use the same name for it in all places; don't mix uint8_t * and unsigned char *.

resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 528: See my comments in the header file about how best to handle ownership of this memory with the callback.
Line 2100: Extraneous blank line you've added here; please remove.

resource/csdk/connectivity/api/casecurityinterface.h
Line 134: Ok, this still isn't quite right.

In your current implementation, assuming the CN is found, IoTivity allocates a buffer, passes that buffer with the contents included, but does not free that buffer. The implication is that the caller is responsible for taking ownership of this memory and freeing it later.

I think this is a bad design, actually. I think you should change ""cn"" to be ""const unsigned char *"" and make it clear that the buffer is only valid while the callback is running; the callback is responsible for copying the contents out elsewhere if it wants to retain this data after the callback finishes executing. IoTivity should then free it when the callback returns. (Or you could just pass in the subject field directly, if you make it const.)

If you still think IoTivity should allocate memory and give it to the callback to take ownership of, alright, but then your documentation needs to be very explicit that ""cn"" becomes owned by the callback, and it (or some code in the app) needs to eventually call OICFree on this buffer to free it. But I strongly recommend against this design because it's not going to be well-observed by app developers.

resource/csdk/security/provisioning/include/ocprovisioningmanager.h
Line 702: Ok, here you've got the documentation. I still think you should not transfer ownership of the memory to the callback; my preferred way would be to make sure the callback knows it has to copy the contents out to somewhere it controls if it wants to retain a copy of the data, and let it worry about memory management. This method is likely to lead to memory leaks.

But if you really think this is the best way to do it, then explicitly mention OICFree as the function that should be used by the application to free the memory.
","A"
"1218","Patch Set 18:

(5 comments)
resource/csdk/security/provisioning/sample/provisioningclient.c
Line 2516: Done

resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 528: Done
Line 2100: Done

resource/csdk/connectivity/api/casecurityinterface.h
Line 134: Done

resource/csdk/security/provisioning/include/ocprovisioningmanager.h
Line 702: Done
","A"
"1219","Patch Set 18: Published edit on patch set 17.","B"
"1220","Patch Set 19: Code-Review+1","C"
"1221","Patch Set 19: Published edit on patch set 18.","B"
"1222","Patch Set 1: Code-Review-1

(4 comments)
resource/csdk/connectivity/src/adapter_util/ca_adapter_net_ssl.c
Line 1546: tabs
Line 1560: tabs
Line 1588: tabs
Line 1632: tabs
","C"
"1223","Patch Set 5: Published edit on patch set 4.","B"
"1224","Uploaded patch set 12.","C"
"1225","Uploaded patch set 15.","C"
"1226","Uploaded patch set 16.","C"
"1227","Uploaded patch set 6.","C"
"1228","Uploaded patch set 9: Patch Set 8 was rebased.","B"
"1229","Change has been successfully rebased as 367287a4c564d9d3985b939271f9f517b6bea0e1 by Randeep Singh","C"
"1230","Patch Set 6: Code-Review+1

Mot functionality works fine now","B"
"1231","Patch Set 1:

(5 comments)

some minor comments
service/easy-setup/enrollee/src/resourcehandler.c
Line 388: style: should have space after if
Line 390: can add comment explaining there only possibility of failure exist for WiFi Conf Update so error code for only this function is checked.
Line 408: there should be a space after if
Line 488: How about retrieving these properties after all error conditions are checked .. ?
In that case we can move allocation and setting of ssid & cred after line 536.
Line 588: i feel null check is redundant.. 

from 
shell>$ man 3 free

The free() function frees the memory space pointed to by ptr, which must have been returned by a previous call to malloc(), calloc() or realloc().  Otherwise, or if free(ptr) has already been called before, undefined  behavior occurs.  ** If ptr is NULL, no operation is performed. **
","A"
"1232","Patch Set 1:

(1 comment)
service/resource-encapsulation/src/serverBuilder/unittests/RCSResourceObjectTest.cpp
Line 434: please explain why was the problem in commit message

strcpy()  function  copies  the string pointed to by src, including the terminating null byte ('\0'),

BTW, why not using strdup ?
","B"
"1233","Patch Set 1:

(1 comment)
service/resource-encapsulation/src/serverBuilder/unittests/RCSResourceObjectTest.cpp
Line 434: strcpy is safe if the buffer is properly sized, which it is in the line above. so this seems unneeded.
","B"
"1234","Patch Set 1:

Thanks Jay for clarification

Note that StrDup change:
https://gerrit.iotivity.org/gerrit/#/c/22297/
is already merged in master,
so it would be nice to have it in 1.3-rel as well.","B"
"1235","Topic set to resource-encapsulation","C"
"1236","Change has been successfully rebased as 84e5622e8756a62e245ff5cc3f96359a10f4d895 by Uze Choi","C"
"1237","Patch Set 1:

(1 comment)
service/easy-setup/enrollee/src/resourcehandler.c
Line 385: repPayload null check required as in original here?
","B"
"1238","Patch Set 2:

(2 comments)
service/easy-setup/enrollee/src/resourcehandler.c
Line 362: Need to verify if ""input"" should be passed, or the value of property OC_RSRVD_REPRESENTATION.
Line 370: Minor: Can change to break.
","A"
"1239","Patch Set 3: Code-Review+2

(1 comment)
service/easy-setup/enrollee/src/resourcehandler.c
Line 362: @TODO is better to indentify commonly.
","C"
"1240","Change has been successfully rebased as c9431af92d237a676608a3248e834a9306810bc9 by Phil Coval","C"
"1241","Patch Set 3:

(1 comment)
service/resource-encapsulation/src/serverBuilder/unittests/RCSResourceObjectTest.cpp
Line 441: Since this ""commit"" is already in master, I think we may need to fix that one separately.
","A"
"1242","Patch Set 3: Code-Review+1

this is irritating: it was already merged to marter (https://gerrit.iotivity.org/gerrit/#/c/22129) but seems to have reverted somehow - the delete -> OICFreeAndSetToNull part of code is back to the old way there.","B"
"1243","Patch Set 1:

This is not logically false structure. I'm afraid this to make people misunderstood heirarchy. Can we select other option?","B"
"1244","Patch Set 1:

(5 comments)

I am not sure, but would it be better to have the ""rel"" property as part of ""OCChildResource"" structure, with more generic logic in occollection based on its value?

Before merging the patch, would suggest to split this into 2 patches: (1) SDK changes (2) Easy Setup changes.
resource/csdk/stack/src/occollection.c
Line 481: I am not sure, but would it be better to have the ""rel"" property as part of ""OCChildResource"" structure, with more generic logic here based on its value?
Line 484: styling. Space required before ""self"".
Line 486: Need to handle API's failure.

resource/csdk/stack/src/ocstack.c
Line 4285: Can change ""ERROR"" to ""INFO"".
Line 4354: Need to add handling for self link, in OCUnBindResource too.
","A"
"1245","Patch Set 1:

Mats can you cherry-pick this change to 1.3-rel?","C"
"1246","Change has been successfully rebased as b34da4aa281cfdf94e6bcbe2e6709773c1ed9de7 by Mats Wichmann","C"
"1247","Patch Set 1: Code-Review+1

(4 comments)
/COMMIT_MSG
Line 17: ^D

tools/scons/URLDownload.py
Line 99: s/\s+$//g
Line 108: s/\s+$//g

build_common/tools/UnpackAll.py
Line 62: line wrap error?
","A"
"1248","Patch Set 5:

Mats can you cherry-pick this change to 1.3-rel?","C"
"1249","Change has been successfully rebased as 58050dfafeb8ec4ffd18fc267b4ebd4790ef9d52 by C.J. Collier","C"
"1250","Patch Set 4:

Thanks for taking this on!! The community should really thank you for this effort!

I will await further updates when you would like a real review of this changeset.","B"
"1251","Change has been successfully rebased as a855c499147ce3b9dd1a87db870ad2600c3e4277 by Nathan Heldt-Sheller","C"
"1252","Patch Set 3:

Looks good.  Have you run a smoke test of the provisioningclient application (e.g. running sampleserver_justworks, and selecting 10/20/10 to onboard the sampleserver_justworks Server)?  If not familiar I can pull this patch and run the smoke test.  At this stage I'd like to do that before merging.","A"
"1253","Change has been successfully rebased as 4693e1f4a754979c3c34c328b621eebeee28a46a by Nathan Heldt-Sheller","C"
"1254","Change has been successfully rebased as f88094f02a4bd9e93293967fbf5685122d8f7028 by Todd Malsbary","C"
"1255","Patch Set 1: Code-Review-1

(5 comments)
/COMMIT_MSG
Line 12: Please include 

  Bug: https://jira.iotivity.org/browse/IOT-2457

here

resource/csdk/stack/include/ocpayload.h
Line 240: I don't think we need a new public API for this: the issue is only about the decode side.

resource/csdk/stack/src/ocpayload.c
Line 1088: I think this would be clearer to use the existing dimTotal check instead of a new check on val->arr.iArray.

i.e.

  if (dimTotal == 0)
  {
      *array = NULL;
  }
  else
  {
      *array = (int64_t*)...

Also, need to do this for other Get*Array functions.
Line 1430: It looks like FindAndSetValue above will ensure iArray is NULL already.  I'd either rely on that, or explicitly set all members of val->arr here (i.e. dimensions).
Line 1433: this can be moved (and made static) to ocpayloadparse.c
","A"
"1256","Abandoned

No action since July. Please restore if you continue work.","B"
"1257","Patch Set 2:

(4 comments)
resource/csdk/connectivity/test/ssladapter_test.cpp
Line 815: ASSERT_NE(g_mutex, NULL);
ASSERT_NE(g_cond, NULL);
Line 955: Looks like we can remove this #ifdef block, because the caller called WSAStartup already.
Line 2496: Is there a separate Client code path? 

If the Client is using sockets, it should start with WSAStartup and end with WSACleanup.
Line 2511: Ideally every WSAStartup call should have a corresponding WSACleanup call. Is there a safe place, at the very end of the test, where it can do:

#ifdef HAVE_WINSOCK2_H
    ASSERT_EQ(0,  WSACleanup())
#endif

?
","A"
"1258","Patch Set 3: Code-Review-1

Please address my feedback above.","B"
"1259","Removed the following votes:

* Code-Review-1 by Dan Mihai <Daniel.Mihai@microsoft.com>
","C"
"1260","Abandoned

No action since May. Please restore if you continue work.","B"
"1261","Patch Set 2:

(2 comments)
resource/csdk/security/provisioning/sample/cloud/cloudDiscovery.c
Line 38: Consider opening a JIRA ticket to track doing something better for a future release, and note the ticket number here. IoTivity and OCF want to move away from hardcoded paths towards resource type-based discovery, anyway.

resource/csdk/security/provisioning/src/cloud/utils.c
Line 38: Nit: Add a g_ prefix to the name of this variable, as we typically do in this code base to denote globals.
","A"
"1262","Patch Set 2: Code-Review-1

(2 comments)
resource/csdk/security/provisioning/sample/cloud/cloudDiscovery.c
Line 35: don't use ""I"" in code comments

resource/csdk/security/provisioning/sample/cloud/cloudAuth.c
Line 184: this is the wrong fix.  Instead this whole snprintf should be inside an exported function like
OCGetUri(uri, MAX_URI_LENGTH, endPoint, OC_RSRVD_ACCOUNT_URI);
","A"
"1263","Patch Set 2: Code-Review-1

(4 comments)
resource/csdk/stack/octbstack_product_with_tcp.def
Line 36: All the data exports should be removed - because they can't be used currently anyway (touching them from the app results in an app crash):

- OIC_RSRC_DOXM_URI
- OIC_RSRC_PSTAT_URI
- DEFAULT_PREFIX
- DEFAULT_PREFIX

The *.def files should contain only a list of functions exported from OCTBSTACK.DLL, and no data.

/COMMIT_MSG
Line 7: Thanks for looking into this, Andrii!

Feel free to email me if you need my opinion or help with testing on Windows, etc.
Line 12: Please include Dave Thaler in the code review, when you are ready, because he rejected this kind of workaround last time we discussed it.
Line 15: 1. In this case. the code using the SRM constant lives inside the app's EXE module.

2. The SRM constant lives inside OCTBSTACK.DLL module (not in the EXE).

3. The design of these two modules using each-other's data directly is highly unusual and not recommended, at least in the Windows world. I believe it should be against guidelines for Public IoTivity APIs too. 

If we wanted to ignore this design problem, we'd have to find a way to make the unusual octbstack.dll data exports (e.g., OIC_RSRC_DOXM_URI from octbstack_product_with_tcp.def) work - but we'd rather improve the API design instead.

One theoretical way to improve the design for OIC_RSRC_DOXM_URI would be to add a new octbstack.dll API similar to:

const char* OCGetDoxmURI()
{
    return OIC_RSRC_DOXM_URI;
}

and call that new API instead of using OIC_RSRC_DOXM_URI directly.

But, I don't think it's worth adding all of these new APIs. The size of OIC_RSRC_DOXM_URI is small enough, and the value is publicly documented, so the app can have its own copy of that string. To be consistent with other standard URIs, I think the SRM ones should move into octypes.h, similar to:

/** Device URI.*/
#define OC_RSRVD_DEVICE_URI                   ""/oic/d""

/** Platform URI.*/
#define OC_RSRVD_PLATFORM_URI                 ""/oic/p""
","A"
"1264","Change has been successfully rebased as 9675d86258b4c2740c03dd4a1c9a0b6a41b5edf1 by Nathan Heldt-Sheller","C"
"1265","Patch Set 1: Code-Review-1

(4 comments)
test/build/linux/SConscriptTAF
Line 32: libxml is no longer required?

test/src/automation/ctt/include/resource_map.h
Line 33: Is this required by coding convention?
Also, structure should be considered same as class, and class naming convention should be used(CapitalCamelCase)
Line 40: class name and variable name is not following coding convention

test/res/ctt_resource/run_taf_agent.sh
Line 10: Instead of using static architecture, please detect architecture dynamically and use it.
","A"
"1266","Patch Set 3: Code-Review-1

(6 comments)
test/res/ctt_resource/client_config.txt
Line 19: The TC list needs update.

test/res/ctt_resource/server_config.txt
Line 12: Why only one TC is listed here?
Line 20: actually, resource list will vary based upon what resources are started from IUT
if 104, 6 & 113 were used to IUT resources, then the resource list will be:
""resources"": [ ""oic.r.switch.binary"", ""oic.r.airflow"", ""oic.r.temperature"", ""x.com.vendor.timer"", ""x.com.vendor.swing"" , ""oic.wk.col"", ""oic.r.cred"", ""oic.r.acl2"", ""oic.r.crl"", ""oic.r.csr"", ""oic.r.roles"", ""oic.wk.con"", ""oic.wk.rd"", ""oic.d.light"", ""oic.r.light.brightness"", ""oic.d.light"",  ]

test/src/automation/ctt/src/mini_http_server.c
Line 367: variable name should be camelCase

test/src/automation/ctt/src/taf_agent.c
Line 688: If not required for future improvement, dead code can be removed

test/src/automation/ctt/src/dutcontroller.c
Line 104: There are several variables still not following code convention
","A"
"1267","Change has been successfully rebased as f8f9a821f9a5a5992c524d87e0969b9bc0cc435e by Mushfiqul Islam","C"
"1268","Patch Set 1:

(1 comment)
test/src/testapp/IUTSimulatorApp/c_cpp/IUTSimulator.cpp
Line 37: Please have this under OS specific macro so that IUTSimulator can build for windows
","B"
"1269","Change has been successfully rebased as aa956a355fe2449520aeff6276aa46e7cf0c211e by Ashok Babu Channa","C"
"1270","Patch Set 1:

(2 comments)
resource/csdk/connectivity/src/ws_adapter/cawsadapter_lwsimpl.c
Line 336: Resources freeing not happening in this method on failure case.
Line 533: This is not required if CAInitMutexVariables() handles resource freeing on failure case.
","B"
"1271","Patch Set 1: Code-Review+1

(1 comment)
resource/csdk/connectivity/src/ws_adapter/cawsadapter_lwsimpl.c
Line 533: ok
","C"
"1272","Change has been successfully rebased as e989d24aa43b17787c969c4fa52863583916fa83 by Ashok Babu Channa","C"
"1273","Change has been successfully rebased as b57f8a66c105767e5c859ac17de0865f6fa3bf4d by Ashok Babu Channa","C"
"1274","Patch Set 2:

What does the SVACE mean? This need to be addressed as genral term because it is not public tool.","B"
"1275","Patch Set 2: Code-Review+1

(1 comment)
resource/csdk/stack/src/ocpayload.c
Line 2258: please remove this extra space
","C"
"1276","Patch Set 3: Code-Review+1

(1 comment)
resource/csdk/stack/src/ocpayload.c
Line 2255: you could use later return and put invert the condition
to reuse the log line
","B"
"1277","Patch Set 3: Code-Review+1

Please use the ""next"" label to mark the changes under review that are necessary or important for next 1.3.1 release
Also create a Jira ticket for the gerrit commit","B"
"1278","Patch Set 5:

this will need updating, merge conflict (thus no auto rebase available)","B"
"1279","Patch Set 5: Code-Review+1

these are just nit-picks, I see no functional changes.","C"
"1280","Patch Set 6: Code-Review+1

reverify","C"
"1281","Change has been successfully rebased as ab5530053fe23bc41d0401d9b6b7e4e09ba573bd by Nathan Heldt-Sheller","C"
"1282","Change has been successfully rebased as 1865a6937b0ca3fd5d47d1574a7d01a8db0067a2 by Mats Wichmann","C"
"1283","Patch Set 1: Code-Review+1

cherry pick, should be no problem","B"
"1284","Change has been successfully rebased as 244316c9f043dbcd641b73f2fd8a3f033ad6088c by Mats Wichmann","C"
"1285","Patch Set 3: Code-Review+1

(1 comment)

Cherry pick, looks ok (though see question)
service/coap-http-proxy/unittests/CoAPHttpUnitTest.cpp
Line 279: why two different styles of casting in one statement?
","B"
"1286","Change has been successfully rebased as 99608b32462168ef251f4e088c936efcfdf2c6c5 by Rick Bell","C"
"1287","Change has been successfully rebased as 9b078e6aaf14f28230d97262b7b14145cdc552ac by Phil Coval","C"
"1288","Patch Set 1:

Can you make similar changes to <iotivity>/bridging/plugins/zigbee_plugin?","B"
"1289","Patch Set 1:

This whole directory <iotviity>/plugins should be removed now that zigbee_plugin has been migrated.","A"
"1290","Patch Set 4: Code-Review+1

As a cherry-pick, seems like this should be fine. Is plugins even still important (I thought someome said functionality migrated to bridging?)","B"
"1291","Patch Set 4: Code-Review+1

Based on this being accepted on master branch.","B"
"1292","Change has been successfully rebased as e624be85d563f84897a1423ae9074c6a0135cf20 by Nathan Heldt-Sheller","C"
"1293","Patch Set 2:

(1 comment)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 2406: I'm not clear when this function is called?  Putting the Server from RFNOP to RFPRO state is for updated things like adding ACE2s to /acl2, etc.  If we really want to re-onboard the Server from scratch, we should enter RESET, after which the device will go into RFOTM.  Which are we doing here?
","A"
"1294","Patch Set 4: -Code-Review

reverify","C"
"1295","Patch Set 4: Code-Review+1

Fix works fine","C"
"1296","Patch Set 4: Code-Review+2

(1 comment)
resource/csdk/security/provisioning/src/ownershiptransfermanager.c
Line 2406: I see.  RFPRO is fine for this purpose, but the other comment/description made me wonder what was the intention.  I'll merge.
","B"
"1297","Change has been successfully rebased as cc51a05aa62b63bb1f3fbc818a13518a19c78939 by Mats Wichmann","C"
"1298","Patch Set 3:

(1 comment)
service/resource-container/unittests/SConscript
Line 89: relative paths are fine when in topic's context
","C"
"1299","Topic changed from serice to service","C"
"1300","Topic set to serice","C"
"1301","Change has been successfully rebased as 68bff269b7e000c56dfd3671df43a4de86799321 by Rick Bell","C"
"1302","Change has been successfully rebased as f30605d06cae47d9ef082040549d79f736892b42 by Rick Bell","C"
"1303","Patch Set 1: Code-Review-1

(1 comment)
resource/csdk/security/tool/json2cbor.c
Line 1259: Is there way to get the size or create #define and then add 1 to the tmp?
","B"
"1304","Patch Set 2: Code-Review+1

sane fix for horrid code, I guess we need to push it through if it's breaking stuff.","B"
"1305","Patch Set 1: Code-Review+2

this seems fine, Phil says the patch was not for this library (I guess not removed when basing script on another one)","C"
"1306","Change has been successfully rebased as 72dac1877e27a46d7f38626b8e3b26d7f871dc50 by Mats Wichmann","C"
"1307","Change has been successfully rebased as 57ae427786f9300ababcad27069f21f3ce6b4f22 by Mats Wichmann","C"
"1308","Patch Set 4:

failure reported to
https://jira.iotivity.org/browse/IOT-2267","C"
"1309","Patch Set 6: Code-Review+2

I'm just going to take the attitude that Tizen folks know what they're doing, and if they break it, they'll be motivated to fix. Affects nobody else.","B"
"1310","Patch Set 6: Verified+1","C"
"1311","Topic changed from tizen-1.3-rel to next","C"
"1312","Uploaded patch set 3: Patch Set 2 was rebased.","B"
"1313","Change has been successfully rebased as d165f8a0285b1375ac0e515ee26d0fbcb598acc3 by Ashok Babu Channa","C"
"1314","Change has been successfully rebased as e11c93bf2445babfb8c1eb1ab8b7b4330b71480e by Ziran Sun","C"
"1315","Change has been successfully rebased as 617cdc3177a6e8494df0777797ffbb958f7cd3b2 by Ziran Sun","C"
"1316","Patch Set 2: Code-Review+1

Looks good, this is what all files should be doing for platform support guideline conformance.","C"
"1317","Change has been successfully rebased as db30bde742208f3662410fc21c7ba342f34c12a8 by Phil Coval","C"
"1318","Patch Set 3: Code-Review+2

In 1.3-rel already. Want to wait for 1.3-rel merge, or proceed?","C"
"1319","Change has been successfully rebased as 69a4bd0fb1730579b32db4eb8bfccac19cec854c by Mats Wichmann","C"
"1320","Patch Set 10:

https://gerrit.iotivity.org/gerrit/#/c/21693/ has landed in 1.3-rel, that's supposed to take care of the leaks. Since the build here was showing:

    Leak (definitely lost): 	2	(3088 bytes)
    Leak (possibly lost):	84	(85320 bytes)

it would be interesting to see if things pass here after it lands in master so we can rebase on it. Alternatively could pick this one to 1.3-rel and see how that works.","B"
"1321","Patch Set 11:

This is fine, except the fail from doing this: Leak (possibly lost):	84  is putting the count over the limit (100 leaks total, sure or possible).  We need the fix which is in 1.3-rel.","B"
"1322","Patch Set 11:

reverify

: disk full problem should be fixed now","B"
"1323","Patch Set 15: Code-Review+1

This is in 1.3-rel now.","B"
"1324","Patch Set 16:

Glad you were able to finally get this change in.","B"
"1325","Patch Set 6:

(1 comment)
resource/provisioning/unittests/SConscript
Line 124: it should not be doing all of this, as it's duplicating what run_tests already does. I can't see any other places that set up their own environment like this.
","B"
"1326","Change has been successfully rebased as 3040a9e4ab81d6b4485bcb390a643955719ab8f5 by Rick Bell","C"
"1327","Change has been successfully rebased as f18ad15b2688a243a4be2e97add7644df2bc12af by Mats Wichmann","C"
"1328","Patch Set 1:

Until it is actually completely removed I would like to see it ignored","C"
"1329","Patch Set 1:

since this old-RA stuff gradually seems to be getting removed, do we actually need to ignore this?","B"
"1330","Change has been successfully rebased as 92d972a10b1c5389c3be261b92ec3ad56489a88d by Mats Wichmann","C"
"1331","Patch Set 1: Code-Review+1

I'm happy enough to push this one through, but something has happened to master - the fixes in 1.3-rel that don't make this pick up a ton of errors still don't seem to be there.  So if this is merged, and then merged back to master, master will go to a fail state unless those patches appear.  I no longer know what the patchset for that was.  Is this okay?","A"
"1332","Patch Set 1: Code-Review+2

The problem in master seems to be gone, so the test patches have merged. Let's start the ball rolling.","B"
"1333","Change has been successfully rebased as 741f1cd4c7c67d2119204d2a92e0e7f23773f6b1 by Ashok Babu Channa","C"
"1334","Patch Set 2: Code-Review-1

(3 comments)
resource/csdk/connectivity/src/caprotocolmessage.c
Line 54: I don't think its good to define macros just to replace constants 1 and 2 in comparison.
Line 756: I think this must be COAP_UDP as UDP is default transport supported.

resource/src/CAManager.cpp
Line 106: is it needed?
anyway nowadays compilers are smart enough to optimize to use Rvalue to avoid extra copy of return value.
","A"
"1335","Patch Set 3: Code-Review-1

(1 comment)
resource/csdk/stack/src/ocpayloadparse.c
Line 557: change the name to something else. CMP_LENGTH does not bind to ""ocf://"" semantically.
Instead define macro for ""ocf://"" and use strlen on that or you can define macro for length of ""ocf://"" too.
","B"
"1336","Patch Set 4: Code-Review+1

Please use the ""next"" label to mark the changes under review that are necessary or important for next 1.3.1 release
Also create a Jira ticket for the gerrit commit","B"
"1337","Patch Set 5:

> Please use the ""next"" label to mark the changes under review that
 > are necessary or important for next 1.3.1 release
 > Also create a Jira ticket for the gerrit commit

Kindly update the commit as per the comments.","A"
"1338","Patch Set 5:

Abitha, you have any comments /","C"
"1339","Change has been successfully rebased as f1b55ab774cb744fe9f8f1cd438774d26dc124ca by Ashok Babu Channa","C"
"1340","Patch Set 1: Code-Review+1

seems like g_adapterHandler was never used. Looks okay to remove as Harish verified that removing this code has no side effects.","B"
"1341","Change has been successfully rebased as 7b7d8dfb11a1bfd88bb3e8cd61ee439e65ab354f by Randeep Singh","C"
"1342","Patch Set 2: Code-Review+1

reverify","C"
"1343","Patch Set 7: Commit message was updated.","C"
"1344","Patch Set 11: Published edit on patch set 10","B"
"1345","Patch Set 12:

> Uploaded patch set 12.

1. Addition of more unit test cases for security APIs.
2. Incremental build of libwebsockets library.","B"
"1346","Patch Set 13:

> Uploaded patch set 13.

Rebased Patch Set 12 on top of cloud interface branch.","B"
"1347","Patch Set 14:

(2 comments)
extlibs/libwebsockets/prep.sh
Line 27: Remove extra whitespace.

resource/csdk/stack/samples/tizen/build/scons/SConscript
Line 61: why to replace TCP with WS?
","B"
"1348","Patch Set 17: Code-Review-1

(3 comments)

Why websocket build for WINDOWS? Can we avoid building websocket for windows by throwing an error message at build time?
resource/csdk/connectivity/src/caprotocolmessage.c
Line 69: returning NULL when function return type is unsigned int ?
Line 77: returning NULL when function return type is unsigned int ?
Line 79: operator is acting on unsigned int and size_t.
Usually size_t is designed to store value more than unsigned int.
","A"
"1349","Patch Set 18:

(2 comments)
resource/csdk/connectivity/src/caprotocolmessage.c
Line 69: Returning -1 is incorrect as the return type is size_t which is unsigned. A new patch will be submitted to handle this issue.
Line 77: Returning -1 is incorrect as the return type is size_t which is unsigned. A new patch will be submitted to handle this issue.
","A"
"1350","Patch Set 18:

> Uploaded patch set 18.

Addresses SVACE static analysis issues.","B"
"1351","Patch Set 18: Code-Review-1

Patch 18 doesn't address the review comments given on patch 17.","B"
"1352","Patch Set 19:

(2 comments)
resource/csdk/connectivity/src/caprotocolmessage.c
Line 69: Done
Line 77: Done
","B"
"1353","Patch Set 21:

> Uploaded patch set 21.

Added initial version of security support for android platform.","C"
"1354","Patch Set 22:

Adding new API WSSetCipherSuite for setting cipher suites.","B"
"1355","Patch Set 23:

Removed extra white spaces.","C"
"1356","Patch Set 23: Published edit on patch set 22.","B"
"1357","Patch Set 24:

(3 comments)
extlibs/libwebsockets/prep.sh
Line 67: This patch add files to cloned ""libwebsockets"" repo.
We have to make sure adding files to libwebsockets will not disrespect its license terms.

extlibs/libwebsockets/0001-WebSockets-Build-Changes-for-TIZEN.patch
Line 14: is this script being used in build process ?
Line 46: This is sample app manifest file.
Don't we have to create separate one for libwebsockets?
","A"
"1358","Patch Set 26: Code-Review-1

(8 comments)

For merging, please make following changes ..

1) Add doxygen comments
2) Move ssl linking like mbedTLS for uniformity
3) Libcoap changes can go ahead until modifications in upsteam is not merged
4) Jenkins +1
resource/csdk/connectivity/inc/cawsadapter.h
Line 67: No doxygen comments. please add

resource/csdk/security/provisioning/unittest/SConscript
Line 78: including ssl libraries like mbedtls will be better for uniformity

resource/csdk/connectivity/src/ws_adapter/cawsutil.c
Line 20: can we make use of any list utils already available in iotivity ?

java/jni/SConscript
Line 116: extra space

resource/csdk/connectivity/inc/cawsinterface.h
Line 44: no doxygen comments. please add

resource/csdk/connectivity/src/ws_adapter/cawsadapter_ssl.h
Line 38: doxygen comments ?

resource/csdk/stack/src/ocstack.c
Line 3081: do we need this ? TCP is not covered with #defines.

resource/csdk/connectivity/src/caconnectivitymanager.c
Line 440: remove NFC ADAPTER changes in this .. make separate patch
","A"
"1359","Patch Set 28:

Added doxygen comments","C"
"1360","Patch Set 30:

(1 comment)

Support for PSK cipher.
extlibs/libwebsockets/prep.sh
Line 67: Yes you are right:). I have checked about this in libwebsockets community.
","C"
"1361","Patch Set 30: Published edit on patch set 29.","B"
"1362","Patch Set 32:

I faced 2 issues while trying testing simpleclient and simpleserver samples over ws adapter in secure mode -

Issue-1:
simpleclient and simpleserver are not working in secure mode for any adapter.
- This patch https://gerrit.iotivity.org/gerrit/#/c/21487/ has fix for this problem.

Issue-2:
Server context can not be created without providing server certificate and private key to libwebsockets.
- libwebsockets require some changes in order to create secure server context without cert. I have made these changes and needs to be pushed to libwebsockets for review.","A"
"1363","Patch Set 33:

Modified occlientbasicops.cpp to work on websocket connectivity when run with option ""-p 2"" (2 is for WS connectivity).","B"
"1364","Patch Set 34:

Secure sample for tizen which can work on WS connectivity also.","B"
"1365","Patch Set 36:

Added Doxygen comments for cawsadapter_ssl.h APIs.","B"
"1366","Patch Set 39:

Applied astyle","C"
"1367","Patch Set 40:

SVACE issues fixed for snapshot id 7912","B"
"1368","Patch Set 41:

Hello All,
Cloud server recently added support for websocket, But device stack can not use this as there is not support for websocket connectivity in IoTivity device stack.
This patch is about adding websocket connectivity support to IoTivity device stack (like IP, TCP, BT, NFC) with the intention of device can interact with cloud server on websocket connection (coap+ws).

@Dan Mihai and Randeep, please review this patch and provide your valuable inputs.","B"
"1369","Patch Set 42:

Patch 42: Updated simpleclient android sample application for websocket and tcp.","B"
"1370","Patch Set 43: Published edit on patch set 42.","B"
"1371","Patch Set 44:

(1 comment)
resource/csdk/stack/samples/linux/secure/occlientbasicops.cpp
Line 544: Typo.
","C"
"1372","Patch Set 45:

(1 comment)
resource/csdk/stack/samples/linux/secure/occlientbasicops.cpp
Line 544: Done
","C"
"1373","Patch Set 46:

any reason for using openssl library and not exisiting mbedTLS ?","B"
"1374","Patch Set 47:

(1 comment)
resource/csdk/connectivity/src/ws_adapter/cawsadapter_lwsimpl.c
Line 476: Does ""g_continueLWSService"" required to be critical section?. on worst case when system is ideal locking and unlocking happens in 50ms interval.
what about coming from other way adapter stop API sets g_continueLWSService to false and do conditional wait until the lws_service is stopped.
","B"
"1375","Patch Set 47:

> > any reason for using openssl library and not exisiting mbedTLS ?
 > 
 > Because libwebsockets library doesn't have mbedTLS support.

There is work going on to support mbedTLS in libwebsockets library from its open source community. We have plan to switch to mbedTLS when libwebsockets library officially supports it.","B"
"1376","Patch Set 47:

> any reason for using openssl library and not exisiting mbedTLS ?

Because libwebsockets library doesn't have mbedTLS support.","B"
"1377","Patch Set 48:

(1 comment)
resource/csdk/connectivity/src/ws_adapter/cawsadapter_lwsimpl.c
Line 476: stop API already sets g_continueLWSService to false and waits conditionally till lws_service is stopped. However it is also necessary to lock before checking g_continueLWSService in the while loop since this is the only safe way to communicate between threads.
","A"
"1378","Patch Set 49:

> Before openssl is introduced due to websocket requirement, main
 > security team needs to introduce openssl.
 > However, unless there is any requirement to support openssl in
 > there for now, new modules should be aligned to the current
 > security external library/stuff.
 > If not, it make lots of redundant/messy code/library in iotivity.
 > And, I am not sure it can support security infra features such as
 > security onboaring using websocket with openssl.

WS adapter is primarily meant for communication between device and cloud services. Thus we don't want to target full security infra from secure onboarding to controlling messages.
In fact we didn't wanted add openssl along with mbedTLS, but libwebsockets library not having support for mbedTLS forced us to inlucde openssl only for WS adapter. By the way there is some work in progress in libwebsockets to include support for mbedTLS and we have plans to change to mbedTLS once its officially released.","A"
"1379","Patch Set 49: Code-Review-1

Before openssl is introduced due to websocket requirement, main security team needs to introduce openssl.
However, unless there is any requirement to support openssl in there for now, new modules should be aligned to the current security external library/stuff. 
If not, it make lots of redundant/messy code/library in iotivity. And, I am not sure it can support security infra features such as security onboaring using websocket with openssl.","B"
"1380","Patch Set 4:

(12 comments)
resource/csdk/connectivity/src/caprotocolmessage.c
Line 1152: I can't see any problem here.
If both WITH_TCP and WITH_WS are defined, then both if block and else if block will be included in the code. These conditional blocks will determine the transport based on the endpoint. For websocket PDU, transport will be set to COAP_WS by the else if block.

In TCP case(if block), transport will be determined based on the length header field which is not applicable for UDP and WS.

resource/csdk/connectivity/inc/cawsadapter.h
Line 3: Ok.

resource/csdk/connectivity/lib/libcoap-4.1.1/debug.c
Line 248: Yes. I will make changes.

extlibs/libwebsockets/SConscript
Line 3: Ok.
Line 33: Ok.

resource/csdk/connectivity/inc/cawsinterface.h
Line 3: Ok.

resource/csdk/connectivity/lib/libcoap-4.1.1/pdu.c
Line 38: No. The main intention is to extend the logic for WS. 
Previously, MEMB macro invoked if WITH_TCP not defined. Now, extending the same logic, MEMB macro will be invoked only if both WITH_TCP and WITH_WS are not defined.
Line 154: No.
Line 232: This is to avoid the unused parameter warning.
Line 240: The ""defined"" construct ignores the actual value of the MACROs.
Ex:
#define MACRO1
#define MACRO2 1
#define MACRO3 0

#if defined(MACRO1) && defined(MACRO2) && defined(MACRO3)
//This block will be called.
#endif

The above if block will be evaluated to true.
Line 248: Same as above.

build_common/external_libs.scons
Line 149: Though this file looks like a right place to invoke the SConscript of libwebsockets library, it's not mandatory. Taking the reference of other libraries such as libcoap, mbedTLS which are triggered at other places, currently libwebsockets library gets invoked from resource/SConscript right after the invocation of libcoap.
","A"
"1381","Patch Set 4:

(3 comments)
extlibs/libwebsockets/lws_build.sh
Line 16: Ok. I will push a patch to handle both secured/unsecured and debug/release options.

build_common/SConscript
Line 457: caprotocolmessage.c/.h uses 'WITH_TCP' flag. For websockets, to maintain naming consistency, it's better if we use 'WITH_WS' instead of 'WS_ADAPTER'.
Line 509: caprotocolmessage.c/.h uses 'WITH_TCP' flag. For websockets, to maintain naming consistency, it's better if we use 'WITH_WS' instead of 'WS_ADAPTER'.
","A"
"1382","Patch Set 4: Code-Review-1

Changes need to be made in the upstream lincoap","B"
"1383","Patch Set 51:

(2 comments)
extlibs/libwebsockets/lws_build.sh
Line 1: please insert 

#!/bin/sh 

at top of file
Line 13: please indent with 4 spaces
","C"
"1384","Patch Set 51:

In some aspect, we need to make sure if this web socket secure mode with openssl is available for light-weight device platform.
This may cause the resource saturation in the case of light-weight devices, where duplicate security libraries are included.","B"
"1385","Patch Set 51:

Jira ticket has been created for migrating from openssl to mbedTLS when it's supported in libwebsockets. https://jira.iotivity.org/browse/IOT-2730","B"
"1386","Patch Set 51: Code-Review+1

> > Before openssl is introduced due to websocket requirement, main
 > > security team needs to introduce openssl.
 > > However, unless there is any requirement to support openssl in
 > > there for now, new modules should be aligned to the current
 > > security external library/stuff.
 > > If not, it make lots of redundant/messy code/library in iotivity.
 > > And, I am not sure it can support security infra features such as
 > > security onboaring using websocket with openssl.
 > 
 > WS adapter is primarily meant for communication between device and
 > cloud services. Thus we don't want to target full security infra
 > from secure onboarding to controlling messages.
 > In fact we didn't wanted add openssl along with mbedTLS, but
 > libwebsockets library not having support for mbedTLS forced us to
 > inlucde openssl only for WS adapter. By the way there is some work
 > in progress in libwebsockets to include support for mbedTLS and we
 > have plans to change to mbedTLS once its officially released.

yes , when there is final update with mbedTLS in libwebsockets, openssl can be removed. Current implementation is well enough to be merged and proceed for next steps. IMO libwebsockets has many features which we can not ignore because of openssl alone. @Harish, create a JIRA about removal openssl when libwebsocket is updated in JIRA and update it here.","A"
"1387","Patch Set 51: Commit message was updated.","C"
"1388","Patch Set 52:

(2 comments)
extlibs/libwebsockets/lws_build.sh
Line 1: Done
Line 13: Done
","B"
"1389","Patch Set 54:

Triggering jenkins build again","C"
"1390","Patch Set 54: Commit message was updated.","C"
"1391","Patch Set 55:

Patch 55: Updated the build script for libwebsockets library.
1. Removed 'make install' as there is no need for it.
2. Enabled libwebsockets library to get built each & every time.
Why? library doesn't get rebuilt if it was already built for a different platform. So we need to clean before building it for a different platform and it is done by removing the build directory.","A"
"1392","Patch Set 55: Code-Review+2

(5 comments)
resource/csdk/connectivity/src/ws_adapter/cawsadapter.c
Line 232: Remove g_sendQueueHandle and set it to NULL ..
Line 346: why no CATerminateWS(); in other failure cases ?

resource/csdk/connectivity/src/ws_adapter/cawsadapter_lwsimpl.c
Line 355: remove g_continueLWSServiceMutex variable
Line 365: remove other two mutexes
Line 542: Mutex need to be terminated or freed  in all returns?
","A"
"1393","Patch Set 5:

We have pushed CoAP PDU format changes for WebSocket to upstream libcoap github repo. I think we shall keep these changes in local libcoap kept in iotivity until we completely switch to upstream version for Linux, android and tizen platforms.","B"
"1394","Patch Set 5: Code-Review-1

(1 comment)
resource/csdk/connectivity/lib/libcoap-4.1.1/pdu.c
Line 1: I agree with Dave that IoTivity should switch to the upstream CoAP version, and then make changes to that version. Windows is already using the upstream CoAP so hopefully switching the other platforms is not terribly hard.

Maintaining a separate fork of libcoap seems unsustainable.
","A"
"1425","Change has been successfully rebased as bd555d18cc4df098856806810839e97343c45ebb by Mats Wichmann","C"
"1426","Patch Set 14:

(1 comment)

reverify
resource/csdk/connectivity/src/bt_edr_adapter/android/SConscript
Line 14: Thanks for verifying. I has a feeling this was the case but kept thinking it shouldn't be the case.
","B"
"1427","Patch Set 14:

(9 comments)

I stopped leaving comments for every place I thought was an issue. Please just verify that the change is as intended.

The same patterns were repeated multiple consistently so addressing my fist comments with something saying this is the way it should be would at least tell me my assumptions are wrong.
resource/csdk/connectivity/SConscript
Line 15: shouldn't this remain an array.  Sure right now there is only one of the build targets that disallows multitransport but other targets could be added.

resource/csdk/connectivity/src/SConscript
Line 87: same comment on square brackets.
Line 96: same comment on square brackets.
Line 106: Can't we use the SCons built in Append method so we don't have to specify the file?

resource/csdk/connectivity/src/bt_edr_adapter/android/SConscript
Line 14: I may be wrong but I keep feeling scons should not need to be told these are Files explicitly.

If you found this is wrong in the process of writing the change I will accept your assessment.

resource/csdk/connectivity/src/bt_edr_adapter/SConscript
Line 11: same comment on square brackets.
Line 12: I don't think we need to specify this is a file SCons should know.
Line 23: not sure I understand why these lines needed to change they were fine.

resource/csdk/connectivity/common/SConscript
Line 27: shouldnt't this remain square brackets?  We are asking if the target_os is in the array.
","A"
"1428","Patch Set 14:

At least with the out of space error you understand why if failed.  When you make a documentation edit and it fails a unit test those are the ones that are hard to understand. :)","B"
"1429","Patch Set 17:

(1 comment)
resource/csdk/connectivity/src/SConscript
Line 15: doesn't using os.pardir mess up variant dir?  I think you may have update this in another patch it that is the case just let me know.
","A"
"1430","Patch Set 17:

Let's rebase on https://gerrit.iotivity.org/gerrit/#/c/22647/","B"
"1431","Patch Set 17: Code-Review+1","C"
"1432","Patch Set 17: Code-Review+1

(1 comment)
resource/csdk/connectivity/src/bt_le_adapter/linux/SConscript
Line 156: why is it highlighted ? CRLF ?
","B"
"1433","Patch Set 5:

Mat - Do we know why we are having to do so many reverify and that it is not automatically kicking off with each patch","B"
"1434","Patch Set 5:

Sorry comment on wrong patch","C"
"1435","Change has been successfully rebased as b3dd9c03d72563983915076c567708e56deca574 by Mats Wichmann","C"
"1436","Patch Set 1: Code-Review+1

cherry pick, no objection","C"
"1437","Change has been successfully rebased as af8efa39d7ffa92d4539b520891f33e846f7abc0 by Rick Bell","C"
"1438","Patch Set 1: Code-Review+1

logging will happen in any case now","B"
"1439","Change has been successfully cherry-picked as 043d580965d448da6d15710cf6b0cc7b4c18e4f8 by Mats Wichmann","C"
"1440","Patch Set 4:

(1 comment)
resource/csdk/security/provisioning/src/provisioningdatabasemanager.c
Line 840: should not need to check - sqlite3_close(NULL) is defined as a harmless no-op.
","C"
"1441","Patch Set 4: Code-Review+2

Need to push as many of the simple leak problems as possible, since the current count is over the configured limit in Jenkins. A week must be enough time for someone to find a problem with this.","B"
"1442","Change has been successfully cherry-picked as d887a781f4679ab28d513246429d8ad4931e6e3c by Ashok Babu Channa","C"
"1443","Patch Set 6:

It's cleared up all six complaints from valgrind, which you could see in for example this link: https://build.iotivity.org/ci/job/iotivity-verify-unit_tests/18155/valgrindResult/pid=4508/   Would be good to go ahead and push, it's simple enough.","B"
"1444","Patch Set 6: Code-Review+1

I see this problem report in coverity as well:

2. alloc: Allocation of memory which must be freed using free.
3. assign: Assigning: ocEntityHandlerRequest.query = strdup(query.c_str()).
...	
CID 1454943 (#1 of 1): Incorrect deallocator used (ALLOC_FREE_MISMATCH)
4. free: Calling operator delete[] frees ocEntityHandlerRequest.query using operator delete[] but it should have been freed using free.
439        delete[] ocEntityHandlerRequest.query;","A"
"1445","Patch Set 2:

(2 comments)

Some issues to fix:

02:54:51             OCRepresentation& operator=(const OCRepresentation&) = default;
02:54:51                                                                ^
02:54:51 fatal error: too many errors emitted, stopping now [-ferror-limit=]
02:54:51 20 errors generated.
02:54:51 scons: *** [out/darwin/x86_64/debug/resource/src/OCPlatform.os] Error 1
resource/src/SConscript
Line 93: agrea

resource/src/OCRepresentation.cpp
Line 233: you can use && instead of 2 ifs
","A"
"1446","Patch Set 2:

(2 comments)
resource/src/SConscript
Line 93: My only concern is that using the define 'DARWIN' may inadvertently match with defines from other libraries. This could cause us problems.  maybe this should be something like 'OC_DARWIN' adding a prefix helps avoid conflicts on common defines.

resource/src/OCRepresentation.cpp
Line 233: see comment in /resource/src/SConscript
","A"
"1447","Patch Set 3:

according to
https://build.iotivity.org/ci/job/iotivity-verify-osx/9706/consoleText


+ scons TARGET_OS=darwin SYS_VERSION=10.10 RELEASE=false


I have no darwin host to check myself, do you work in macos ?","B"
"1448","Patch Set 5:

(1 comment)

Please explain problem with _Bit_reference ?
resource/src/OCRepresentation.cpp
Line 233: or use OR (||) condition , best is to create a macro like

OC_SUPPORT_FUNCTION_TEMPLATE or something like that
","A"
"1449","Patch Set 5:

(1 comment)
resource/src/SConscript
Line 93: I've got a patch for this SConscript that cleans up the formatting inconsistencies... https://gerrit.iotivity.org/gerrit/17583
","A"
"1450","Patch Set 5:

please rebase and fix conflict to make sure","B"
"1451","Patch Set 5: Code-Review-1

(2 comments)

FYI the position of Darwin sub-maintainer is vacant.  Any volunteers?
resource/src/SConscript
Line 93: seems to mix spaces when surrounding lines use tabs

resource/src/OCRepresentation.cpp
Line 233: agree with phil
","A"
"1452","Patch Set 8:

this doesn't look like it would be hard to finish up.  is there still any interest?","C"
"1453","Patch Set 8: Code-Review-1

(4 comments)
build_common/darwin/SConscript
Line 88: it would be better to make this be in iotivity_config.h which is what has the defines for what's supported on various OS's.  iotivity_config.h is generated by resource/c_common/SConscript

resource/src/OCRepresentation.cpp
Line 232: remove the _MSC_VER and __APPLE__ checks and just check OC_BIT_REFEENCE_UNSUPPORTED.  Then make sure that's defined when _MSC_VER or __APPLE__ are defined.

resource/unittests/OCRepresentationEncodingTest.cpp
Line 463: remove _MSC_VER and just make sure OC_BIT_REFEFENCE_UNSUPPORTED is defined when _MSC_VER is defined
Line 544: same here.  We want to move from platform/compiler checks in regular code to just using feature checks.

Actually it occurs to me that we prefer positive rather than negative defines, so BIT_REFERENCE_SUPPORTED would be better than the opposite.  And don't need OC_ prefix in iotivity_config.h defines.
","A"
"1454","Change has been successfully rebased as a8a435805e21f089fa8904214addb37aca435bd0 by Towhidul Islam","C"
"1455","Change has been successfully rebased as ca51a4544a5c2ccab348b6a8ed839c90c7d91ee1 by Towhidul Islam","C"
"1456","Patch Set 3:

(1 comment)
resource/examples/oic_svr_db_server.json
Line 82: It sounds like we really need input from the security guys.  Just so you know on my system I tried removing the ""credid: 2 block and it no longer worked. i don't see where the 'subjectuuid' or 'privatedata' for that block is coming from but it seems to be needed.

I also tried changing the rowneruuid to the value I suggested (31313131-3131-3131-3131-313131313131) and it worked as well.
","B"
"1457","Patch Set 3:

(1 comment)
resource/examples/oic_svr_db_server.json
Line 82: shouldn't this still be;

  ""rowneruuid"": ""31313131-3131-3131-3131-313131313131""
","A"
"1458","Patch Set 3:

Can anyone on this review help me figure out why this does not work when using option 1 (default).

option 1 is the non-secure resource and notify list of observers.
vs.
option 3 secure resource and notify list of observers

I spend a good chunk of time trying to figure out how to get the sample to work with a non-secure resource but I was unable to figure out how.

The reason I am trying to get it to work with a non-secure resource is because that is currently how the Java samples are written.","B"
"1459","Patch Set 3:

I figured out my first question about the ""auth-crypt"" and ""anon-clear"" those only work for the listed href so does not include the light resource.

now I am trying to figure out why you needed to add

 ""aceid"": 4,
 ""subject"": { ""uuid"": ""31393139-3139-3139-3139-313931393139"" },
 ""resources"": [{ ""href"": ""/a/light"" }],
 ""permission"": 7

Who is the new uuid?  isn't the client 31313131-3131-3131-3131-313131313131?","B"
"1460","Patch Set 3:

Phil - What do we need to do get this patch in? We are waiting for this patch before we post https://gerrit.iotivity.org/gerrit/#/c/21571/","B"
"1461","Patch Set 3:

Phil, This works for the simpleserver 3 option.

3 - secure resource and notify all observers

this does not work for option 1 the non-secure resource an notify all observers.  What I am unsure about is why this does not work for the non-secure. You have specified the same acl for ""auth-crypt"" and ""anon-clear"".  Shouldn't this work for both?

Also your permission is 2 which is Read if I remember right. Which means you do not have permission to notify. If we want notify as well wouldn't the permission need to be 18 (N--R-)?  I am far from being the expert on the security I am still trying go grasp everything so I may be wrong.","A"
"1462","Patch Set 3: -Code-Review

changing my code-review to 0 in hopes that someone else will take a look . I know many people see a -1 and skip since it looks like it already needed fixing.","B"
"1463","Patch Set 3: Code-Review-1

Phil I am pretty sure the value in oic_svr_db_server.json is incorrect. If you think it is correct let me know and I will remove my -1","B"
"1464","Patch Set 5:

To make the non-secure (option 1) work, we need to include the OC_NONSECURE flag while registering the resource, otherwise coaps:// endpoint will be created.

void createResource()
{
...
if(isSecure)
        {
            resourceProperty = OC_DISCOVERABLE | OC_OBSERVABLE | OC_SECURE;
        }
        else
        {
            resourceProperty = OC_DISCOVERABLE | OC_OBSERVABLE | OC_NONSECURE;
        }
...
}

And, a connection type ACE ""anon-clear"" needed for this resource as well. BTW, the ace#4 was created for the non-device owner (31393139-3139-3139-3139-313931393139), we may remove it and the associated credential to avoid confusion. IMHO","A"
"1465","Patch Set 7:

> @Tonny Tzeng I have added the OC_NONSECURE to the resorceProperty.
 > And the oic_svr_db_server already has the ""anon-clear"" in the ACE.
 > When I try and run the samples with the non-secure resource option
 > it still is not working.
Hi George,

Could you verify whether you have the ""anon-clear"" ACE set in the final SVR DB file? I tried a fresh Patch Set 7 and added OC_NONSECURE flags manually, and regenerate the DB file, then the simpleclient can connect to the simpleserver with option 1 and 2.

Regards,
Tonny","A"
"1466","Patch Set 7:

@Tonny Tzeng I have added the OC_NONSECURE to the resorceProperty. And the oic_svr_db_server already has the ""anon-clear"" in the ACE. When I try and run the samples with the non-secure resource option it still is not working.","B"
"1467","Patch Set 7:

I admit I did not try and regenerate the .dat file I assumed it was regenerated based on the .json file. I will give it a try.","B"
"1468","Patch Set 7:

I confirm that I was able to perform a GET request over coaps using these oic_svr_db.json files. [0] contains the code for my test. This change enables coaps on 1.3.0 as well.

[0] https://gist.github.com/gabrielschulhof/517b3518353e95a45b08eb21d4315840/archive/0cb228449f45b49d11276973e3746e3a99431a07.tar.gz","A"
"1469","Patch Set 7:

This will be merged in to master in the next mergeback from 1.3-rel and can probably be abandoned.","B"
"1470","Patch Set 2:

Phil I am not quite sure I understand why this revert commit is going in.  Is the code in question done wrong?","B"
"1471","Patch Set 4:

(1 comment)

Now that I understand why you are trying to revert this commit I have no problem giving it a +1 but I would like the commit message fixed.

I would fix the commit that is being reverted or remove the line from the commit message so it is not misleading.
/COMMIT_MSG
Line 11: I agree with Dan there does not appear to be a commit using this sha tag.  Is it a Change-Id if so it should start with an I.  Its odd that the commit referenced has the same sha as this commits Change-Id.
","B"
"1472","Patch Set 4:

(1 comment)
/COMMIT_MSG
Line 11: Are you actually reverting be76a75238598b38f73e88c172c4ab152066d1f0?

Uze/Ashok, do you agree that be76a75238598b38f73e88c172c4ab152066d1f0 should be reverted?
","A"
"1473","Patch Set 5: Code-Review+1

Thanks for updating the commit message to make it clear why this was being done. helps a lot.","B"
"1474","Patch Set 6:

Pleas adopt https://gerrit.iotivity.org/gerrit/#/c/22293/ instead of it.","B"
"1475","Patch Set 6: Code-Review-1

Sorry for my late answer.
Instead of this patch, other consecutive patch will resolve this issue I think. Please wait let me see.","B"
"1476","Patch Set 6: Code-Review-2

it has been already merged into master.","A"
"1477","Change has been successfully rebased as e03914937fad06111d4486f07954c28ecf33b1d3 by Mushfiqul Islam","C"
"1478","Patch Set 3: Code-Review+1

(1 comment)

Looks fine to me, just a query comment on ite/exec/runner.py
test/test_manager/ite/exec/runner.py
Line 83: Any reason for the space to remove?
","B"
"1479","Topic set to 1.3-rel","C"
"1480","Change has been successfully rebased as ab3b461fae4af15d50abb5a068809e6f4d93d469 by Randeep Singh","C"
"1481","Patch Set 3: Code-Review+1

I looked over this one a bit quickly but it looks reasonable, and I assume all of this deleted code is on purpose for a reason.","B"
"1482","Change has been successfully rebased as 366409bf9ea4039457f1f68df330814227bb989f by Nathan Heldt-Sheller","C"
"1483","Patch Set 1:

Can you please explain what this fix does?  I'm having a hard time clearly understanding the massive logical test!  Thanks.","B"
"1484","Patch Set 1: Code-Review+1

(1 comment)
resource/csdk/security/src/credresource.c
Line 2145: Nit: I do prefer these clauses in compound booleans be enclosed in parentheses; i.e., { && (memcmp(.....) != 0 ) && (memcmp(.....) == 0)) }
","C"
"1485","Patch Set 3: Code-Review+1

(1 comment)
resource/csdk/security/src/credresource.c
Line 2145: It's fine.
","C"
"1486","Change has been successfully rebased as add093b173491fdf4bc4f9964e5dc956a96123fa by Nathan Heldt-Sheller","C"
"1487","Patch Set 1:

(1 comment)
resource/csdk/security/src/credresource.c
Line 1683: I'm also nervous about this. AddCredential gets called internally in a few places. Have you audited those sites?
","B"
"1488","Patch Set 1:

(1 comment)
resource/csdk/security/src/credresource.c
Line 1683: are we sure we want to test here?  The Update or Delete request handlers should already be checking the /pstat.dos.s state, and if this AddCred() function is ever called internally, it's not necessary for that /pstat.dos.s check to pass... have you verified that this function is only called by the Update or Delete request handlers?
","A"
"1489","Patch Set 1: Code-Review+1

Given Aleksey's analysis of AddCredential's impact, I think this is fine.","B"
"1490","Topic changed from logsecurity to security","C"
"1491","Topic changed from security to logsecurity","C"
"1492","Change has been successfully rebased as 94784c3b4c5ead457d8501bdb383dbe5ddf1918e by Mats Wichmann","C"
"1493","Patch Set 1: Code-Review+1

We should probably merge this, and if people care, later the report tool could check the version of gcovr to decide whether it can use the option (looks like it was added at 3.2).","A"
"1494","Patch Set 2:

> We should probably merge this, and if people care, later the report
 > tool could check the version of gcovr to decide whether it can use
 > the option (looks like it was added at 3.2).

Another option for progressing is to have the build install gcovr instead of depending on distro version - we already have that need with scons.   I see:

    $ pip search gcovr
    gcovr (3.3)  - A Python script for summarizing gcov data.","B"
"1495","Change has been successfully rebased as 22f0888c03e241ee60d3d8358d827f0c75fbcf0c by Mats Wichmann","C"
"1496","Patch Set 1:

(1 comment)
service/easy-setup/enrollee/unittests/SConscript
Line 37: couldn't these be moved into the gtest_env as well?

Or are these flags not used in every release variant?
","B"
"1497","Patch Set 1: Code-Review+1

(1 comment)
service/easy-setup/enrollee/unittests/SConscript
Line 37: Thanks for the response. Have my +1.
","C"
"1498","Patch Set 3:

(1 comment)
service/easy-setup/enrollee/unittests/SConscript
Line 37: porting those tests to window could be done in other patch
","B"
"1499","Patch Set 3:

(1 comment)
service/easy-setup/mediator/richsdk/unittests/SConscript
Line 34: the script one level above this does:

if env.get('SECURED') == '0':
    if target_os == 'linux':
        SConscript('unittests/SConscript')

so at the moment protected, though not in a very readable way if you're actually in the unittest dir.  Shouldn't these be coming down from the top level anyway?
","B"
"1500","Patch Set 3:

(2 comments)
service/easy-setup/mediator/richsdk/unittests/SConscript
Line 34: these flags only apply to gcc or clang compilers not windows. Should these be placed some other place?

service/easy-setup/enrollee/unittests/SConscript
Line 37: These flags should not be used for Windows but I don't see anything that would prevent these being applied to all of the OSs that build this code.
","A"
